{"version":3,"sources":["webpack:///resources/js/Lib/online-academy/LivestreamWindow.vue","webpack:///./resources/js/Lib/online-academy/LivestreamWindow.vue?662c","webpack:///./resources/js/Lib/online-academy/LivestreamWindow.vue","webpack:///./resources/js/Lib/online-academy/LivestreamWindow.vue?e4c7"],"names":["component","_vm","this","_h","$createElement","_c","_self","class","field","staticStyle","attrs","_v","_s","data","title","on","$event","minmized","dialog","_e","staticClass","scopedSlots","_u","key","fn","ref","_g","_b","model","value","callback","$$v","expression","mainPlayerField","id","_l","player","index","chat_frame","chat_height","VBtn","VCol","VDialog","VIcon","VRow","VSheet","VSpacer","VSystemBar"],"mappings":"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","file":"live-window.bundle.js","sourcesContent":["<template>\n  <div :class=\"`vf-input ${field.class ? field.class:''}`\">\n    <v-system-bar color=\"primary\" dark style=\"position: fixed; left: 0; right: 0; bottom: 0; z-index: 2;\"\n          v-if=\"minmized\"\n    >\n          <span>{{ field.data.title }}</span>\n          <v-spacer></v-spacer>\n          <v-btn\n            icon\n            small\n            dense\n            @click=\"minmized = !minmized\"\n            >\n              <v-icon small>{{ minmized ? 'mdi-window-maximize':'mdi-window-minimize' }}</v-icon>\n        </v-btn>\n        <v-btn\n            icon\n            small\n            dense\n            :disabled=\"minmized\"\n            @click=\"dialog = false\"\n        >\n              <v-icon small>mdi-close</v-icon>\n        </v-btn>\n    </v-system-bar>\n    <v-dialog\n      v-if=\"!minmized\"\n      v-model=\"dialog\"\n      fullscreen hide-overlay\n      class=\"grey lighten-4\"\n      style=\"width: 100%; height: 100%;\"\n      transition=\"dialog-bottom-transition\"\n    >\n        <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn\n                outlined\n                primary\n                rouned\n                class=\"no-letter-spacing\"\n                @click=\"dialog = true\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n            >\n                <v-icon class=\"mx-2\">\n                    mdi-google-classroom\n                </v-icon> ورود به کلاس\n            </v-btn>\n        </template>\n      <v-system-bar color=\"primary\" dark>\n          <span>{{ field.data.title }}</span>\n          <v-spacer></v-spacer>\n          <v-btn\n            icon\n            small\n            dense\n            @click=\"minmized = !minmized\"\n            >\n              <v-icon small>{{ minmized ? 'mdi-window-maximize':'mdi-window-minimize' }}</v-icon>\n        </v-btn>\n        <v-btn\n            icon\n            small\n            dense\n            :disabled=\"minmized\"\n            @click=\"dialog = false\"\n        >\n              <v-icon small>mdi-close</v-icon>\n        </v-btn>\n      </v-system-bar>\n      <v-sheet\n          class=\"d-flex flex-column\"\n        >\n          <v-row\n            no-gutters\n          >\n            <vf-video-player-input\n              :field=\"mainPlayerField\"\n              :id=\"mainPlayerField.id\"\n            />\n          </v-row>\n          <v-row>\n            <v-col\n              cols=\"12\"\n              xsm=\"12\"\n              md=\"6\"\n            >\n              <v-col\n                v-for=\"(player, index) in extraPlayers\"\n                :key=\"`${id}-extra-player-${index}`\"\n                cols=\"12\"\n                sm=\"12\"\n                class=\"ma-0 pa-0\"\n              >\n                <vf-video-player-input\n                 :id=\"player.id\"\n                  :field=\"player\"\n                />\n              </v-col>\n            </v-col>\n            <v-col\n              cols=\"12\"\n              xsm=\"12\"\n              md=\"6\"\n            >\n              <iframe\n                :src=\"field.chat_frame\"\n                width=\"100%\"\n                :height=\"field.chat_height ? field.chat_height :'450'\"\n                allowtransparency=\"yes\"\n                allow=\"autoplay\"\n                frameborder=\"0\"\n                marginheight=\"0\"\n                marginwidth=\"0\"\n                scrolling=\"auto\"\n              />\n            </v-col>\n          </v-row>\n        </v-sheet>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n    name: 'VfLivestreamInput',\n    props: {\n        // field is the product model in db\n        // with its original role in formjson\n        field: Object,\n        value: Object,\n        id: String,\n    },\n    data: () => ({\n        dialog: false,\n        openTime: null,\n        boardContent: '',\n        minmized: false,\n    }),\n    computed: {\n        extraPlayers () {\n            const extras = [];\n            this.field.children?.forEach((child) => {\n                const f = {\n                    ...child,\n                    ...child.data?.types?.livestream ?? {},\n                }\n                extras.push({\n                    id: this.id + '-extras-' + child.id,\n                    url: f.is_remote ? f.key : '/livestream/live/' + f.key + '.m3u8',\n                    modePlain: true,\n                    autoPlay: true,\n                    modeFrame: !f.is_remote || f.key?.endsWith('.m3u8') ? false: true,\n                    class: 'col-12 pa-0 ma-0',\n                    height: '320px',\n                })\n            })\n            return extras;\n        },\n        mainPlayerField () {\n            const field = {\n                    id: this.id + '-main-' + this.field.id,\n                url: this.field.is_remote ? this.field.key : '/livestream/live/' + this.field.key + '.m3u8',\n                modePlain: true,\n                autoPlay: true,\n                modeFrame: !this.field.is_remote || this.field.key?.endsWith('.m3u8') ? false: true,\n                class: 'col-12 pa-0 ma-0',\n            };\n            return field;\n        }\n    },\n    watch: {\n        dialog () {\n            const host = this.$store.state.host;\n            if (this.dialog) {\n                this.$forceUpdate();\n                window.onbeforeunload = function() {\n                    return true;\n                };\n                this.openTime = Date.now();\n                host.axios({\n                    url: `/api/course-session/${this.field.id}/presence-form`,\n                    method: 'POST',\n                    headers: host.getWebAuthHeaders({}),\n                    data: {\n                        duration: 1,\n                    }\n                }).catch(err => {\n                    host.showSnack(err.message);\n                });\n            } else if (!this.minmized) {\n                window.onbeforeunload = null;\n                const dur = Math.abs(this.openTime - Date.now()) / 1000;\n                host.axios({\n                    url: `/api/course-session/${this.field.id}/presence-form`,\n                    method: 'POST',\n                    headers: host.getWebAuthHeaders({}),\n                    data: {\n                        duration: dur,\n                    }\n                }).then(response => {\n                    host.showSnack('حضور شما در کلاس ثبت شد', 'green')\n                }).catch(err => {\n                    host.showSnack(err.message);\n                });\n            }\n        },\n        minmized () {\n            if (this.minmized) {\n                window.onbeforeunload = function() {\n                    return true;\n                };\n            } else {\n                window.onbeforeunload = null;\n            }\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LivestreamWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LivestreamWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LivestreamWindow.vue?vue&type=template&id=81c53798&\"\nimport script from \"./LivestreamWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./LivestreamWindow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSystemBar } from 'vuetify/lib/components/VSystemBar';\ninstallComponents(component, {VBtn,VCol,VDialog,VIcon,VRow,VSheet,VSpacer,VSystemBar})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"vf-input \" + (_vm.field.class ? _vm.field.class:''))},[(_vm.minmized)?_c('v-system-bar',{staticStyle:{\"position\":\"fixed\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\",\"z-index\":\"2\"},attrs:{\"color\":\"primary\",\"dark\":\"\"}},[_c('span',[_vm._v(_vm._s(_vm.field.data.title))]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\",\"dense\":\"\"},on:{\"click\":function($event){_vm.minmized = !_vm.minmized}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(_vm._s(_vm.minmized ? 'mdi-window-maximize':'mdi-window-minimize'))])],1),_vm._v(\" \"),_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\",\"dense\":\"\",\"disabled\":_vm.minmized},on:{\"click\":function($event){_vm.dialog = false}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-close\")])],1)],1):_vm._e(),_vm._v(\" \"),(!_vm.minmized)?_c('v-dialog',{staticClass:\"grey lighten-4\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"fullscreen\":\"\",\"hide-overlay\":\"\",\"transition\":\"dialog-bottom-transition\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"no-letter-spacing\",attrs:{\"outlined\":\"\",\"primary\":\"\",\"rouned\":\"\"},on:{\"click\":function($event){_vm.dialog = true}}},'v-btn',attrs,false),on),[_c('v-icon',{staticClass:\"mx-2\"},[_vm._v(\"\\n                  mdi-google-classroom\\n              \")]),_vm._v(\" ورود به کلاس\\n          \")],1)]}}],null,false,2529429555),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_vm._v(\" \"),_c('v-system-bar',{attrs:{\"color\":\"primary\",\"dark\":\"\"}},[_c('span',[_vm._v(_vm._s(_vm.field.data.title))]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\",\"dense\":\"\"},on:{\"click\":function($event){_vm.minmized = !_vm.minmized}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(_vm._s(_vm.minmized ? 'mdi-window-maximize':'mdi-window-minimize'))])],1),_vm._v(\" \"),_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\",\"dense\":\"\",\"disabled\":_vm.minmized},on:{\"click\":function($event){_vm.dialog = false}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-close\")])],1)],1),_vm._v(\" \"),_c('v-sheet',{staticClass:\"d-flex flex-column\"},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('vf-video-player-input',{attrs:{\"field\":_vm.mainPlayerField,\"id\":_vm.mainPlayerField.id}})],1),_vm._v(\" \"),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"xsm\":\"12\",\"md\":\"6\"}},_vm._l((_vm.extraPlayers),function(player,index){return _c('v-col',{key:(_vm.id + \"-extra-player-\" + index),staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"12\"}},[_c('vf-video-player-input',{attrs:{\"id\":player.id,\"field\":player}})],1)}),1),_vm._v(\" \"),_c('v-col',{attrs:{\"cols\":\"12\",\"xsm\":\"12\",\"md\":\"6\"}},[_c('iframe',{attrs:{\"src\":_vm.field.chat_frame,\"width\":\"100%\",\"height\":_vm.field.chat_height ? _vm.field.chat_height :'450',\"allowtransparency\":\"yes\",\"allow\":\"autoplay\",\"frameborder\":\"0\",\"marginheight\":\"0\",\"marginwidth\":\"0\",\"scrolling\":\"auto\"}})])],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}