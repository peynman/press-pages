{"version":3,"sources":["webpack:///resources/js/Lib/online-academy/LivestreamWindow.vue","webpack:///./resources/js/Lib/online-academy/LivestreamWindow.vue?662c","webpack:///./resources/js/Lib/online-academy/LivestreamWindow.vue","webpack:///./resources/js/Lib/online-academy/LivestreamWindow.vue?509f"],"names":["component","_vm","this","_h","$createElement","_c","_self","class","field","staticClass","attrs","on","$event","dialog","_v","staticStyle","model","value","callback","$$v","expression","_s","data","title","mainPlayerField","id","_l","player","index","key","chat_frame","chat_height","_e","VBtn","VCol","VDialog","VIcon","VLazy","VRow","VSheet","VSpacer","VToolbar"],"mappings":"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","file":"live-window1.bundle.js","sourcesContent":["<template>\n  <div :class=\"`vf-input ${field.class ? field.class:''}`\">\n    <v-btn\n      outlined\n      primary\n      rouned\n      class=\"no-letter-spacing\"\n      @click=\"dialog = true\"\n    >\n      <v-icon class=\"mx-2\">\n        mdi-google-classroom\n      </v-icon> ورود به کلاس\n    </v-btn>\n    <v-dialog\n      v-model=\"dialog\"\n      fullscreen\n      class=\"grey lighten-4\"\n      style=\"width: 100%; height: 100%;\"\n    >\n      <v-toolbar\n        dense\n        small\n        dark\n        color=\"primary\"\n      >\n        {{ field.data.title }}\n        <v-spacer />\n        <v-btn\n          icon\n          small\n          dense\n          @click=\"dialog = false\"\n        >\n          <v-icon small>\n            mdi-close\n          </v-icon>\n        </v-btn>\n      </v-toolbar>\n      <v-lazy\n        v-if=\"dialog\"\n        class=\"pa-2 grey lighten-4\"\n      >\n        <v-sheet\n          class=\"d-flex flex-column\"\n        >\n          <v-row\n            no-gutters\n          >\n            <vf-video-player-input\n              :field=\"mainPlayerField\"\n              :id=\"mainPlayerField.id\"\n            />\n          </v-row>\n          <v-row>\n            <v-col\n              cols=\"12\"\n              xsm=\"12\"\n              md=\"6\"\n            >\n              <v-col\n                v-for=\"(player, index) in extraPlayers\"\n                :key=\"`${id}-extra-player-${index}`\"\n                cols=\"12\"\n                sm=\"12\"\n                class=\"ma-0 pa-0\"\n              >\n                <vf-video-player-input\n                 :id=\"player.id\"\n                  :field=\"player\"\n                />\n              </v-col>\n            </v-col>\n            <v-col\n              cols=\"12\"\n              xsm=\"12\"\n              md=\"6\"\n            >\n              <iframe\n                :src=\"field.chat_frame\"\n                width=\"100%\"\n                :height=\"field.chat_height ? field.chat_height :'450'\"\n                allowtransparency=\"yes\"\n                allow=\"autoplay\"\n                frameborder=\"0\"\n                marginheight=\"0\"\n                marginwidth=\"0\"\n                scrolling=\"auto\"\n              />\n            </v-col>\n          </v-row>\n        </v-sheet>\n      </v-lazy>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n    name: 'VfLivestreamInput',\n    props: {\n        // field is the product model in db\n        // with its original role in formjson\n        field: Object,\n        value: Object,\n        id: String,\n    },\n    data: () => ({\n        dialog: false,\n        openTime: null,\n        boardContent: '',\n    }),\n    computed: {\n        extraPlayers () {\n            const extras = [];\n            this.field.children?.forEach((child) => {\n                const f = {\n                    ...child,\n                    ...child.data?.types?.livestream ?? {},\n                }\n                extras.push({\n                    id: this.id + '-extras-' + child.id,\n                    url: f.is_remote ? f.key : '/livestream/live/' + f.key + '.m3u8',\n                    modePlain: true,\n                    autoPlay: true,\n                    modeFrame: !f.is_remote || f.key?.endsWith('.m3u8') ? false: true,\n                    class: 'col-12 pa-0 ma-0',\n                    height: '320px',\n                })\n            })\n            return extras;\n        },\n        mainPlayerField () {\n            const field = {\n                    id: this.id + '-main-' + this.field.id,\n                url: this.field.is_remote ? this.field.key : '/livestream/live/' + this.field.key + '.m3u8',\n                modePlain: true,\n                autoPlay: true,\n                modeFrame: !this.field.is_remote || this.field.key?.endsWith('.m3u8') ? false: true,\n                class: 'col-12 pa-0 ma-0',\n            };\n            return field;\n        }\n    },\n    watch: {\n        dialog () {\n            const host = this.$store.state.host;\n            if (this.dialog) {\n                this.openTime = Date.now();\n                host.axios({\n                    url: `/api/course-session/${this.field.id}/presence-form`,\n                    method: 'POST',\n                    headers: host.getWebAuthHeaders({}),\n                    data: {\n                        duration: 1,\n                    }\n                }).catch(err => {\n                    host.showSnack(err.message);\n                });\n            } else {\n                const dur = Math.abs(this.openTime - Date.now()) / 1000;\n                host.axios({\n                    url: `/api/course-session/${this.field.id}/presence-form`,\n                    method: 'POST',\n                    headers: host.getWebAuthHeaders({}),\n                    data: {\n                        duration: dur,\n                    }\n                }).then(response => {\n                    host.showSnack('حضور شما در کلاس ثبت شد', 'green')\n                }).catch(err => {\n                    host.showSnack(err.message);\n                });\n            }\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LivestreamWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LivestreamWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LivestreamWindow.vue?vue&type=template&id=594821dc&\"\nimport script from \"./LivestreamWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./LivestreamWindow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLazy } from 'vuetify/lib/components/VLazy';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCol,VDialog,VIcon,VLazy,VRow,VSheet,VSpacer,VToolbar})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"vf-input \" + (_vm.field.class ? _vm.field.class:''))},[_c('v-btn',{staticClass:\"no-letter-spacing\",attrs:{\"outlined\":\"\",\"primary\":\"\",\"rouned\":\"\"},on:{\"click\":function($event){_vm.dialog = true}}},[_c('v-icon',{staticClass:\"mx-2\"},[_vm._v(\"\\n      mdi-google-classroom\\n    \")]),_vm._v(\" ورود به کلاس\\n  \")],1),_vm._v(\" \"),_c('v-dialog',{staticClass:\"grey lighten-4\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"fullscreen\":\"\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"small\":\"\",\"dark\":\"\",\"color\":\"primary\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.field.data.title)+\"\\n      \"),_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\",\"dense\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"\\n          mdi-close\\n        \")])],1)],1),_vm._v(\" \"),(_vm.dialog)?_c('v-lazy',{staticClass:\"pa-2 grey lighten-4\"},[_c('v-sheet',{staticClass:\"d-flex flex-column\"},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('vf-video-player-input',{attrs:{\"field\":_vm.mainPlayerField,\"id\":_vm.mainPlayerField.id}})],1),_vm._v(\" \"),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"xsm\":\"12\",\"md\":\"6\"}},_vm._l((_vm.extraPlayers),function(player,index){return _c('v-col',{key:(_vm.id + \"-extra-player-\" + index),staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"12\"}},[_c('vf-video-player-input',{attrs:{\"id\":player.id,\"field\":player}})],1)}),1),_vm._v(\" \"),_c('v-col',{attrs:{\"cols\":\"12\",\"xsm\":\"12\",\"md\":\"6\"}},[_c('iframe',{attrs:{\"src\":_vm.field.chat_frame,\"width\":\"100%\",\"height\":_vm.field.chat_height ? _vm.field.chat_height :'450',\"allowtransparency\":\"yes\",\"allow\":\"autoplay\",\"frameborder\":\"0\",\"marginheight\":\"0\",\"marginwidth\":\"0\",\"scrolling\":\"auto\"}})])],1)],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}