(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{gyyD:function(e,t,a){"use strict";a.r(t);var r=a("FpqX"),n=a("gzZi"),o=a("Ey0z"),i=a("sK+t"),s=a("mdmw"),l=a("pSOK"),d=a("I1Ao"),c=a("xlum"),f=a("zT9C"),u=a.n(f);function m(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b={mixins:[d.b,c.a],components:{VDialog:r.a,VBtn:n.a,VIcon:o.a,VCard:i.a,VCardText:s.b,VContainer:l.a},name:"object-links-card",props:{id:String,field:Object},data:function(e){return{selected:-1}},methods:{getFormFromURL:function(e){var t=this;if(e.url){var a=function e(){for(var t=function(e){return e&&"object"===v(e)},a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return r.reduce((function(a,r){return Object.keys(r).forEach((function(n){var o=a[n],i=r[n];Array.isArray(o)&&Array.isArray(i)?a[n]=o.concat.apply(o,m(i)):t(o)&&t(i)?a[n]=e(o,i):a[n]=i})),a}),{})};console.log(e);var r=function(r){t.UpdatePageContent(r.body,r.options,r.sources),t.$store.state.datatable_pages||(t.$store.state.datatable_pages={}),t.$store.state.datatable_pages[e.url]=u()(r),t.formSchema.fields["crud-datatable"]&&(t.formSchema.fields["crud-datatable"]["hide-search"]=!0,t.formSchema.fields["crud-datatable"]["hide-create"]=!0,t.formSchema.fields["crud-datatable"]["hide-settings"]=!0,t.formSchema.fields["crud-datatable"]["hide-reports"]=!0,t.formSchema.fields["crud-datatable"]["hide-removable-filters"]=!0,t.formSchema.fields["crud-datatable"]["default-filters"]=e.filters),t.$nextTick((function(){var r,n,o,i;e.loading=!1,e.fields=a(t.formSchema.fields,null!==(r=null===(n=e.schema)||void 0===n?void 0:n.fields)&&void 0!==r?r:{}),e.options=a(t.formSchema.options,null!==(o=null===(i=e.schema)||void 0===i?void 0:i.options)&&void 0!==o?o:{}),e.loaded=!0,t.formModel=e.devalue,t.$forceUpdate()}))};if(this.$store.state.datatable_pages&&this.$store.state.datatable_pages[e.url])r(u()(this.$store.state.datatable_pages[e.url]));else{e.loading=!0;var n=this.$store.state.host;n.webRequest({method:"GET",url:e.url,headers:n.getWebAuthHeaders({Accept:"application/json","Content-Type":"application/json"})}).then((function(e){r(u()(e.data))})).catch((function(t){n.showSnack(t.message),e.loading=!1}))}}}},watch:{selected:function(){if(this.selected){var e=-1,t=null,a=0;for(var r in this.field.links){var n=this.field.links[r];n&&n.id&&this.selected.endsWith(n.id)&&(e=a,t=n.id),a++}e>=0&&this.getFormFromURL(this.field.links[t])}}}},h=a("KHd+"),y=a("ZUTo"),g=a.n(y),_=a("jjY0"),k=a("r9mn"),w=a("caNO"),S=a("xnG4"),x=a("/ldL"),C=a("mpaI"),j=Object(h.a)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-1",attrs:{flat:"","background-color":"grey lighten-2"}},[e.field.label?a("v-system-bar",{attrs:{dark:"",color:"primary"}},[e._v(e._s(e.field.label))]):e._e(),e._v(" "),0==Object.keys(e.field.links).length?a("span",{staticClass:"caption"},[e._v("امکانات بیشتری برای این رکورد موجود نیست")]):e._e(),e._v(" "),Object.keys(e.field.links).length>0?a("v-tabs",{attrs:{optional:"",dense:"","icons-and-text":"",centered:"","background-color":"grey lighten-2"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("v-tabs-slider"),e._v(" "),a("v-tab",[e._t("prepend")],2),e._v(" "),e._l(e.field.links,(function(t){return a("v-tab",{key:e.id+"-link-"+t.id,staticClass:"no-letter-spacing",attrs:{href:"#"+e.id+"-link-"+t.id}},[a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"d-flex flex-column"},[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:t.icon,expression:"link.icon"}]},[e._v(e._s(t.icon))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"link.title"}],staticClass:"caption"},[e._v(e._s(t.title))])],1),e._v(" "),t.extraComponent?a(t.extraComponent.component,e._b({tag:"component",class:t.extraComponent.class},"component",t.extraComponent.props,!1)):e._e()],1)])})),e._v(" "),a("v-tab",{attrs:{disabled:""}},[e._t("append")],2),e._v(" "),e._l(e.field.links,(function(t){return a("v-tab-item",{key:e.id+"-link-content-"+t.id,attrs:{id:e.id+"-link-"+t.id}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"ma-1 pa-0",attrs:{"background-color":"white"}},[a("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"link.loading"}],attrs:{color:"primary",indeterminate:""}}),e._v(" "),a("vf-fields-renderer",{attrs:{id:e.id+"-links-"+t.id,fields:t.fields,options:t.options,value:t.devalue},model:{value:t.devalue,callback:function(a){e.$set(t,"devalue",a)},expression:"link.devalue"}})],1)],1)],1)}))],2):e._e()],1)}),[],!1,null,null,null);t.default=j.exports;g()(j,{VCard:i.a,VCardText:s.b,VIcon:o.a,VProgressLinear:_.a,VSystemBar:k.a,VTab:w.a,VTabItem:S.a,VTabs:x.a,VTabsSlider:C.a})}}]);
//# sourceMappingURL=extra-object-link.bundle.js.map