(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{1006:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this;var t=e.$createElement;var a=e._self._c||t;return a("div",{class:"vf-input "+(e.field.class?e.field.class:"")},[a("v-btn",{staticClass:"no-letter-spacing",attrs:{outlined:"",primary:"",rouned:""},on:{click:function(t){e.dialog=true}}},[a("v-icon",{staticClass:"mx-2"},[e._v("\n      mdi-google-classroom\n    ")]),e._v(" ورود به کلاس\n  ")],1),e._v(" "),a("v-dialog",{staticClass:"grey lighten-4",staticStyle:{width:"100%",height:"100%"},attrs:{fullscreen:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-toolbar",{attrs:{dense:"",small:"",dark:"",color:"primary"}},[e._v("\n      "+e._s(e.field.data.title)+"\n      "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",small:"",dense:""},on:{click:function(t){e.dialog=false}}},[a("v-icon",{attrs:{small:""}},[e._v("\n          mdi-close\n        ")])],1)],1),e._v(" "),e.dialog?a("v-lazy",{staticClass:"pa-2 grey lighten-4"},[a("v-sheet",{staticClass:"d-flex flex-column"},[a("v-row",{attrs:{"no-gutters":""}},[a("vf-video-player-input",{attrs:{field:e.mainPlayerField,id:e.mainPlayerField.id}})],1),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",xsm:"12",md:"6"}},e._l(e.extraPlayers,(function(t,r){return a("v-col",{key:e.id+"-extra-player-"+r,staticClass:"ma-0 pa-0",attrs:{cols:"12",sm:"12"}},[a("vf-video-player-input",{attrs:{id:t.id,field:t}})],1)})),1),e._v(" "),a("v-col",{attrs:{cols:"12",xsm:"12",md:"6"}},[a("iframe",{attrs:{src:e.field.chat_frame,width:"100%",height:e.field.chat_height?e.field.chat_height:"450",allowtransparency:"yes",allow:"autoplay",frameborder:"0",marginheight:"0",marginwidth:"0",scrolling:"auto"}})])],1)],1)],1):e._e()],1)],1)};var i=[];function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(t)r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};if(t%2){l(Object(a),true).forEach((function(t){o(e,t,a[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(a))}else{l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}}return e}function o(e,t,a){if(t in e){Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true})}else{e[t]=a}return e}var n={name:"VfLivestreamInput",props:{field:Object,value:Object,id:String},data:function e(){return{dialog:false,openTime:null,boardContent:""}},computed:{extraPlayers:function e(){var t,a=this;var r=[];(t=this.field.children)===null||t===void 0?void 0:t.forEach((function(e){var t,i,l,o;var n=s(s({},e),(t=(i=e.data)===null||i===void 0?void 0:(l=i.types)===null||l===void 0?void 0:l.livestream)!==null&&t!==void 0?t:{});r.push({id:a.id+"-extras-"+e.id,url:n.is_remote?n.key:"/livestream/live/"+n.key+".m3u8",modePlain:true,autoPlay:true,modeFrame:!n.is_remote||((o=n.key)===null||o===void 0?void 0:o.endsWith(".m3u8"))?false:true,class:"col-12 pa-0 ma-0",height:"320px"})}));return r},mainPlayerField:function e(){var t;var a={id:this.id+"-main-"+this.field.id,url:this.field.is_remote?this.field.key:"/livestream/live/"+this.field.key+".m3u8",modePlain:true,autoPlay:true,modeFrame:!this.field.is_remote||((t=this.field.key)===null||t===void 0?void 0:t.endsWith(".m3u8"))?false:true,class:"col-12 pa-0 ma-0"};return a}},watch:{dialog:function e(){var t=this.$store.state.host;if(this.dialog){this.openTime=Date.now();t.axios({url:"/api/course-session/".concat(this.field.id,"/presence-form"),method:"POST",headers:t.getWebAuthHeaders({}),data:{duration:1}})["catch"]((function(e){t.showSnack(e.message)}))}else{var a=Math.abs(this.openTime-Date.now())/1e3;t.axios({url:"/api/course-session/".concat(this.field.id,"/presence-form"),method:"POST",headers:t.getWebAuthHeaders({}),data:{duration:a}}).then((function(e){t.showSnack("حضور شما در کلاس ثبت شد","green")}))["catch"]((function(e){t.showSnack(e.message)}))}}}};var c=n;var d=a(27);var u=a(28);var v=a.n(u);var f=a(69);var h=a(411);var m=a(431);var p=a(61);var g=a(423);var y=a(413);var b=a(20);var w=a(410);var O=a(26);var _=Object(d["a"])(c,r,i,false,null,null,null);var P=t["default"]=_.exports;v()(_,{VBtn:f["a"],VCol:h["a"],VDialog:m["a"],VIcon:p["a"],VLazy:g["a"],VRow:y["a"],VSheet:b["a"],VSpacer:w["a"],VToolbar:O["a"]})}}]);