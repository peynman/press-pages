(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{c8kn:function(e,t,i){"use strict";i.r(t);function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n={name:"VfLivestreamInput",props:{field:Object,value:Object,id:String},data:function(){return{dialog:!1,openTime:null,boardContent:""}},computed:{extraPlayers:function(){var e,t=this,i=[];return null===(e=this.field.children)||void 0===e||e.forEach((function(e){var a,l,n,o,s=r(r({},e),null!==(a=null===(l=e.data)||void 0===l||null===(n=l.types)||void 0===n?void 0:n.livestream)&&void 0!==a?a:{});i.push({id:t.id+"-extras-"+e.id,url:s.is_remote?s.key:"/livestream/live/"+s.key+".m3u8",modePlain:!0,autoPlay:!0,modeFrame:!(!s.is_remote||(null===(o=s.key)||void 0===o?void 0:o.endsWith(".m3u8"))),class:"col-12 pa-0 ma-0",height:"320px"})})),i},mainPlayerField:function(){var e;return{id:this.id+"-main-"+this.field.id,url:this.field.is_remote?this.field.key:"/livestream/live/"+this.field.key+".m3u8",modePlain:!0,autoPlay:!0,modeFrame:!(!this.field.is_remote||(null===(e=this.field.key)||void 0===e?void 0:e.endsWith(".m3u8"))),class:"col-12 pa-0 ma-0"}}},watch:{dialog:function(){var e=this.$store.state.host;if(this.dialog)this.openTime=Date.now(),e.axios({url:"/api/course-session/".concat(this.field.id,"/presence-form"),method:"POST",headers:e.getWebAuthHeaders({}),data:{duration:1}}).catch((function(t){e.showSnack(t.message)}));else{var t=Math.abs(this.openTime-Date.now())/1e3;e.axios({url:"/api/course-session/".concat(this.field.id,"/presence-form"),method:"POST",headers:e.getWebAuthHeaders({}),data:{duration:t}}).then((function(t){e.showSnack("حضور شما در کلاس ثبت شد","green")})).catch((function(t){e.showSnack(t.message)}))}}}},o=i("KHd+"),s=i("ZUTo"),c=i.n(s),d=i("gzZi"),u=i("Yq0q"),m=i("FpqX"),f=i("Ey0z"),h=i("todF"),v=i("D9m0"),p=i("jdmY"),g=i("L6Q5"),y=i("cdmR"),b=Object(o.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"vf-input "+(e.field.class?e.field.class:"")},[i("v-btn",{staticClass:"no-letter-spacing",attrs:{outlined:"",primary:"",rouned:""},on:{click:function(t){e.dialog=!0}}},[i("v-icon",{staticClass:"mx-2"},[e._v("\n      mdi-google-classroom\n    ")]),e._v(" ورود به کلاس\n  ")],1),e._v(" "),i("v-dialog",{staticClass:"grey lighten-4",staticStyle:{width:"100%",height:"100%"},attrs:{fullscreen:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-toolbar",{attrs:{dense:"",small:"",dark:"",color:"primary"}},[e._v("\n      "+e._s(e.field.data.title)+"\n      "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",small:"",dense:""},on:{click:function(t){e.dialog=!1}}},[i("v-icon",{attrs:{small:""}},[e._v("\n          mdi-close\n        ")])],1)],1),e._v(" "),e.dialog?i("v-lazy",{staticClass:"pa-2 grey lighten-4"},[i("v-sheet",{staticClass:"d-flex flex-column"},[i("v-row",{attrs:{"no-gutters":""}},[i("vf-video-player-input",{attrs:{field:e.mainPlayerField,id:e.mainPlayerField.id}})],1),e._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12",xsm:"12",md:"6"}},e._l(e.extraPlayers,(function(t,a){return i("v-col",{key:e.id+"-extra-player-"+a,staticClass:"ma-0 pa-0",attrs:{cols:"12",sm:"12"}},[i("vf-video-player-input",{attrs:{id:t.id,field:t}})],1)})),1),e._v(" "),i("v-col",{attrs:{cols:"12",xsm:"12",md:"6"}},[i("iframe",{attrs:{src:e.field.chat_frame,width:"100%",height:e.field.chat_height?e.field.chat_height:"450",allowtransparency:"yes",allow:"autoplay",frameborder:"0",marginheight:"0",marginwidth:"0",scrolling:"auto"}})])],1)],1)],1):e._e()],1)],1)}),[],!1,null,null,null);t.default=b.exports;c()(b,{VBtn:d.a,VCol:u.a,VDialog:m.a,VIcon:f.a,VLazy:h.a,VRow:v.a,VSheet:p.a,VSpacer:g.a,VToolbar:y.a})}}]);
//# sourceMappingURL=live-window1.bundle.js.map