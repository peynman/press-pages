(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1160:function(e,t,a){"use strict";a.r(t);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n={name:"VfLivestreamInput",props:{field:Object,value:Object,id:String},data:function(){return{dialog:!1,openTime:null,boardContent:""}},computed:{extraPlayers:function(){var e,t=this,a=[];return null===(e=this.field.children)||void 0===e||e.forEach((function(e){var i,l,n,o,s=r(r({},e),null!==(i=null===(l=e.data)||void 0===l||null===(n=l.types)||void 0===n?void 0:n.livestream)&&void 0!==i?i:{});a.push({id:t.id+"-extras-"+e.id,url:s.is_remote?s.key:"/livestream/live/"+s.key+".m3u8",modePlain:!0,autoPlay:!0,modeFrame:!(!s.is_remote||(null===(o=s.key)||void 0===o?void 0:o.endsWith(".m3u8"))),class:"col-12 pa-0 ma-0",height:"320px"})})),a},mainPlayerField:function(){var e;return{id:this.id+"-main-"+this.field.id,url:this.field.is_remote?this.field.key:"/livestream/live/"+this.field.key+".m3u8",modePlain:!0,autoPlay:!0,modeFrame:!(!this.field.is_remote||(null===(e=this.field.key)||void 0===e?void 0:e.endsWith(".m3u8"))),class:"col-12 pa-0 ma-0"}}},watch:{dialog:function(){var e=this.$store.state.host;if(this.dialog)this.openTime=Date.now(),e.axios({url:"/api/course-session/".concat(this.field.id,"/presence-form"),method:"POST",headers:e.getWebAuthHeaders({}),data:{duration:1}}).catch((function(t){e.showSnack(t.message)}));else{var t=Math.abs(this.openTime-Date.now())/1e3;e.axios({url:"/api/course-session/".concat(this.field.id,"/presence-form"),method:"POST",headers:e.getWebAuthHeaders({}),data:{duration:t}}).then((function(t){e.showSnack("حضور شما در کلاس ثبت شد","green")})).catch((function(t){e.showSnack(t.message)}))}}}},o=a(26),s=a(27),c=a.n(s),d=a(68),u=a(403),f=a(423),h=a(59),m=a(415),v=a(405),p=a(20),g=a(402),y=a(25),b=Object(o.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"vf-input "+(e.field.class?e.field.class:"")},[a("v-btn",{staticClass:"no-letter-spacing",attrs:{outlined:"",primary:"",rouned:""},on:{click:function(t){e.dialog=!0}}},[a("v-icon",{staticClass:"mx-2"},[e._v("\n      mdi-google-classroom\n    ")]),e._v(" ورود به کلاس\n  ")],1),e._v(" "),a("v-dialog",{staticClass:"grey lighten-4",staticStyle:{width:"100%",height:"100%"},attrs:{fullscreen:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-toolbar",{attrs:{dense:"",small:"",dark:"",color:"primary"}},[e._v("\n      "+e._s(e.field.data.title)+"\n      "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",small:"",dense:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{small:""}},[e._v("\n          mdi-close\n        ")])],1)],1),e._v(" "),e.dialog?a("v-lazy",{staticClass:"pa-2 grey lighten-4"},[a("v-sheet",{staticClass:"d-flex flex-column"},[a("v-row",{attrs:{"no-gutters":""}},[a("vf-video-player-input",{attrs:{field:e.mainPlayerField,id:e.mainPlayerField.id}})],1),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",xsm:"12",md:"6"}},e._l(e.extraPlayers,(function(t,i){return a("v-col",{key:e.id+"-extra-player-"+i,staticClass:"ma-0 pa-0",attrs:{cols:"12",sm:"12"}},[a("vf-video-player-input",{attrs:{id:t.id,field:t}})],1)})),1),e._v(" "),a("v-col",{attrs:{cols:"12",xsm:"12",md:"6"}},[a("iframe",{attrs:{src:e.field.chat_frame,width:"100%",height:e.field.chat_height?e.field.chat_height:"450",allowtransparency:"yes",allow:"autoplay",frameborder:"0",marginheight:"0",marginwidth:"0",scrolling:"auto"}})])],1)],1)],1):e._e()],1)],1)}),[],!1,null,null,null);t.default=b.exports;c()(b,{VBtn:d.a,VCol:u.a,VDialog:f.a,VIcon:h.a,VLazy:m.a,VRow:v.a,VSheet:p.a,VSpacer:g.a,VToolbar:y.a})}}]);