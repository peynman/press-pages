{"version":3,"sources":["webpack:///./resources/js/Lib/vuetify-formjson/Fields/MarkdownInput/MarkdownInput.vue?3170","webpack:///./resources/js/Lib/vuetify-formjson/Fields/MarkdownInput/MarkdownInput.vue?cf87","webpack:///resources/js/Lib/vuetify-formjson/Fields/MarkdownInput/MarkdownInput.vue","webpack:///./resources/js/Lib/vuetify-formjson/Fields/MarkdownInput/MarkdownInput.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","class","field","staticStyle","directives","name","rawName","value","renderOnly","expression","staticClass","attrs","_v","_s","label","on","dialog","toggleVirtualMathKeyboard","mode","modeIcon","ref","style","mathKeyboardVisible","insertMathToMarkdown","height","VBtn","VCard","VCardText","VCardTitle","VIcon","VSpacer","VToolbar","VToolbarTitle"],"mappings":"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","file":"markdown.bundle.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"vf-input d-flex flex-column flex-grow-1 \" + (_vm.field.class ? _vm.field.class : '')),staticStyle:{\"min-height\":\"248px\"}},[_c('v-toolbar',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.field.renderOnly),expression:\"!field.renderOnly\"}],staticClass:\"flex-grow-0\",attrs:{\"flat\":\"\",\"dense\":\"\"}},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.field.label))]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function () { _vm.dialog = !_vm.dialog; _vm.toggleVirtualMathKeyboard(_vm.dialog) }}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(_vm._s(!_vm.dialog || _vm.mode !== 'editor' ? 'mdi-function-variant':'mdi-close'))])],1),_vm._v(\" \"),_c('v-btn',{attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function () { _vm.mode = _vm.mode === 'editor' ? 'view' : 'editor'; _vm.toggleVirtualMathKeyboard(_vm.dialog && _vm.mode === 'editor') }}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(_vm._s(_vm.modeIcon))])],1)],1),_vm._v(\" \"),_c('v-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialog && _vm.mode === 'editor'),expression:\"dialog && mode === 'editor'\"}],staticClass:\"mx-5 mb-5 px-3\"},[_c('v-card-title',{attrs:{\"dense\":\"\"}},[_vm._v(\"Create a math formula\")]),_vm._v(\" \"),_c('v-card-text',{staticStyle:{\"position\":\"relative\"}},[_c('div',{ref:\"editorMath\",style:(\"width: 100%; border: 2px solid gray; border-radius: 6px; padding: 5px\")},[_vm._v(\"\\n                f(x)=\\n            \")]),_vm._v(\" \"),_c('v-btn',{staticStyle:{\"position\":\"absolute\",\"right\":\"60px\",\"top\":\"12px\"},attrs:{\"color\":_vm.mathKeyboardVisible ? 'warning' : 'primary',\"icon\":\"\",\"outlined\":\"\",\"small\":\"\",\"dense\":\"\"},on:{\"click\":_vm.toggleVirtualMathKeyboard}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(_vm._s(_vm.mathKeyboardVisible ? 'mdi-close' : 'mdi-keyboard'))])],1),_vm._v(\" \"),_c('v-btn',{staticStyle:{\"position\":\"absolute\",\"right\":\"30px\",\"top\":\"12px\"},attrs:{\"color\":\"success\",\"outlined\":\"\",\"icon\":\"\",\"small\":\"\",\"dense\":\"\"},on:{\"click\":_vm.insertMathToMarkdown}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-arrow-down\")])],1)],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode === 'view'),expression:\"mode === 'view'\"}],ref:\"editorView\",staticClass:\"fill-height\"}),_vm._v(\" \"),_c('v-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode === 'editor'),expression:\"mode === 'editor'\"}],staticClass:\"fill-hight mx-2\",staticStyle:{\"position\":\"relative\"}},[_c('div',{ref:\"editorCode\",style:((\"position: absolute; width: 100%; min-height: 200px; left: 5px;\" + (_vm.field.height ? 'height: ' + _vm.field.height : '')))})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MarkdownInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MarkdownInput.vue?vue&type=script&lang=js&\"","<template>\n<div style=\"min-height: 248px;\" :class=\"`vf-input d-flex flex-column flex-grow-1 ${field.class ? field.class : ''}`\">\n    <v-toolbar class=\"flex-grow-0\" v-show=\"!field.renderOnly\" flat dense>\n        <v-toolbar-title>{{ field.label }}</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-btn small icon @click=\"() => { dialog = !dialog; toggleVirtualMathKeyboard(dialog) }\">\n            <v-icon small>{{ !dialog || mode !== 'editor' ? 'mdi-function-variant':'mdi-close' }}</v-icon>\n        </v-btn>\n        <v-btn small icon @click=\"() => { mode = mode === 'editor' ? 'view' : 'editor'; toggleVirtualMathKeyboard(dialog && mode === 'editor') }\">\n            <v-icon small>{{ modeIcon }}</v-icon>\n        </v-btn>\n    </v-toolbar>\n    <v-card class=\"mx-5 mb-5 px-3\" v-show=\"dialog && mode === 'editor'\">\n        <v-card-title dense>Create a math formula</v-card-title>\n        <v-card-text style=\"position: relative;\">\n            <div :style=\"`width: 100%; border: 2px solid gray; border-radius: 6px; padding: 5px`\" ref=\"editorMath\">\n                f(x)=\n            </div>\n            <v-btn style=\"position: absolute; right: 60px; top: 12px;\" :color=\"mathKeyboardVisible ? 'warning' : 'primary'\" icon outlined small dense @click=\"toggleVirtualMathKeyboard\">\n                <v-icon small>{{ mathKeyboardVisible ? 'mdi-close' : 'mdi-keyboard' }}</v-icon>\n            </v-btn>\n            <v-btn style=\"position: absolute; right: 30px; top: 12px;\" color=\"success\" outlined icon small dense @click=\"insertMathToMarkdown\">\n                <v-icon small>mdi-arrow-down</v-icon>\n            </v-btn>\n        </v-card-text>\n    </v-card>\n    <div v-show=\"mode === 'view'\" ref=\"editorView\" class=\"fill-height\"></div>\n    <v-card v-show=\"mode === 'editor'\" style=\"position: relative;\" class=\"fill-hight mx-2\">\n        <div class=\"\" :style=\"`position: absolute; width: 100%; min-height: 200px; left: 5px;${field.height ? 'height: ' + field.height : ''}`\" ref=\"editorCode\">\n        </div>\n    </v-card>\n</div>\n</template>\n\n<script>\n// import MathLive from 'dist/mathlive.mjs'\nimport BaseComponent from './../mixins'\nimport ACE from './AceEditor/ace'\nimport './AceEditor/mode-markdown'\nimport './AceEditor/theme-eclipse'\n\nimport markdownit from 'markdown-it'\n// import MarkdownItColor from './MarkdownItColor/index'\n// import MermaidPlugin from './mermaid'\n// import MathLivePlugin from './mathlive'\n// import FromJSONPlugin from './formjson'\nimport {\n    VCard,\n    VCardTitle,\n    VBtn,\n    VIcon,\n    VCardText,\n    VSpacer,\n    VToolbar,\n    VToolbarTitle\n} from 'vuetify/lib'\nexport default {\n    components: {\n        VCard,\n        VCardTitle,\n        VBtn,\n        VIcon,\n        VCardText,\n        VSpacer,\n        VToolbar,\n        VToolbarTitle\n    },\n    mixins: [BaseComponent],\n    name: 'vf-markdown-input',\n    props: {\n        id: String,\n        field: Object,\n        value: {\n            type: String,\n            default: () => ''\n        }\n    },\n    data: (vm) => ({\n        dialog: false,\n        markdownEditor: null,\n        mathfieldEditor: null,\n        mathKeyboardVisible: false,\n        aceEditor: null,\n        aceUpdate: false, // break devalue update <=> ace text update loop\n        mode: vm.field.renderOnly ? 'view' : 'editor'\n    }),\n    computed: {\n        modeIcon() {\n            return this.mode === 'editor' ? 'mdi-code-braces' : 'mdi-eye'\n        }\n    },\n    methods: {\n        toggleVirtualMathKeyboard(to) {\n            if (this.mathfieldEditor) {\n                if (this.mathfieldEditor.virtualKeyboardVisible !== to) {\n                    this.mathfieldEditor.$perform(['toggleVirtualKeyboard'])\n                }\n                this.mathKeyboardVisible = this.mathfieldEditor.virtualKeyboardVisible\n            }\n        },\n        updateMarkdownText() {\n            const markdownHtml = this.markdownEditor.render(this.devalue)\n            let child = this.$refs.editorView.lastElementChild\n            while (child) {\n                this.$refs.editorView.removeChild(child)\n                child = this.$refs.editorView.lastElementChild\n            }\n            this.$refs.editorView.insertAdjacentHTML('beforeend', markdownHtml)\n\n            if (!this.aceUpdate) {\n                this.aceEditor.session.setValue(this.devalue)\n            } else {\n                this.aceUpdate = false\n            }\n        }\n    },\n    watch: {\n        devalue: {\n            deep: true,\n            handler() {\n                this.updateMarkdownText()\n                this.$emit('input', this.devalue)\n            }\n        }\n        // dialog () {\n        //     if (this.dialog && !this.mathfieldEditor) {\n        //         if (this.$refs.editorMath) {\n        //             this.mathfieldEditor = MathLive.makeMathField(this.$refs.editorMath, {\n        //             })\n        //         }\n        //     }\n        // }\n    },\n    mounted() {\n        this.aceEditor = ACE.edit(this.$refs.editorCode, {\n            mode: 'ace/mode/markdown',\n            selectionStyle: 'text',\n            theme: 'ace/theme/eclipse'\n        })\n        this.aceEditor.session.on('change', (delta) => {\n            this.aceUpdate = true\n            this.$nextTick(() => {\n                this.devalue = this.aceEditor.session.getValue()\n            })\n        })\n\n        // eslint-disable-next-line new-cap\n        this.markdownEditor = new markdownit((this.field.markdownProps ? this.field.markdownProps : {}))\n        // this.markdownEditor.use(MarkdownItColor, {\n        //     inline: true\n        // })\n        // this.markdownEditor.use(MermaidPlugin, {\n        //     host: this\n        // })\n        // this.markdownEditor.use(MathLivePlugin, {\n        //     host: this\n        // })\n        // this.markdownEditor.use(FromJSONPlugin, {\n        //     host: this\n        // })\n        // init ace editor before calling update\n        this.updateMarkdownText()\n    }\n}\n</script>\n","import { render, staticRenderFns } from \"./MarkdownInput.vue?vue&type=template&id=78f5d491&\"\nimport script from \"./MarkdownInput.vue?vue&type=script&lang=js&\"\nexport * from \"./MarkdownInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VIcon,VSpacer,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}