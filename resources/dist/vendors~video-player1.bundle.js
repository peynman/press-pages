/*! For license information please see vendors~video-player1.bundle.js.LICENSE.txt */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[65],{477:function(e,t,i){(function(t){var i;if(typeof window!=="undefined"){i=window}else if(typeof t!=="undefined"){i=t}else if(typeof self!=="undefined"){i=self}else{i={}}e.exports=i}).call(this,i(24))},518:function(e,t,i){"use strict";var r,n,a=i(519).toUnsigned,s=function(e){return new Date(e*1e3-20828448e5)},o=function(e){return{isLeading:(e[0]&12)>>>2,dependsOn:e[0]&3,isDependedOn:(e[1]&192)>>>6,hasRedundancy:(e[1]&48)>>>4,paddingValue:(e[1]&14)>>>1,isNonSyncSample:e[1]&1,degradationPriority:e[2]<<8|e[3]}},u=function(e){var t="";t+=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);return t},l=function(e,t){var i=[],r,n,s,o,c;if(!t.length){return null}for(r=0;r<e.byteLength;){n=a(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);s=u(e.subarray(r+4,r+8));o=n>1?r+n:e.byteLength;if(s===t[0]){if(t.length===1){i.push(e.subarray(r+8,o))}else{c=l(e.subarray(r+8,o),t.slice(1));if(c.length){i=i.concat(c)}}}r=o}return i},c=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[],r,n;for(r=0;r+4<e.length;r+=n){n=t.getUint32(r);r+=4;if(n<=0){i.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(e[r]&31){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[r]&31);break}}return i},f={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:r(e.subarray(78,e.byteLength))}},avcC:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:e[4]&3,sps:[],pps:[]},r=e[5]&31,n,a,s,o;s=6;for(o=0;o<r;o++){a=t.getUint16(s);s+=2;i.sps.push(new Uint8Array(e.subarray(s,s+a)));s+=a}n=e[s];s++;for(o=0;o<n;o++){a=t.getUint16(s);s+=2;i.pps.push(new Uint8Array(e.subarray(s,s+a)));s+=a}return i},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:e[8]&31,decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(e[26]&7)<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={majorBrand:u(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;while(r<e.byteLength){i.compatibleBrands.push(u(e.subarray(r,r+4)));r+=4}return i},dinf:function(e){return{boxes:r(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:r(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:u(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(e[r]===0){r++;break}i.name+=String.fromCharCode(e[r])}i.name=decodeURIComponent(escape(i.name));return i},mdat:function(e){return{byteLength:e.byteLength,nals:c(e)}},mdhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};if(n.version===1){i+=4;n.creationTime=s(t.getUint32(i));i+=8;n.modificationTime=s(t.getUint32(i));i+=4;n.timescale=t.getUint32(i);i+=8;n.duration=t.getUint32(i)}else{n.creationTime=s(t.getUint32(i));i+=4;n.modificationTime=s(t.getUint32(i));i+=4;n.timescale=t.getUint32(i);i+=4;n.duration=t.getUint32(i)}i+=4;r=t.getUint16(i);n.language+=String.fromCharCode((r>>10)+96);n.language+=String.fromCharCode(((r&992)>>5)+96);n.language+=String.fromCharCode((r&31)+96);return n},mdia:function(e){return{boxes:r(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:r(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};if(e.byteLength>28){i.streamDescriptor=r(e.subarray(28))[0]}return i},moof:function(e){return{boxes:r(e)}},moov:function(e){return{boxes:r(e)}},mvex:function(e){return{boxes:r(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};if(r.version===1){i+=4;r.creationTime=s(t.getUint32(i));i+=8;r.modificationTime=s(t.getUint32(i));i+=4;r.timescale=t.getUint32(i);i+=8;r.duration=t.getUint32(i)}else{r.creationTime=s(t.getUint32(i));i+=4;r.modificationTime=s(t.getUint32(i));i+=4;r.timescale=t.getUint32(i);i+=4;r.duration=t.getUint32(i)}i+=4;r.rate=t.getUint16(i)+t.getUint16(i+2)/16;i+=4;r.volume=t.getUint8(i)+t.getUint8(i+1)/8;i+=2;i+=2;i+=2*4;r.matrix=new Uint32Array(e.subarray(i,i+9*4));i+=9*4;i+=6*4;r.nextTrackId=t.getUint32(i);return r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i;for(i=4;i<e.byteLength;i++){t.samples.push({dependsOn:(e[i]&48)>>4,isDependedOn:(e[i]&12)>>2,hasRedundancy:e[i]&3})}return t},sidx:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8),earliestPresentationTime:t.getUint32(12),firstOffset:t.getUint32(16)},r=t.getUint16(22),n;for(n=24;r;n+=12,r--){i.references.push({referenceType:(e[n]&128)>>>7,referencedSize:t.getUint32(n)&2147483647,subsegmentDuration:t.getUint32(n+4),startsWithSap:!!(e[n+8]&128),sapType:(e[n+8]&112)>>>4,sapDeltaTime:t.getUint32(n+8)&268435455})}return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:r(e)}},stco:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=t.getUint32(4),n;for(n=8;r;n+=4,r--){i.chunkOffsets.push(t.getUint32(n))}return i},stsc:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=t.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},n;for(n=8;i;n+=12,i--){r.sampleToChunks.push({firstChunk:t.getUint32(n),samplesPerChunk:t.getUint32(n+4),sampleDescriptionIndex:t.getUint32(n+8)})}return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:r(e.subarray(8))}},stsz:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:t.getUint32(4),entries:[]},r;for(r=12;r<e.byteLength;r+=4){i.entries.push(t.getUint32(r))}return i},stts:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=t.getUint32(4),n;for(n=8;r;n+=8,r--){i.timeToSamples.push({sampleCount:t.getUint32(n),sampleDelta:t.getUint32(n+4)})}return i},styp:function(e){return f.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:a(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};if(t.version===1){t.baseMediaDecodeTime*=Math.pow(2,32);t.baseMediaDecodeTime+=a(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return t},tfhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},r=i.flags[2]&1,n=i.flags[2]&2,a=i.flags[2]&8,s=i.flags[2]&16,o=i.flags[2]&32,u=i.flags[0]&65536,l=i.flags[0]&131072,c;c=8;if(r){c+=4;i.baseDataOffset=t.getUint32(12);c+=4}if(n){i.sampleDescriptionIndex=t.getUint32(c);c+=4}if(a){i.defaultSampleDuration=t.getUint32(c);c+=4}if(s){i.defaultSampleSize=t.getUint32(c);c+=4}if(o){i.defaultSampleFlags=t.getUint32(c)}if(u){i.durationIsEmpty=true}if(!r&&l){i.baseDataOffsetIsMoof=true}return i},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};if(r.version===1){i+=4;r.creationTime=s(t.getUint32(i));i+=8;r.modificationTime=s(t.getUint32(i));i+=4;r.trackId=t.getUint32(i);i+=4;i+=8;r.duration=t.getUint32(i)}else{r.creationTime=s(t.getUint32(i));i+=4;r.modificationTime=s(t.getUint32(i));i+=4;r.trackId=t.getUint32(i);i+=4;i+=4;r.duration=t.getUint32(i)}i+=4;i+=2*4;r.layer=t.getUint16(i);i+=2;r.alternateGroup=t.getUint16(i);i+=2;r.volume=t.getUint8(i)+t.getUint8(i+1)/8;i+=2;i+=2;r.matrix=new Uint32Array(e.subarray(i,i+9*4));i+=9*4;r.width=t.getUint16(i)+t.getUint16(i+2)/16;i+=4;r.height=t.getUint16(i)+t.getUint16(i+2)/16;return r},traf:function(e){return{boxes:r(e)}},trak:function(e){return{boxes:r(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:e[20]&3,sampleIsDependedOn:(e[21]&192)>>6,sampleHasRedundancy:(e[21]&48)>>4,samplePaddingValue:(e[21]&14)>>1,sampleIsDifferenceSample:!!(e[21]&1),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=t.flags[2]&1,n=t.flags[2]&4,a=t.flags[1]&1,s=t.flags[1]&2,u=t.flags[1]&4,l=t.flags[1]&8,c=i.getUint32(4),f=8,h;if(r){t.dataOffset=i.getInt32(f);f+=4}if(n&&c){h={flags:o(e.subarray(f,f+4))};f+=4;if(a){h.duration=i.getUint32(f);f+=4}if(s){h.size=i.getUint32(f);f+=4}if(l){h.compositionTimeOffset=i.getUint32(f);f+=4}t.samples.push(h);c--}while(c--){h={};if(a){h.duration=i.getUint32(f);f+=4}if(s){h.size=i.getUint32(f);f+=4}if(u){h.flags=o(e.subarray(f,f+4));f+=4}if(l){h.compositionTimeOffset=i.getUint32(f);f+=4}t.samples.push(h)}return t},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};r=function(e){var t=0,i=[],r,n,a,s,o;var l=new ArrayBuffer(e.length);var c=new Uint8Array(l);for(var h=0;h<e.length;++h){c[h]=e[h]}r=new DataView(l);while(t<e.byteLength){n=r.getUint32(t);a=u(e.subarray(t+4,t+8));s=n>1?t+n:e.byteLength;o=(f[a]||function(e){return{data:e}})(e.subarray(t+8,s));o.size=n;o.type=a;i.push(o);t=s}return i};n=function(e,t){var i;t=t||0;i=new Array(t*2+1).join(" ");return e.map((function(e,r){return i+e.type+"\n"+Object.keys(e).filter((function(e){return e!=="type"&&e!=="boxes"})).map((function(t){var r=i+"  "+t+": ",n=e[t];if(n instanceof Uint8Array||n instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);if(!a){return r+"<>"}if(a.length===1){return r+"<"+a.join("").slice(1)+">"}return r+"<\n"+a.map((function(e){return i+"  "+e})).join("\n")+"\n"+i+"  >"}return r+JSON.stringify(n,null,2).split("\n").map((function(e,t){if(t===0){return e}return i+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+n(e.boxes,t+1):"")})).join("\n")};e.exports={inspect:r,textify:n,parseType:u,findBox:l,parseTraf:f.traf,parseTfdt:f.tfdt,parseHdlr:f.hdlr,parseTfhd:f.tfhd,parseTrun:f.trun,parseSidx:f.sidx}},519:function(e,t){var i=function(e){return e>>>0};var r=function(e){return("00"+e.toString(16)).slice(-2)};e.exports={toUnsigned:i,toHexString:r}},559:function(e,t){function i(){e.exports=i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i){if(Object.prototype.hasOwnProperty.call(i,r)){e[r]=i[r]}}}return e};return i.apply(this,arguments)}e.exports=i},560:function(e,t){function i(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}e.exports=i},561:function(e,t){function i(t,r){e.exports=i=Object.setPrototypeOf||function e(t,i){t.__proto__=i;return t};return i(t,r)}e.exports=i},562:function(e,t,i){(function(t){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/;var r=/^([^\/?#]*)(.*)$/;var n=/(?:\/|^)\.(?=\/)/g;var a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g;var s={buildAbsoluteURL:function(e,t,i){i=i||{};e=e.trim();t=t.trim();if(!t){if(!i.alwaysNormalize){return e}var n=s.parseURL(e);if(!n){throw new Error("Error trying to parse base URL.")}n.path=s.normalizePath(n.path);return s.buildURLFromParts(n)}var a=s.parseURL(t);if(!a){throw new Error("Error trying to parse relative URL.")}if(a.scheme){if(!i.alwaysNormalize){return t}a.path=s.normalizePath(a.path);return s.buildURLFromParts(a)}var o=s.parseURL(e);if(!o){throw new Error("Error trying to parse base URL.")}if(!o.netLoc&&o.path&&o.path[0]!=="/"){var u=r.exec(o.path);o.netLoc=u[1];o.path=u[2]}if(o.netLoc&&!o.path){o.path="/"}var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc){l.netLoc=o.netLoc;if(a.path[0]!=="/"){if(!a.path){l.path=o.path;if(!a.params){l.params=o.params;if(!a.query){l.query=o.query}}}else{var c=o.path;var f=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(f)}}}if(l.path===null){l.path=i.alwaysNormalize?s.normalizePath(a.path):a.path}return s.buildURLFromParts(l)},parseURL:function(e){var t=i.exec(e);if(!t){return null}return{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}},normalizePath:function(e){e=e.split("").reverse().join("").replace(n,"");while(e.length!==(e=e.replace(a,"")).length){}return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};if(true)e.exports=s;else{}})(this)},563:function(e,t){function i(e,t){for(var i in e){t[i]=e[i]}}function r(e,t){var r=e.prototype;if(Object.create){var n=Object.create(t.prototype);r.__proto__=n}if(!(r instanceof t)){function a(){}a.prototype=t.prototype;a=new a;i(r,a);e.prototype=r=a}if(r.constructor!=e){if(typeof e!="function"){console.error("unknow Class:"+e)}r.constructor=e}}var n="http://www.w3.org/1999/xhtml";var a={};var s=a.ELEMENT_NODE=1;var o=a.ATTRIBUTE_NODE=2;var u=a.TEXT_NODE=3;var l=a.CDATA_SECTION_NODE=4;var c=a.ENTITY_REFERENCE_NODE=5;var f=a.ENTITY_NODE=6;var h=a.PROCESSING_INSTRUCTION_NODE=7;var d=a.COMMENT_NODE=8;var p=a.DOCUMENT_NODE=9;var v=a.DOCUMENT_TYPE_NODE=10;var m=a.DOCUMENT_FRAGMENT_NODE=11;var g=a.NOTATION_NODE=12;var y={};var _={};var b=y.INDEX_SIZE_ERR=(_[1]="Index size error",1);var T=y.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2);var S=y.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3);var k=y.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4);var w=y.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5);var C=y.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6);var E=y.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7);var I=y.NOT_FOUND_ERR=(_[8]="Not found",8);var A=y.NOT_SUPPORTED_ERR=(_[9]="Not supported",9);var x=y.INUSE_ATTRIBUTE_ERR=(_[10]="Attribute in use",10);var P=y.INVALID_STATE_ERR=(_[11]="Invalid state",11);var L=y.SYNTAX_ERR=(_[12]="Syntax error",12);var D=y.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13);var O=y.NAMESPACE_ERR=(_[14]="Invalid namespace",14);var N=y.INVALID_ACCESS_ERR=(_[15]="Invalid access",15);function R(e,t){if(t instanceof Error){var i=t}else{i=this;Error.call(this,_[e]);this.message=_[e];if(Error.captureStackTrace)Error.captureStackTrace(this,R)}i.code=e;if(t)this.message=this.message+": "+t;return i}R.prototype=Error.prototype;i(y,R);function U(){}U.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],r=0;r<this.length;r++){ve(this[r],i,e,t)}return i.join("")}};function M(e,t){this._node=e;this._refresh=t;B(this)}function B(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ye(e,"length",r.length);i(r,e);e._inc=t}}M.prototype.item=function(e){B(this);return this[e]};r(M,U);function j(){}function F(e,t){var i=e.length;while(i--){if(e[i]===t){return i}}}function H(e,t,i,r){if(r){t[F(t,r)]=i}else{t[t.length++]=i}if(e){i.ownerElement=e;var n=e.ownerDocument;if(n){r&&Y(n,e,r);K(n,e,i)}}}function V(e,t,i){var r=F(t,i);if(r>=0){var n=t.length-1;while(r<n){t[r]=t[++r]}t.length=n;if(e){var a=e.ownerDocument;if(a){Y(a,e,i);i.ownerElement=null}}}else{throw R(I,new Error(e.tagName+"@"+i))}}j.prototype={length:0,item:U.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var i=this[t];if(i.nodeName==e){return i}}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement){throw new R(x)}var i=this.getNamedItem(e.nodeName);H(this._ownerElement,this,e,i);return i},setNamedItemNS:function(e){var t=e.ownerElement,i;if(t&&t!=this._ownerElement){throw new R(x)}i=this.getNamedItemNS(e.namespaceURI,e.localName);H(this._ownerElement,this,e,i);return i},removeNamedItem:function(e){var t=this.getNamedItem(e);V(this._ownerElement,this,t);return t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);V(this._ownerElement,this,i);return i},getNamedItemNS:function(e,t){var i=this.length;while(i--){var r=this[i];if(r.localName==t&&r.namespaceURI==e){return r}}return null}};function q(e){this._features={};if(e){for(var t in e){this._features=e[t]}}}q.prototype={hasFeature:function(e,t){var i=this._features[e.toLowerCase()];if(i&&(!t||t in i)){return true}else{return false}},createDocument:function(e,t,i){var r=new X;r.implementation=this;r.childNodes=new U;r.doctype=i;if(i){r.appendChild(i)}if(t){var n=r.createElementNS(e,t);r.appendChild(n)}return r},createDocumentType:function(e,t,i){var r=new se;r.name=e;r.nodeName=e;r.publicId=t;r.systemId=i;return r}};function W(){}W.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return J(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t);if(t){this.removeChild(t)}},removeChild:function(e){return Q(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return ge(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;if(t&&t.nodeType==u&&e.nodeType==u){this.removeChild(t);e.appendData(t.data)}else{e.normalize();e=t}}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var i=t._nsMap;if(i){for(var r in i){if(i[r]==e){return r}}}t=t.nodeType==o?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var i=t._nsMap;if(i){if(e in i){return i[e]}}t=t.nodeType==o?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null}};function z(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}i(a,W);i(a,W.prototype);function G(e,t){if(t(e)){return true}if(e=e.firstChild){do{if(G(e,t)){return true}}while(e=e.nextSibling)}}function X(){}function K(e,t,i){e&&e._inc++;var r=i.namespaceURI;if(r=="http://www.w3.org/2000/xmlns/"){t._nsMap[i.prefix?i.localName:""]=i.value}}function Y(e,t,i,r){e&&e._inc++;var n=i.namespaceURI;if(n=="http://www.w3.org/2000/xmlns/"){delete t._nsMap[i.prefix?i.localName:""]}}function $(e,t,i){if(e&&e._inc){e._inc++;var r=t.childNodes;if(i){r[r.length++]=i}else{var n=t.firstChild;var a=0;while(n){r[a++]=n;n=n.nextSibling}r.length=a}}}function Q(e,t){var i=t.previousSibling;var r=t.nextSibling;if(i){i.nextSibling=r}else{e.firstChild=r}if(r){r.previousSibling=i}else{e.lastChild=i}$(e.ownerDocument,e);return t}function J(e,t,i){var r=t.parentNode;if(r){r.removeChild(t)}if(t.nodeType===m){var n=t.firstChild;if(n==null){return t}var a=t.lastChild}else{n=a=t}var s=i?i.previousSibling:e.lastChild;n.previousSibling=s;a.nextSibling=i;if(s){s.nextSibling=n}else{e.firstChild=n}if(i==null){e.lastChild=a}else{i.previousSibling=a}do{n.parentNode=e}while(n!==a&&(n=n.nextSibling));$(e.ownerDocument||e,e);if(t.nodeType==m){t.firstChild=t.lastChild=null}return t}function Z(e,t){var i=t.parentNode;if(i){var r=e.lastChild;i.removeChild(t);var r=e.lastChild}var r=e.lastChild;t.parentNode=e;t.previousSibling=r;t.nextSibling=null;if(r){r.nextSibling=t}else{e.firstChild=t}e.lastChild=t;$(e.ownerDocument,e,t);return t}X.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){var i=e.firstChild;while(i){var r=i.nextSibling;this.insertBefore(i,t);i=r}return e}if(this.documentElement==null&&e.nodeType==s){this.documentElement=e}return J(this,e,t),e.ownerDocument=this,e},removeChild:function(e){if(this.documentElement==e){this.documentElement=null}return Q(this,e)},importNode:function(e,t){return me(this,e,t)},getElementById:function(e){var t=null;G(this.documentElement,(function(i){if(i.nodeType==s){if(i.getAttribute("id")==e){t=i;return true}}}));return t},createElement:function(e){var t=new ee;t.ownerDocument=this;t.nodeName=e;t.tagName=e;t.childNodes=new U;var i=t.attributes=new j;i._ownerElement=t;return t},createDocumentFragment:function(){var e=new ce;e.ownerDocument=this;e.childNodes=new U;return e},createTextNode:function(e){var t=new re;t.ownerDocument=this;t.appendData(e);return t},createComment:function(e){var t=new ne;t.ownerDocument=this;t.appendData(e);return t},createCDATASection:function(e){var t=new ae;t.ownerDocument=this;t.appendData(e);return t},createProcessingInstruction:function(e,t){var i=new fe;i.ownerDocument=this;i.tagName=i.target=e;i.nodeValue=i.data=t;return i},createAttribute:function(e){var t=new te;t.ownerDocument=this;t.name=e;t.nodeName=e;t.localName=e;t.specified=true;return t},createEntityReference:function(e){var t=new le;t.ownerDocument=this;t.nodeName=e;return t},createElementNS:function(e,t){var i=new ee;var r=t.split(":");var n=i.attributes=new j;i.childNodes=new U;i.ownerDocument=this;i.nodeName=t;i.tagName=t;i.namespaceURI=e;if(r.length==2){i.prefix=r[0];i.localName=r[1]}else{i.localName=t}n._ownerElement=i;return i},createAttributeNS:function(e,t){var i=new te;var r=t.split(":");i.ownerDocument=this;i.nodeName=t;i.name=t;i.namespaceURI=e;i.specified=true;if(r.length==2){i.prefix=r[0];i.localName=r[1]}else{i.localName=t}return i}};r(X,W);function ee(){this._nsMap={}}ee.prototype={nodeType:s,hasAttribute:function(e){return this.getAttributeNode(e)!=null},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t;this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){if(e.nodeType===m){return this.insertBefore(e,null)}else{return Z(this,e)}},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+i;this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new M(this,(function(t){var i=[];G(t,(function(r){if(r!==t&&r.nodeType==s&&(e==="*"||r.tagName==e)){i.push(r)}}));return i}))},getElementsByTagNameNS:function(e,t){return new M(this,(function(i){var r=[];G(i,(function(n){if(n!==i&&n.nodeType===s&&(e==="*"||n.namespaceURI===e)&&(t==="*"||n.localName==t)){r.push(n)}}));return r}))}};X.prototype.getElementsByTagName=ee.prototype.getElementsByTagName;X.prototype.getElementsByTagNameNS=ee.prototype.getElementsByTagNameNS;r(ee,W);function te(){}te.prototype.nodeType=o;r(te,W);function ie(){}ie.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e;this.nodeValue=this.data=e;this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(_[S])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){var r=this.data.substring(0,e);var n=this.data.substring(e+t);i=r+i+n;this.nodeValue=this.data=i;this.length=i.length}};r(ie,W);function re(){}re.prototype={nodeName:"#text",nodeType:u,splitText:function(e){var t=this.data;var i=t.substring(e);t=t.substring(0,e);this.data=this.nodeValue=t;this.length=t.length;var r=this.ownerDocument.createTextNode(i);if(this.parentNode){this.parentNode.insertBefore(r,this.nextSibling)}return r}};r(re,ie);function ne(){}ne.prototype={nodeName:"#comment",nodeType:d};r(ne,ie);function ae(){}ae.prototype={nodeName:"#cdata-section",nodeType:l};r(ae,ie);function se(){}se.prototype.nodeType=v;r(se,W);function oe(){}oe.prototype.nodeType=g;r(oe,W);function ue(){}ue.prototype.nodeType=f;r(ue,W);function le(){}le.prototype.nodeType=c;r(le,W);function ce(){}ce.prototype.nodeName="#document-fragment";ce.prototype.nodeType=m;r(ce,W);function fe(){}fe.prototype.nodeType=h;r(fe,W);function he(){}he.prototype.serializeToString=function(e,t,i){return de.call(e,t,i)};W.prototype.toString=de;function de(e,t){var i=[];var r=this.nodeType==9?this.documentElement:this;var n=r.prefix;var a=r.namespaceURI;if(a&&n==null){var n=r.lookupPrefix(a);if(n==null){var s=[{namespace:a,prefix:null}]}}ve(this,i,e,t,s);return i.join("")}function pe(e,t,i){var r=e.prefix||"";var n=e.namespaceURI;if(!r&&!n){return false}if(r==="xml"&&n==="http://www.w3.org/XML/1998/namespace"||n=="http://www.w3.org/2000/xmlns/"){return false}var a=i.length;while(a--){var s=i[a];if(s.prefix==r){return s.namespace!=n}}return true}function ve(e,t,i,r,a){if(r){e=r(e);if(e){if(typeof e=="string"){t.push(e);return}}else{return}}switch(e.nodeType){case s:if(!a)a=[];var f=a.length;var g=e.attributes;var y=g.length;var _=e.firstChild;var b=e.tagName;i=n===e.namespaceURI||i;t.push("<",b);for(var T=0;T<y;T++){var S=g.item(T);if(S.prefix=="xmlns"){a.push({prefix:S.localName,namespace:S.value})}else if(S.nodeName=="xmlns"){a.push({prefix:"",namespace:S.value})}}for(var T=0;T<y;T++){var S=g.item(T);if(pe(S,i,a)){var k=S.prefix||"";var w=S.namespaceURI;var C=k?" xmlns:"+k:" xmlns";t.push(C,'="',w,'"');a.push({prefix:k,namespace:w})}ve(S,t,i,r,a)}if(pe(e,i,a)){var k=e.prefix||"";var w=e.namespaceURI;var C=k?" xmlns:"+k:" xmlns";t.push(C,'="',w,'"');a.push({prefix:k,namespace:w})}if(_||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(b)){t.push(">");if(i&&/^script$/i.test(b)){while(_){if(_.data){t.push(_.data)}else{ve(_,t,i,r,a)}_=_.nextSibling}}else{while(_){ve(_,t,i,r,a);_=_.nextSibling}}t.push("</",b,">")}else{t.push("/>")}return;case p:case m:var _=e.firstChild;while(_){ve(_,t,i,r,a);_=_.nextSibling}return;case o:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,z),'"');case u:return t.push(e.data.replace(/[<&]/g,z));case l:return t.push("<![CDATA[",e.data,"]]>");case d:return t.push("\x3c!--",e.data,"--\x3e");case v:var E=e.publicId;var I=e.systemId;t.push("<!DOCTYPE ",e.name);if(E){t.push(' PUBLIC "',E);if(I&&I!="."){t.push('" "',I)}t.push('">')}else if(I&&I!="."){t.push(' SYSTEM "',I,'">')}else{var A=e.internalSubset;if(A){t.push(" [",A,"]")}t.push(">")}return;case h:return t.push("<?",e.target," ",e.data,"?>");case c:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function me(e,t,i){var r;switch(t.nodeType){case s:r=t.cloneNode(false);r.ownerDocument=e;case m:break;case o:i=true;break}if(!r){r=t.cloneNode(false)}r.ownerDocument=e;r.parentNode=null;if(i){var n=t.firstChild;while(n){r.appendChild(me(e,n,i));n=n.nextSibling}}return r}function ge(e,t,i){var r=new t.constructor;for(var n in t){var a=t[n];if(typeof a!="object"){if(a!=r[n]){r[n]=a}}}if(t.childNodes){r.childNodes=new U}r.ownerDocument=e;switch(r.nodeType){case s:var u=t.attributes;var l=r.attributes=new j;var c=u.length;l._ownerElement=r;for(var f=0;f<c;f++){r.setAttributeNode(ge(e,u.item(f),true))}break;case o:i=true}if(i){var h=t.firstChild;while(h){r.appendChild(ge(e,h,i));h=h.nextSibling}}return r}function ye(e,t,i){e[t]=i}try{if(Object.defineProperty){Object.defineProperty(M.prototype,"length",{get:function(){B(this);return this.$$length}});Object.defineProperty(W.prototype,"textContent",{get:function(){return _e(this)},set:function(e){switch(this.nodeType){case s:case m:while(this.firstChild){this.removeChild(this.firstChild)}if(e||String(e)){this.appendChild(this.ownerDocument.createTextNode(e))}break;default:this.data=e;this.value=e;this.nodeValue=e}}});function _e(e){switch(e.nodeType){case s:case m:var t=[];e=e.firstChild;while(e){if(e.nodeType!==7&&e.nodeType!==8){t.push(_e(e))}e=e.nextSibling}return t.join("");default:return e.nodeValue}}ye=function(e,t,i){e["$$"+t]=i}}}catch(e){}t.DOMImplementation=q;t.XMLSerializer=he},564:function(e,t,i){"use strict";var r=i(519).toUnsigned;var n=i(519).toHexString;var a=i(518);var s,o,u,l,c;s=function(e){var t={},i=a.findBox(e,["moov","trak"]);return i.reduce((function(e,t){var i,n,s,o,u;i=a.findBox(t,["tkhd"])[0];if(!i){return null}n=i[0];s=n===0?12:20;o=r(i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3]);u=a.findBox(t,["mdia","mdhd"])[0];if(!u){return null}n=u[0];s=n===0?12:20;e[o]=r(u[s]<<24|u[s+1]<<16|u[s+2]<<8|u[s+3]);return e}),t)};o=function(e,t){var i,n,s;i=a.findBox(t,["moof","traf"]);n=[].concat.apply([],i.map((function(t){return a.findBox(t,["tfhd"]).map((function(i){var n,s,o;n=r(i[4]<<24|i[5]<<16|i[6]<<8|i[7]);s=e[n]||9e4;o=a.findBox(t,["tfdt"]).map((function(e){var t,i;t=e[0];i=r(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);if(t===1){i*=Math.pow(2,32);i+=r(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return i}))[0];o=o||Infinity;return o/s}))})));s=Math.min.apply(null,n);return isFinite(s)?s:0};u=function(e,t){var i=a.findBox(t,["moof","traf"]);var r=0;var n=0;var s;if(i&&i.length){var o=a.parseTraf(i[0]);for(var u=0;u<o.boxes.length;u++){if(o.boxes[u].type==="tfhd"){s=o.boxes[u].trackId}else if(o.boxes[u].type==="tfdt"){r=o.boxes[u].baseMediaDecodeTime}else if(o.boxes[u].type==="trun"&&o.boxes[u].samples.length){n=o.boxes[u].samples[0].compositionTimeOffset||0}}}var l=e[s]||9e4;return(r+n)/l};l=function(e){var t=a.findBox(e,["moov","trak"]);var i=[];t.forEach((function(e){var t=a.findBox(e,["mdia","hdlr"]);var r=a.findBox(e,["tkhd"]);t.forEach((function(e,t){var n=a.parseType(e.subarray(8,12));var s=r[t];var o;var u;var l;if(n==="vide"){o=new DataView(s.buffer,s.byteOffset,s.byteLength);u=o.getUint8(0);l=u===0?o.getUint32(12):o.getUint32(20);i.push(l)}}))}));return i};c=function(e){var t=a.findBox(e,["moov","trak"]);var i=[];t.forEach((function(e){var t={};var s=a.findBox(e,["tkhd"])[0];var o,u;if(s){o=new DataView(s.buffer,s.byteOffset,s.byteLength);u=o.getUint8(0);t.id=u===0?o.getUint32(12):o.getUint32(20)}var l=a.findBox(e,["mdia","hdlr"])[0];if(l){var c=a.parseType(l.subarray(8,12));if(c==="vide"){t.type="video"}else if(c==="soun"){t.type="audio"}else{t.type=c}}var f=a.findBox(e,["mdia","minf","stbl","stsd"])[0];if(f){var h=f.subarray(8);t.codec=a.parseType(h.subarray(4,8));var d=a.findBox(h,[t.codec])[0];var p,v;if(d){if(/^[a-z]vc[1-9]$/i.test(t.codec)){p=d.subarray(78);v=a.parseType(p.subarray(4,8));if(v==="avcC"&&p.length>11){t.codec+=".";t.codec+=n(p[9]);t.codec+=n(p[10]);t.codec+=n(p[11])}else{t.codec="avc1.4d400d"}}else if(/^mp4[a,v]$/i.test(t.codec)){p=d.subarray(28);v=a.parseType(p.subarray(4,8));if(v==="esds"&&p.length>20&&p[19]!==0){t.codec+="."+n(p[19]);t.codec+="."+n(p[20]>>>2&63).replace(/^0/,"")}else{t.codec="mp4a.40.2"}}else{}}}var m=a.findBox(e,["mdia","mdhd"])[0];if(m&&s){var g=u===0?12:20;t.timescale=r(m[g]<<24|m[g+1]<<16|m[g+2]<<8|m[g+3])}i.push(t)}));return i};e.exports={findBox:a.findBox,parseType:a.parseType,timescale:s,startTime:o,compositionStartTime:u,videoTrackIds:l,tracks:c}},565:function(e,t,i){"use strict";var r=4,n=128;var a=function(e){var t=0,i={payloadType:-1,payloadSize:0},a=0,s=0;while(t<e.byteLength){if(e[t]===n){break}while(e[t]===255){a+=255;t++}a+=e[t++];while(e[t]===255){s+=255;t++}s+=e[t++];if(!i.payload&&a===r){i.payloadType=a;i.payloadSize=s;i.payload=e.subarray(t,t+s);break}t+=s;a=0;s=0}return i};var s=function(e){if(e.payload[0]!==181){return null}if((e.payload[1]<<8|e.payload[2])!==49){return null}if(String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])!=="GA94"){return null}if(e.payload[7]!==3){return null}return e.payload.subarray(8,e.payload.length-1)};var o=function(e,t){var i=[],r,n,a,s;if(!(t[0]&64)){return i}n=t[0]&31;for(r=0;r<n;r++){a=r*3;s={type:t[a+2]&3,pts:e};if(t[a+2]&4){s.ccData=t[a+3]<<8|t[a+4];i.push(s)}}return i};var u=function(e){var t=e.byteLength,i=[],r=1,n,a;while(r<t-2){if(e[r]===0&&e[r+1]===0&&e[r+2]===3){i.push(r+2);r+=2}else{r++}}if(i.length===0){return e}n=t-i.length;a=new Uint8Array(n);var s=0;for(r=0;r<n;s++,r++){if(s===i[0]){s++;i.shift()}a[r]=e[s]}return a};e.exports={parseSei:a,parseUserData:s,parseCaptionPackets:o,discardEmulationPreventionBytes:u,USER_DATA_REGISTERED_ITU_T_T35:r}},566:function(e,t,i){"use strict";var r=function(){this.init=function(){var e={};this.on=function(t,i){if(!e[t]){e[t]=[]}e[t]=e[t].concat(i)};this.off=function(t,i){var r;if(!e[t]){return false}r=e[t].indexOf(i);e[t]=e[t].slice();e[t].splice(r,1);return r>-1};this.trigger=function(t){var i,r,n,a;i=e[t];if(!i){return}if(arguments.length===2){n=i.length;for(r=0;r<n;++r){i[r].call(this,arguments[1])}}else{a=[];r=arguments.length;for(r=1;r<arguments.length;++r){a.push(arguments[r])}n=i.length;for(r=0;r<n;++r){i[r].apply(this,a)}}};this.dispose=function(){e={}}}};r.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}));this.on("done",(function(t){e.flush(t)}));this.on("partialdone",(function(t){e.partialFlush(t)}));this.on("endedtimeline",(function(t){e.endTimeline(t)}));this.on("reset",(function(t){e.reset(t)}));return e};r.prototype.push=function(e){this.trigger("data",e)};r.prototype.flush=function(e){this.trigger("done",e)};r.prototype.partialFlush=function(e){this.trigger("partialdone",e)};r.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)};r.prototype.reset=function(e){this.trigger("reset",e)};e.exports=r},567:function(e,t,i){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},659:function(e,t,i){(function(t){var i;if(typeof window!=="undefined"){i=window}else if(typeof t!=="undefined"){i=t}else if(typeof self!=="undefined"){i=self}else{i={}}e.exports=i}).call(this,i(24))},660:function(e,t,i){(function(t){var r=typeof t!=="undefined"?t:typeof window!=="undefined"?window:{};var n=i(661);var a;if(typeof document!=="undefined"){a=document}else{a=r["__GLOBAL_DOCUMENT_CACHE@4"];if(!a){a=r["__GLOBAL_DOCUMENT_CACHE@4"]=n}}e.exports=a}).call(this,i(24))},662:function(e,t,i){var r=i(663);var n=i(560);function a(e,t){if(t&&(r(t)==="object"||typeof t==="function")){return t}return n(e)}e.exports=a},663:function(e,t){function i(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e.exports=i=function e(t){return typeof t}}else{e.exports=i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(t)}e.exports=i},664:function(e,t){function i(t){e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return i(t)}e.exports=i},665:function(e,t){function i(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}e.exports=i},666:function(e,t){e.exports=i;function i(e,t){var i;var r=null;try{i=JSON.parse(e,t)}catch(e){r=e}return[r,i]}},667:function(e,t){function i(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;if(t)e=t}if("number"===typeof e)return s[e];var i=String(e);var a=r[i.toLowerCase()];if(a)return a;var a=n[i.toLowerCase()];if(a)return a;if(i.length===1)return i.charCodeAt(0);return undefined}i.isEventKey=function e(t,i){if(t&&"object"===typeof t){var a=t.which||t.keyCode||t.charCode;if(a===null||a===undefined){return false}if(typeof i==="string"){var s=r[i.toLowerCase()];if(s){return s===a}var s=n[i.toLowerCase()];if(s){return s===a}}else if(typeof i==="number"){return i===a}return false}};t=e.exports=i;var r=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var n=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)r[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)r[a-48]=a;for(a=1;a<13;a++)r["f"+a]=a+111;for(a=0;a<10;a++)r["numpad "+a]=a+96;var s=t.names=t.title={};for(a in r)s[r[a]]=a;for(var o in n){r[o]=n[o]}},668:function(e,t,i){"use strict";var r=i(477);var n=i(559);var a=i(669);var s=function(e){var t={};if(!e){return t}e.trim().split("\n").forEach((function(e){var i=e.indexOf(":");var r=e.slice(0,i).trim().toLowerCase();var n=e.slice(i+1).trim();if(typeof t[r]==="undefined"){t[r]=n}else if(Array.isArray(t[r])){t[r].push(n)}else{t[r]=[t[r],n]}}));return t};e.exports=c;e.exports.default=c;c.XMLHttpRequest=r.XMLHttpRequest||d;c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:r.XDomainRequest;o(["get","put","post","patch","head","delete"],(function(e){c[e==="delete"?"del":e]=function(t,i,r){i=l(t,i,r);i.method=e.toUpperCase();return f(i)}}));function o(e,t){for(var i=0;i<e.length;i++){t(e[i])}}function u(e){for(var t in e){if(e.hasOwnProperty(t))return false}return true}function l(e,t,i){var r=e;if(a(t)){i=t;if(typeof e==="string"){r={uri:e}}}else{r=n({},t,{uri:e})}r.callback=i;return r}function c(e,t,i){t=l(e,t,i);return f(t)}function f(e){if(typeof e.callback==="undefined"){throw new Error("callback argument missing")}var t=false;var i=function i(r,n,a){if(!t){t=true;e.callback(r,n,a)}};function r(){if(l.readyState===4){setTimeout(o,0)}}function n(){var e=undefined;if(l.response){e=l.response}else{e=l.responseText||h(l)}if(_){try{e=JSON.parse(e)}catch(e){}}return e}function a(e){clearTimeout(b);if(!(e instanceof Error)){e=new Error(""+(e||"Unknown XMLHttpRequest Error"))}e.statusCode=0;return i(e,T)}function o(){if(d)return;var t;clearTimeout(b);if(e.useXDR&&l.status===undefined){t=200}else{t=l.status===1223?204:l.status}var r=T;var a=null;if(t!==0){r={body:n(),statusCode:t,method:v,headers:{},url:p,rawRequest:l};if(l.getAllResponseHeaders){r.headers=s(l.getAllResponseHeaders())}}else{a=new Error("Internal XMLHttpRequest Error")}return i(a,r,r.body)}var l=e.xhr||null;if(!l){if(e.cors||e.useXDR){l=new c.XDomainRequest}else{l=new c.XMLHttpRequest}}var f;var d;var p=l.url=e.uri||e.url;var v=l.method=e.method||"GET";var m=e.body||e.data;var g=l.headers=e.headers||{};var y=!!e.sync;var _=false;var b;var T={body:undefined,headers:{},statusCode:0,method:v,url:p,rawRequest:l};if("json"in e&&e.json!==false){_=true;g["accept"]||g["Accept"]||(g["Accept"]="application/json");if(v!=="GET"&&v!=="HEAD"){g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json");m=JSON.stringify(e.json===true?m:e.json)}}l.onreadystatechange=r;l.onload=o;l.onerror=a;l.onprogress=function(){};l.onabort=function(){d=true};l.ontimeout=a;l.open(v,p,!y,e.username,e.password);if(!y){l.withCredentials=!!e.withCredentials}if(!y&&e.timeout>0){b=setTimeout((function(){if(d)return;d=true;l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";a(e)}),e.timeout)}if(l.setRequestHeader){for(f in g){if(g.hasOwnProperty(f)){l.setRequestHeader(f,g[f])}}}else if(e.headers&&!u(e.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}if("responseType"in e){l.responseType=e.responseType}if("beforeSend"in e&&typeof e.beforeSend==="function"){e.beforeSend(l)}l.send(m||null);return l}function h(e){try{if(e.responseType==="document"){return e.responseXML}var t=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!t){return e.responseXML}}catch(e){}return null}function d(){}},669:function(e,t){e.exports=r;var i=Object.prototype.toString;function r(e){if(!e){return false}var t=i.call(e);return t==="[object Function]"||typeof e==="function"&&t!=="[object RegExp]"||typeof window!=="undefined"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}},670:function(e,t,i){var r=i(477);var n=e.exports={WebVTT:i(671),VTTCue:i(674),VTTRegion:i(675)};r.vttjs=n;r.WebVTT=n.WebVTT;var a=n.VTTCue;var s=n.VTTRegion;var o=r.VTTCue;var u=r.VTTRegion;n.shim=function(){r.VTTCue=a;r.VTTRegion=s};n.restore=function(){r.VTTCue=o;r.VTTRegion=u};if(!r.VTTCue){n.shim()}},671:function(e,t,i){var r=i(672);var n=Object.create||function(){function e(){}return function(t){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.")}e.prototype=t;return new e}}();function a(e,t){this.name="ParsingError";this.code=e.code;this.message=t||e.message}a.prototype=n(Error.prototype);a.prototype.constructor=a;a.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function s(e){function t(e,t,i,r){return(e|0)*3600+(t|0)*60+(i|0)+(r|0)/1e3}var i=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!i){return null}if(i[3]){return t(i[1],i[2],i[3].replace(":",""),i[4])}else if(i[1]>59){return t(i[1],i[2],0,i[4])}else{return t(0,i[1],i[2],i[4])}}function o(){this.values=n(null)}o.prototype={set:function(e,t){if(!this.get(e)&&t!==""){this.values[e]=t}},get:function(e,t,i){if(i){return this.has(e)?this.values[e]:t[i]}return this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var r=0;r<i.length;++r){if(t===i[r]){this.set(e,t);break}}},integer:function(e,t){if(/^-?\d+$/.test(t)){this.set(e,parseInt(t,10))}},percent:function(e,t){var i;if(i=t.match(/^([\d]{1,3})(\.[\d]*)?%$/)){t=parseFloat(t);if(t>=0&&t<=100){this.set(e,t);return true}}return false}};function u(e,t,i,r){var n=r?e.split(r):[e];for(var a in n){if(typeof n[a]!=="string"){continue}var s=n[a].split(i);if(s.length!==2){continue}var o=s[0];var u=s[1];t(o,u)}}function l(e,t,i){var r=e;function n(){var t=s(e);if(t===null){throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+r)}e=e.replace(/^[^\sa-zA-Z-]+/,"");return t}function l(e,t){var r=new o;u(e,(function(e,t){switch(e){case"region":for(var n=i.length-1;n>=0;n--){if(i[n].id===t){r.set(e,i[n].region);break}}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];r.integer(e,s);r.percent(e,s)?r.set("snapToLines",false):null;r.alt(e,s,["auto"]);if(a.length===2){r.alt("lineAlign",a[1],["start","center","end"])}break;case"position":a=t.split(",");r.percent(e,a[0]);if(a.length===2){r.alt("positionAlign",a[1],["start","center","end"])}break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"]);break}}),/:/,/\s/);t.region=r.get("region",null);t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(e){}t.lineAlign=r.get("lineAlign","start");t.snapToLines=r.get("snapToLines",true);t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(e){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}function c(){e=e.replace(/^\s+/,"")}c();t.startTime=n();c();if(e.substr(0,3)!=="--\x3e"){throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r)}e=e.substr(3);c();t.endTime=n();c();l(e,t)}var c=r.createElement("textarea");var f={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var d={v:"title",lang:"lang"};var p={rt:"ruby"};function v(e,t){function i(){if(!t){return null}function e(e){t=t.substr(e.length);return e}var i=t.match(/^([^<]*)(<[^>]*>?)?/);return e(i[1]?i[1]:i[2])}function r(e){c.innerHTML=e;e=c.textContent;c.textContent="";return e}function n(e,t){return!p[t.localName]||p[t.localName]===e.localName}function a(t,i){var r=f[t];if(!r){return null}var n=e.document.createElement(r);var a=d[t];if(a&&i){n[a]=i.trim()}return n}var o=e.document.createElement("div"),u=o,l,v=[];while((l=i())!==null){if(l[0]==="<"){if(l[1]==="/"){if(v.length&&v[v.length-1]===l.substr(2).replace(">","")){v.pop();u=u.parentNode}continue}var m=s(l.substr(1,l.length-2));var g;if(m){g=e.document.createProcessingInstruction("timestamp",m);u.appendChild(g);continue}var y=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y){continue}g=a(y[1],y[3]);if(!g){continue}if(!n(u,g)){continue}if(y[2]){var _=y[2].split(".");_.forEach((function(e){var t=/^bg_/.test(e);var i=t?e.slice(3):e;if(h.hasOwnProperty(i)){var r=t?"background-color":"color";var n=h[i];g.style[r]=n}}));g.className=_.join(" ")}v.push(y[1]);u.appendChild(g);u=g;continue}u.appendChild(e.document.createTextNode(r(l)))}return o}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function g(e){for(var t=0;t<m.length;t++){var i=m[t];if(e>=i[0]&&e<=i[1]){return true}}return false}function y(e){var t=[],i="",r;if(!e||!e.childNodes){return"ltr"}function n(e,t){for(var i=t.childNodes.length-1;i>=0;i--){e.push(t.childNodes[i])}}function a(e){if(!e||!e.length){return null}var t=e.pop(),i=t.textContent||t.innerText;if(i){var r=i.match(/^.*(\n|\r)/);if(r){e.length=0;return r[0]}return i}if(t.tagName==="ruby"){return a(e)}if(t.childNodes){n(e,t);return a(e)}}n(t,e);while(i=a(t)){for(var s=0;s<i.length;s++){r=i.charCodeAt(s);if(g(r)){return"rtl"}}}return"ltr"}function _(e){if(typeof e.line==="number"&&(e.snapToLines||e.line>=0&&e.line<=100)){return e.line}if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement){return-1}var t=e.track,i=t.textTrackList,r=0;for(var n=0;n<i.length&&i[n]!==t;n++){if(i[n].mode==="showing"){r++}}return++r*-1}function b(){}b.prototype.applyStyles=function(e,t){t=t||this.div;for(var i in e){if(e.hasOwnProperty(i)){t.style[i]=e[i]}}};b.prototype.formatStyle=function(e,t){return e===0?0:e+t};function T(e,t,i){b.call(this);this.cue=t;this.cueDiv=v(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv);this.div=e.document.createElement("div");r={direction:y(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(r);this.div.appendChild(this.cueDiv);var n=0;switch(t.positionAlign){case"start":n=t.position;break;case"center":n=t.position-t.size/2;break;case"end":n=t.position-t.size;break}if(t.vertical===""){this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(t.size,"%")})}else{this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(t.size,"%")})}this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}T.prototype=n(b.prototype);T.prototype.constructor=T;function S(e){var t,i,r,n;if(e.div){i=e.div.offsetHeight;r=e.div.offsetWidth;n=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect();t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left;this.right=e.right;this.top=e.top||n;this.height=e.height||i;this.bottom=e.bottom||n+(e.height||i);this.width=e.width||r;this.lineHeight=t!==undefined?t:e.lineHeight}S.prototype.move=function(e,t){t=t!==undefined?t:this.lineHeight;switch(e){case"+x":this.left+=t;this.right+=t;break;case"-x":this.left-=t;this.right-=t;break;case"+y":this.top+=t;this.bottom+=t;break;case"-y":this.top-=t;this.bottom-=t;break}};S.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top};S.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++){if(this.overlaps(e[t])){return true}}return false};S.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right};S.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}};S.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),i=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),r=t*i;return r/(this.height*this.width)};S.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}};S.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0;var i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0;var r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var n={left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||i};return n};function k(e,t,i,r){function n(e,t){var n,a=new S(e),s=1;for(var o=0;o<t.length;o++){while(e.overlapsOppositeAxis(i,t[o])||e.within(i)&&e.overlapsAny(r)){e.move(t[o])}if(e.within(i)){return e}var u=e.intersectPercentage(i);if(s>u){n=new S(e);s=u}e=new S(a)}return n||a}var a=new S(t),s=t.cue,o=_(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"];l="height";break;case"rl":u=["+x","-x"];l="width";break;case"lr":u=["-x","+x"];l="width";break}var c=a.lineHeight,f=c*Math.round(o),h=i[l]+c,d=u[0];if(Math.abs(f)>h){f=f<0?-1:1;f*=Math.ceil(h/c)*c}if(o<0){f+=s.vertical===""?i.height:i.width;u=u.reverse()}a.move(d,f)}else{var p=a.lineHeight/i.height*100;switch(s.lineAlign){case"center":o-=p/2;break;case"end":o-=p;break}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")});break}u=["+y","-x","+x","-y"];a=new S(t)}var v=n(a,u);t.move(v.toCSSCompatValues(i))}function w(){}w.StringDecoder=function(){return{decode:function(e){if(!e){return""}if(typeof e!=="string"){throw new Error("Error - expected string data.")}return decodeURIComponent(encodeURIComponent(e))}}};w.convertCueToDOMTree=function(e,t){if(!e||!t){return null}return v(e,t)};var C=.05;var E="sans-serif";var I="1.5%";w.processCues=function(e,t,i){if(!e||!t||!i){return null}while(i.firstChild){i.removeChild(i.firstChild)}var r=e.document.createElement("div");r.style.position="absolute";r.style.left="0";r.style.right="0";r.style.top="0";r.style.bottom="0";r.style.margin=I;i.appendChild(r);function n(e){for(var t=0;t<e.length;t++){if(e[t].hasBeenReset||!e[t].displayState){return true}}return false}if(!n(t)){for(var a=0;a<t.length;a++){r.appendChild(t[a].displayState)}return}var s=[],o=S.getSimpleBoxPosition(r),u=Math.round(o.height*C*100)/100;var l={font:u+"px "+E};(function(){var i,n;for(var a=0;a<t.length;a++){n=t[a];i=new T(e,n,l);r.appendChild(i.div);k(e,i,o,s);n.displayState=i.div;s.push(S.getSimpleBoxPosition(i))}})()};w.Parser=function(e,t,i){if(!i){i=t;t={}}if(!t){t={}}this.window=e;this.vttjs=t;this.state="INITIAL";this.buffer="";this.decoder=i||new TextDecoder("utf8");this.regionList=[]};w.Parser.prototype={reportOrThrowError:function(e){if(e instanceof a){this.onparsingerror&&this.onparsingerror(e)}else{throw e}},parse:function(e){var t=this;if(e){t.buffer+=t.decoder.decode(e,{stream:true})}function i(){var e=t.buffer;var i=0;while(i<e.length&&e[i]!=="\r"&&e[i]!=="\n"){++i}var r=e.substr(0,i);if(e[i]==="\r"){++i}if(e[i]==="\n"){++i}t.buffer=e.substr(i);return r}function r(e){var i=new o;u(e,(function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(r.length!==2){break}var n=new o;n.percent("x",r[0]);n.percent("y",r[1]);if(!n.has("x")||!n.has("y")){break}i.set(e+"X",n.get("x"));i.set(e+"Y",n.get("y"));break;case"scroll":i.alt(e,t,["up"]);break}}),/=/,/\s/);if(i.has("id")){var r=new(t.vttjs.VTTRegion||t.window.VTTRegion);r.width=i.get("width",100);r.lines=i.get("lines",3);r.regionAnchorX=i.get("regionanchorX",0);r.regionAnchorY=i.get("regionanchorY",100);r.viewportAnchorX=i.get("viewportanchorX",0);r.viewportAnchorY=i.get("viewportanchorY",100);r.scroll=i.get("scroll","");t.onregion&&t.onregion(r);t.regionList.push({id:i.get("id"),region:r})}}function n(e){var i=new o;u(e,(function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",s(t));break}}),/[^\d]:/,/,/);t.ontimestampmap&&t.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}function c(e){if(e.match(/X-TIMESTAMP-MAP/)){u(e,(function(e,t){switch(e){case"X-TIMESTAMP-MAP":n(t);break}}),/=/)}else{u(e,(function(e,t){switch(e){case"Region":r(t);break}}),/:/)}}try{var f;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer)){return this}f=i();var h=f.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0]){throw new a(a.Errors.BadSignature)}t.state="HEADER"}var d=false;while(t.buffer){if(!/\r\n|\n/.test(t.buffer)){return this}if(!d){f=i()}else{d=false}switch(t.state){case"HEADER":if(/:/.test(f)){c(f)}else if(!f){t.state="ID"}continue;case"NOTE":if(!f){t.state="ID"}continue;case"ID":if(/^NOTE($|[ \t])/.test(f)){t.state="NOTE";break}if(!f){continue}t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}t.state="CUE";if(f.indexOf("--\x3e")===-1){t.cue.id=f;continue}case"CUE":try{l(f,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e);t.cue=null;t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var p=f.indexOf("--\x3e")!==-1;if(!f||p&&(d=true)){t.oncue&&t.oncue(t.cue);t.cue=null;t.state="ID";continue}if(t.cue.text){t.cue.text+="\n"}t.cue.text+=f.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":if(!f){t.state="ID"}continue}}}catch(e){t.reportOrThrowError(e);if(t.state==="CUETEXT"&&t.cue&&t.oncue){t.oncue(t.cue)}t.cue=null;t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{e.buffer+=e.decoder.decode();if(e.cue||e.state==="HEADER"){e.buffer+="\n\n";e.parse()}if(e.state==="INITIAL"){throw new a(a.Errors.BadSignature)}}catch(t){e.reportOrThrowError(t)}e.onflush&&e.onflush();return this}};e.exports=w},672:function(e,t,i){(function(t){var r=typeof t!=="undefined"?t:typeof window!=="undefined"?window:{};var n=i(673);var a;if(typeof document!=="undefined"){a=document}else{a=r["__GLOBAL_DOCUMENT_CACHE@4"];if(!a){a=r["__GLOBAL_DOCUMENT_CACHE@4"]=n}}e.exports=a}).call(this,i(24))},674:function(e,t){var i="auto";var r={"":1,lr:1,rl:1};var n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function a(e){if(typeof e!=="string"){return false}var t=r[e.toLowerCase()];return t?e.toLowerCase():false}function s(e){if(typeof e!=="string"){return false}var t=n[e.toLowerCase()];return t?e.toLowerCase():false}function o(e,t,r){this.hasBeenReset=false;var n="";var o=false;var u=e;var l=t;var c=r;var f=null;var h="";var d=true;var p="auto";var v="start";var m="auto";var g="auto";var y=100;var _="center";Object.defineProperties(this,{id:{enumerable:true,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:true,get:function(){return o},set:function(e){o=!!e}},startTime:{enumerable:true,get:function(){return u},set:function(e){if(typeof e!=="number"){throw new TypeError("Start time must be set to a number.")}u=e;this.hasBeenReset=true}},endTime:{enumerable:true,get:function(){return l},set:function(e){if(typeof e!=="number"){throw new TypeError("End time must be set to a number.")}l=e;this.hasBeenReset=true}},text:{enumerable:true,get:function(){return c},set:function(e){c=""+e;this.hasBeenReset=true}},region:{enumerable:true,get:function(){return f},set:function(e){f=e;this.hasBeenReset=true}},vertical:{enumerable:true,get:function(){return h},set:function(e){var t=a(e);if(t===false){throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.")}h=t;this.hasBeenReset=true}},snapToLines:{enumerable:true,get:function(){return d},set:function(e){d=!!e;this.hasBeenReset=true}},line:{enumerable:true,get:function(){return p},set:function(e){if(typeof e!=="number"&&e!==i){throw new SyntaxError("Line: an invalid number or illegal string was specified.")}p=e;this.hasBeenReset=true}},lineAlign:{enumerable:true,get:function(){return v},set:function(e){var t=s(e);if(!t){console.warn("lineAlign: an invalid or illegal string was specified.")}else{v=t;this.hasBeenReset=true}}},position:{enumerable:true,get:function(){return m},set:function(e){if(e<0||e>100){throw new Error("Position must be between 0 and 100.")}m=e;this.hasBeenReset=true}},positionAlign:{enumerable:true,get:function(){return g},set:function(e){var t=s(e);if(!t){console.warn("positionAlign: an invalid or illegal string was specified.")}else{g=t;this.hasBeenReset=true}}},size:{enumerable:true,get:function(){return y},set:function(e){if(e<0||e>100){throw new Error("Size must be between 0 and 100.")}y=e;this.hasBeenReset=true}},align:{enumerable:true,get:function(){return _},set:function(e){var t=s(e);if(!t){throw new SyntaxError("align: an invalid or illegal alignment string was specified.")}_=t;this.hasBeenReset=true}}});this.displayState=undefined}o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};e.exports=o},675:function(e,t){var i={"":true,up:true};function r(e){if(typeof e!=="string"){return false}var t=i[e.toLowerCase()];return t?e.toLowerCase():false}function n(e){return typeof e==="number"&&(e>=0&&e<=100)}function a(){var e=100;var t=3;var i=0;var a=100;var s=0;var o=100;var u="";Object.defineProperties(this,{width:{enumerable:true,get:function(){return e},set:function(t){if(!n(t)){throw new Error("Width must be between 0 and 100.")}e=t}},lines:{enumerable:true,get:function(){return t},set:function(e){if(typeof e!=="number"){throw new TypeError("Lines must be set to a number.")}t=e}},regionAnchorY:{enumerable:true,get:function(){return a},set:function(e){if(!n(e)){throw new Error("RegionAnchorX must be between 0 and 100.")}a=e}},regionAnchorX:{enumerable:true,get:function(){return i},set:function(e){if(!n(e)){throw new Error("RegionAnchorY must be between 0 and 100.")}i=e}},viewportAnchorY:{enumerable:true,get:function(){return o},set:function(e){if(!n(e)){throw new Error("ViewportAnchorY must be between 0 and 100.")}o=e}},viewportAnchorX:{enumerable:true,get:function(){return s},set:function(e){if(!n(e)){throw new Error("ViewportAnchorX must be between 0 and 100.")}s=e}},scroll:{enumerable:true,get:function(){return u},set:function(e){var t=r(e);if(t===false){console.warn("Scroll: an invalid or illegal string was specified.")}else{u=t}}}})}e.exports=a},676:function(e,t,i){var r=i(561);var n=i(677);function a(t,i,s){if(n()){e.exports=a=Reflect.construct}else{e.exports=a=function e(t,i,n){var a=[null];a.push.apply(a,i);var s=Function.bind.apply(t,a);var o=new s;if(n)r(o,n.prototype);return o}}return a.apply(null,arguments)}e.exports=a},677:function(e,t){function i(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}e.exports=i},678:function(e,t,i){var r=i(561);function n(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)r(e,t)}e.exports=n},679:function(e,t,i){"use strict";function r(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var n=r(i(562));var a=r(i(477));var s=function e(t,i){if(/^[a-z]+:/i.test(i)){return i}if(!/\/\//i.test(t)){t=n.buildAbsoluteURL(a.location&&a.location.href||"",t)}return n.buildAbsoluteURL(t,i)};e.exports=s},680:function(e,t,i){"use strict";(function(t){function r(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var n=r(i(477));var a=function e(i){return n.atob?n.atob(i):t.from(i,"base64").toString("binary")};function s(e){var t=a(e);var i=new Uint8Array(t.length);for(var r=0;r<t.length;r++){i[r]=t.charCodeAt(r)}return i}e.exports=s}).call(this,i(94).Buffer)},681:function(e,t,i){function r(e){this.options=e||{locator:{}}}r.prototype.parseFromString=function(e,t){var i=this.options;var r=new c;var s=i.domBuilder||new a;var o=i.errorHandler;var u=i.locator;var l=i.xmlns||{};var f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};if(u){s.setDocumentLocator(u)}r.errorHandler=n(o,s,u);r.domBuilder=i.domBuilder||s;if(/\/x?html?$/.test(t)){f.nbsp=" ";f.copy="©";l[""]="http://www.w3.org/1999/xhtml"}l.xml=l.xml||"http://www.w3.org/XML/1998/namespace";if(e){r.parse(e,l,f)}else{r.errorHandler.error("invalid doc source")}return s.doc};function n(e,t,i){if(!e){if(t instanceof a){return t}e=t}var r={};var n=e instanceof Function;i=i||{};function s(t){var a=e[t];if(!a&&n){a=e.length==2?function(i){e(t,i)}:e}r[t]=a&&function(e){a("[xmldom "+t+"]\t"+e+o(i))}||function(){}}s("warning");s("error");s("fatalError");return r}function a(){this.cdata=false}function s(e,t){t.lineNumber=e.lineNumber;t.columnNumber=e.columnNumber}a.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null);if(this.locator){this.doc.documentURI=this.locator.systemId}},startElement:function(e,t,i,r){var n=this.doc;var a=n.createElementNS(e,i||t);var o=r.length;l(this,a);this.currentElement=a;this.locator&&s(this.locator,a);for(var u=0;u<o;u++){var e=r.getURI(u);var c=r.getValue(u);var i=r.getQName(u);var f=n.createAttributeNS(e,i);this.locator&&s(r.getLocator(u),f);f.value=f.nodeValue=c;a.setAttributeNode(f)}},endElement:function(e,t,i){var r=this.currentElement;var n=r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&s(this.locator,i);l(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){e=u.apply(this,arguments);if(e){if(this.cdata){var r=this.doc.createCDATASection(e)}else{var r=this.doc.createTextNode(e)}if(this.currentElement){this.currentElement.appendChild(r)}else if(/^\s*$/.test(e)){this.doc.appendChild(r)}this.locator&&s(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){if(this.locator=e){e.lineNumber=0}},comment:function(e,t,i){e=u.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&s(this.locator,r);l(this,r)},startCDATA:function(){this.cdata=true},endCDATA:function(){this.cdata=false},startDTD:function(e,t,i){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(e,t,i);this.locator&&s(this.locator,n);l(this,n)}},warning:function(e){console.warn("[xmldom warning]\t"+e,o(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,o(this.locator))},fatalError:function(e){console.error("[xmldom fatalError]\t"+e,o(this.locator));throw e}};function o(e){if(e){return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}}function u(e,t,i){if(typeof e=="string"){return e.substr(t,i)}else{if(e.length>=t+i||t){return new java.lang.String(e,t,i)+""}return e}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){a.prototype[e]=function(){return null}}));function l(e,t){if(!e.currentElement){e.doc.appendChild(t)}else{e.currentElement.appendChild(t)}}var c=i(682).XMLReader;var f=t.DOMImplementation=i(563).DOMImplementation;t.XMLSerializer=i(563).XMLSerializer;t.DOMParser=r},682:function(e,t){var i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var r=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");var n=new RegExp("^"+i.source+r.source+"*(?::"+i.source+r.source+"*)?$");var a=0;var s=1;var o=2;var u=3;var l=4;var c=5;var f=6;var h=7;function d(){}d.prototype={parse:function(e,t,i){var r=this.domBuilder;r.startDocument();b(t,t={});p(e,t,i,r,this.errorHandler);r.endDocument()}};function p(e,t,i,r,n){function a(e){if(e>65535){e-=65536;var t=55296+(e>>10),i=56320+(e&1023);return String.fromCharCode(t,i)}else{return String.fromCharCode(e)}}function s(e){var t=e.slice(1,-1);if(t in i){return i[t]}else if(t.charAt(0)==="#"){return a(parseInt(t.substr(1).replace("x","0x")))}else{n.error("entity not found:"+e);return e}}function o(t){if(t>b){var i=e.substring(b,t).replace(/&#?\w+;/g,s);h&&u(b);r.characters(i,0,t-b);b=t}}function u(t,i){while(t>=c&&(i=f.exec(e))){l=i.index;c=l+i[0].length;h.lineNumber++}h.columnNumber=t-l+1}var l=0;var c=0;var f=/.*(?:\r\n?|\n)|.*$/g;var h=r.locator;var d=[{currentNSMap:t}];var p={};var b=0;while(true){try{var w=e.indexOf("<",b);if(w<0){if(!e.substr(b).match(/^\s*$/)){var C=r.doc;var E=C.createTextNode(e.substr(b));C.appendChild(E);r.currentElement=E}return}if(w>b){o(w)}switch(e.charAt(w+1)){case"/":var I=e.indexOf(">",w+3);var A=e.substring(w+2,I);var x=d.pop();if(I<0){A=e.substring(w+2).replace(/[\s<].*/,"");n.error("end tag name: "+A+" is not complete:"+x.tagName);I=w+1+A.length}else if(A.match(/\s</)){A=A.replace(/[\s<].*/,"");n.error("end tag name: "+A+" maybe not complete");I=w+1+A.length}var P=x.localNSMap;var L=x.tagName==A;var D=L||x.tagName&&x.tagName.toLowerCase()==A.toLowerCase();if(D){r.endElement(x.uri,x.localName,A);if(P){for(var O in P){r.endPrefixMapping(O)}}if(!L){n.fatalError("end tag name: "+A+" is not match the current start tagName:"+x.tagName)}}else{d.push(x)}I++;break;case"?":h&&u(w);I=S(e,w,r);break;case"!":h&&u(w);I=T(e,w,r,n);break;default:h&&u(w);var N=new k;var R=d[d.length-1].currentNSMap;var I=m(e,w,N,R,s,n);var U=N.length;if(!N.closed&&_(e,I,N.tagName,p)){N.closed=true;if(!i.nbsp){n.warning("unclosed xml attribute")}}if(h&&U){var M=v(h,{});for(var B=0;B<U;B++){var j=N[B];u(j.offset);j.locator=v(h,{})}r.locator=M;if(g(N,r,R)){d.push(N)}r.locator=h}else{if(g(N,r,R)){d.push(N)}}if(N.uri==="http://www.w3.org/1999/xhtml"&&!N.closed){I=y(e,I,N.tagName,s,r)}else{I++}}}catch(e){n.error("element parse error: "+e);I=-1}if(I>b){b=I}else{o(Math.max(w,b)+1)}}}function v(e,t){t.lineNumber=e.lineNumber;t.columnNumber=e.columnNumber;return t}function m(e,t,i,r,n,d){var p;var v;var m=++t;var g=a;while(true){var y=e.charAt(m);switch(y){case"=":if(g===s){p=e.slice(t,m);g=u}else if(g===o){g=u}else{throw new Error("attribute equal must after attrName")}break;case"'":case'"':if(g===u||g===s){if(g===s){d.warning('attribute value must after "="');p=e.slice(t,m)}t=m+1;m=e.indexOf(y,t);if(m>0){v=e.slice(t,m).replace(/&#?\w+;/g,n);i.add(p,v,t-1);g=c}else{throw new Error("attribute value no end '"+y+"' match")}}else if(g==l){v=e.slice(t,m).replace(/&#?\w+;/g,n);i.add(p,v,t);d.warning('attribute "'+p+'" missed start quot('+y+")!!");t=m+1;g=c}else{throw new Error('attribute value must after "="')}break;case"/":switch(g){case a:i.setTagName(e.slice(t,m));case c:case f:case h:g=h;i.closed=true;case l:case s:case o:break;default:throw new Error("attribute invalid close char('/')")}break;case"":d.error("unexpected end of input");if(g==a){i.setTagName(e.slice(t,m))}return m;case">":switch(g){case a:i.setTagName(e.slice(t,m));case c:case f:case h:break;case l:case s:v=e.slice(t,m);if(v.slice(-1)==="/"){i.closed=true;v=v.slice(0,-1)}case o:if(g===o){v=p}if(g==l){d.warning('attribute "'+v+'" missed quot(")!!');i.add(p,v.replace(/&#?\w+;/g,n),t)}else{if(r[""]!=="http://www.w3.org/1999/xhtml"||!v.match(/^(?:disabled|checked|selected)$/i)){d.warning('attribute "'+v+'" missed value!! "'+v+'" instead!!')}i.add(v,v,t)}break;case u:throw new Error("attribute value missed!!")}return m;case"":y=" ";default:if(y<=" "){switch(g){case a:i.setTagName(e.slice(t,m));g=f;break;case s:p=e.slice(t,m);g=o;break;case l:var v=e.slice(t,m).replace(/&#?\w+;/g,n);d.warning('attribute "'+v+'" missed quot(")!!');i.add(p,v,t);case c:g=f;break}}else{switch(g){case o:var _=i.tagName;if(r[""]!=="http://www.w3.org/1999/xhtml"||!p.match(/^(?:disabled|checked|selected)$/i)){d.warning('attribute "'+p+'" missed value!! "'+p+'" instead2!!')}i.add(p,p,t);t=m;g=s;break;case c:d.warning('attribute space is required"'+p+'"!!');case f:g=s;t=m;break;case u:g=l;t=m;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}}m++}}function g(e,t,i){var r=e.tagName;var n=null;var a=e.length;while(a--){var s=e[a];var o=s.qName;var u=s.value;var l=o.indexOf(":");if(l>0){var c=s.prefix=o.slice(0,l);var f=o.slice(l+1);var h=c==="xmlns"&&f}else{f=o;c=null;h=o==="xmlns"&&""}s.localName=f;if(h!==false){if(n==null){n={};b(i,i={})}i[h]=n[h]=u;s.uri="http://www.w3.org/2000/xmlns/";t.startPrefixMapping(h,u)}}var a=e.length;while(a--){s=e[a];var c=s.prefix;if(c){if(c==="xml"){s.uri="http://www.w3.org/XML/1998/namespace"}if(c!=="xmlns"){s.uri=i[c||""]}}}var l=r.indexOf(":");if(l>0){c=e.prefix=r.slice(0,l);f=e.localName=r.slice(l+1)}else{c=null;f=e.localName=r}var d=e.uri=i[c||""];t.startElement(d,f,r,e);if(e.closed){t.endElement(d,f,r);if(n){for(c in n){t.endPrefixMapping(c)}}}else{e.currentNSMap=i;e.localNSMap=n;return true}}function y(e,t,i,r,n){if(/^(?:script|textarea)$/i.test(i)){var a=e.indexOf("</"+i+">",t);var s=e.substring(t+1,a);if(/[&<]/.test(s)){if(/^script$/i.test(i)){n.characters(s,0,s.length);return a}s=s.replace(/&#?\w+;/g,r);n.characters(s,0,s.length);return a}}return t+1}function _(e,t,i,r){var n=r[i];if(n==null){n=e.lastIndexOf("</"+i+">");if(n<t){n=e.lastIndexOf("</"+i)}r[i]=n}return n<t}function b(e,t){for(var i in e){t[i]=e[i]}}function T(e,t,i,r){var n=e.charAt(t+2);switch(n){case"-":if(e.charAt(t+3)==="-"){var a=e.indexOf("--\x3e",t+4);if(a>t){i.comment(e,t+4,a-t-4);return a+3}else{r.error("Unclosed comment");return-1}}else{return-1}default:if(e.substr(t+3,6)=="CDATA["){var a=e.indexOf("]]>",t+9);i.startCDATA();i.characters(e,t+9,a-t-9);i.endCDATA();return a+3}var s=C(e,t);var o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var u=s[1][0];var l=o>3&&/^public$/i.test(s[2][0])&&s[3][0];var c=o>4&&s[4][0];var f=s[o-1];i.startDTD(u,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2"));i.endDTD();return f.index+f[0].length}}return-1}function S(e,t,i){var r=e.indexOf("?>",t);if(r){var n=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){var a=n[0].length;i.processingInstruction(n[1],n[2]);return r+2}else{return-1}}return-1}function k(e){}k.prototype={setTagName:function(e){if(!n.test(e)){throw new Error("invalid tagName:"+e)}this.tagName=e},add:function(e,t,i){if(!n.test(e)){throw new Error("invalid attribute:"+e)}this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};function w(e,t){e.__proto__=t;return e}if(!(w({},w.prototype)instanceof w)){w=function(e,t){function i(){}i.prototype=t;i=new i;for(t in e){i[t]=e[t]}return i}}function C(e,t){var i;var r=[];var n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;n.lastIndex=t;n.exec(e);while(i=n.exec(e)){r.push(i);if(i[1])return r}}t.XMLReader=d},683:function(e,t,i){"use strict";var r=i(565).discardEmulationPreventionBytes;var n=i(684).CaptionStream;var a=i(564);var s=i(518);var o=function(e,t){var i=e;for(var r=0;r<t.length;r++){var n=t[r];if(i<n.size){return n}i-=n.size}return null};var u=function(e,t,i){var n=new DataView(e.buffer,e.byteOffset,e.byteLength),a=[],s,u,l,c;for(u=0;u+4<e.length;u+=l){l=n.getUint32(u);u+=4;if(l<=0){continue}switch(e[u]&31){case 6:var f=e.subarray(u+1,u+1+l);var h=o(u,t);s={nalUnitType:"sei_rbsp",size:l,data:f,escapedRBSP:r(f),trackId:i};if(h){s.pts=h.pts;s.dts=h.dts;c=h}else{s.pts=c.pts;s.dts=c.dts}a.push(s);break;default:break}}return a};var l=function(e,t,i){var r=t;var n=i.defaultSampleDuration||0;var a=i.defaultSampleSize||0;var o=i.trackId;var u=[];e.forEach((function(e){var t=s.parseTrun(e);var i=t.samples;i.forEach((function(e){if(e.duration===undefined){e.duration=n}if(e.size===undefined){e.size=a}e.trackId=o;e.dts=r;if(e.compositionTimeOffset===undefined){e.compositionTimeOffset=0}e.pts=r+e.compositionTimeOffset;r+=e.duration}));u=u.concat(i)}));return u};var c=function(e,t){var i=a.findBox(e,["moof","traf"]);var r=a.findBox(e,["mdat"]);var n={};var o=[];r.forEach((function(e,t){var r=i[t];o.push({mdat:e,traf:r})}));o.forEach((function(e){var i=e.mdat;var r=e.traf;var o=a.findBox(r,["tfhd"]);var c=s.parseTfhd(o[0]);var f=c.trackId;var h=a.findBox(r,["tfdt"]);var d=h.length>0?s.parseTfdt(h[0]).baseMediaDecodeTime:0;var p=a.findBox(r,["trun"]);var v;var m;if(t===f&&p.length>0){v=l(p,d,c);m=u(i,v,f);if(!n[f]){n[f]=[]}n[f]=n[f].concat(m)}}));return n};var f=function(e,t,i){var r;if(t===null){return null}r=c(e,t);return{seiNals:r[t],timescale:i}};var h=function(){var e=false;var t;var i;var r;var a;var s;var o;this.isInitialized=function(){return e};this.init=function(i){t=new n;e=true;o=i?i.isPartial:false;t.on("data",(function(e){e.startTime=e.startPts/a;e.endTime=e.endPts/a;s.captions.push(e);s.captionStreams[e.stream]=true}))};this.isNewInit=function(e,t){if(e&&e.length===0||t&&typeof t==="object"&&Object.keys(t).length===0){return false}return r!==e[0]||a!==t[r]};this.parse=function(e,t,n){var o;if(!this.isInitialized()){return null}else if(!t||!n){return null}else if(this.isNewInit(t,n)){r=t[0];a=n[r]}else if(r===null||!a){i.push(e);return null}while(i.length>0){var u=i.shift();this.parse(u,t,n)}o=f(e,r,a);if(o===null||!o.seiNals){return null}this.pushNals(o.seiNals);this.flushStream();return s};this.pushNals=function(e){if(!this.isInitialized()||!e||e.length===0){return null}e.forEach((function(e){t.push(e)}))};this.flushStream=function(){if(!this.isInitialized()){return null}if(!o){t.flush()}else{t.partialFlush()}};this.clearParsedCaptions=function(){s.captions=[];s.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}t.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){i=[];r=null;a=null;if(!s){s={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};e.exports=h},684:function(e,t,i){"use strict";var r=i(566);var n=i(565);var a=function(){a.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new f(0,0),new f(0,1),new f(1,0),new f(1,1)];this.reset();this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data"));e.on("partialdone",this.trigger.bind(this,"partialdone"));e.on("done",this.trigger.bind(this,"done"))}),this)};a.prototype=new r;a.prototype.push=function(e){var t,i,r;if(e.nalUnitType!=="sei_rbsp"){return}t=n.parseSei(e.escapedRBSP);if(t.payloadType!==n.USER_DATA_REGISTERED_ITU_T_T35){return}i=n.parseUserData(t);if(!i){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}r=n.parseCaptionPackets(e.pts,i);this.captionPackets_=this.captionPackets_.concat(r);if(this.latestDts_!==e.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=e.dts};a.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return e==="flush"?t.flush():t.partialFlush()}),this)};a.prototype.flushStream=function(e){if(!this.captionPackets_.length){this.flushCCStreams(e);return}this.captionPackets_.forEach((function(e,t){e.presortIndex=t}));this.captionPackets_.sort((function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts}));this.captionPackets_.forEach((function(e){if(e.type<2){this.dispatchCea608Packet(e)}}),this);this.captionPackets_.length=0;this.flushCCStreams(e)};a.prototype.flush=function(){return this.flushStream("flush")};a.prototype.partialFlush=function(){return this.flushStream("partialFlush")};a.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach((function(e){e.reset()}))};a.prototype.dispatchCea608Packet=function(e){if(this.setsTextOrXDSActive(e)){this.activeCea608Channel_[e.type]=null}else if(this.setsChannel1Active(e)){this.activeCea608Channel_[e.type]=0}else if(this.setsChannel2Active(e)){this.activeCea608Channel_[e.type]=1}if(this.activeCea608Channel_[e.type]===null){return}this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};a.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};a.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};a.prototype.setsTextOrXDSActive=function(e){return(e.ccData&28928)===256||(e.ccData&30974)===4138||(e.ccData&30974)===6186};var s={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var o=function(e){if(e===null){return""}e=s[e]||e;return String.fromCharCode(e)};var u=14;var l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var c=function(){var e=[],t=u+1;while(t--){e.push("")}return e};var f=function(e,t){f.prototype.init.call(this);this.field_=e||0;this.dataChannel_=t||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,i,r,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}r=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(e.pts);this.flushDisplayed(e.pts);i=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=i;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(e.pts)}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=c()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=c()}else if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(e.pts);this.displayed_=c()}this.mode_="paintOn";this.startPts_=e.pts}else if(this.isSpecialCharacter(r,n)){r=(r&3)<<8;a=o(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(r,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}r=(r&3)<<8;a=o(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(r,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(r,n)){this.column_+=n&3}else if(this.isPAC(r,n)){var s=l.indexOf(t&7968);if(this.mode_==="rollUp"){if(s-this.rollUpRows_+1<0){s=this.rollUpRows_-1}this.setRollUp(e.pts,s)}if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(r)){if(n===0){n=null}a=o(r);a+=o(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};f.prototype=new r;f.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){console.error("Skipping malformed caption.");return""}})).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};f.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=c();this.nonDisplayed_=c();this.lastControlCode_=null;this.column_=0;this.row_=u;this.rollUpRows_=2;this.formatting_=[]};f.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};f.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};f.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&(t>=32&&t<=63)};f.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&(t>=32&&t<=47)};f.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&(t>=33&&t<=35)};f.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&(t>=64&&t<=127)};f.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};f.prototype.isNormalChar=function(e){return e>=32&&e<=127};f.prototype.setRollUp=function(e,t){if(this.mode_!=="rollUp"){this.row_=u;this.mode_="rollUp";this.flushDisplayed(e);this.nonDisplayed_=c();this.displayed_=c()}if(t!==undefined&&t!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[t-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]=""}}if(t===undefined){t=this.row_}this.topRow_=t-this.rollUpRows_+1};f.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,i)};f.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[];this[this.mode_](e,t)};f.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t;this.nonDisplayed_[this.row_]=i};f.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};f.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.row_+1;e<u+1;e++){this.displayed_[e]=""}for(e=this.topRow_;e<this.row_;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[this.row_]=""};f.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};e.exports={CaptionStream:a,Cea608Stream:f}},685:function(e,t,i){"use strict";var r=i(567);var n=i(686).handleRollover;var a={};a.ts=i(687);a.aac=i(688);var s=i(689).ONE_SECOND_IN_TS;var o=188,u=71;var l=function(e,t){var i=0,r=o,n,s;while(r<e.byteLength){if(e[i]===u&&e[r]===u){n=e.subarray(i,r);s=a.ts.parseType(n,t.pid);switch(s){case"pat":if(!t.pid){t.pid=a.ts.parsePat(n)}break;case"pmt":if(!t.table){t.table=a.ts.parsePmt(n)}break;default:break}if(t.pid&&t.table){return}i+=o;r+=o;continue}i++;r++}};var c=function(e,t,i){var r=0,n=o,s,l,c,f,h;var d=false;while(n<=e.byteLength){if(e[r]===u&&(e[n]===u||n===e.byteLength)){s=e.subarray(r,n);l=a.ts.parseType(s,t.pid);switch(l){case"pes":c=a.ts.parsePesType(s,t.table);f=a.ts.parsePayloadUnitStartIndicator(s);if(c==="audio"&&f){h=a.ts.parsePesTime(s);if(h){h.type="audio";i.audio.push(h);d=true}}break;default:break}if(d){break}r+=o;n+=o;continue}r++;n++}n=e.byteLength;r=n-o;d=false;while(r>=0){if(e[r]===u&&(e[n]===u||n===e.byteLength)){s=e.subarray(r,n);l=a.ts.parseType(s,t.pid);switch(l){case"pes":c=a.ts.parsePesType(s,t.table);f=a.ts.parsePayloadUnitStartIndicator(s);if(c==="audio"&&f){h=a.ts.parsePesTime(s);if(h){h.type="audio";i.audio.push(h);d=true}}break;default:break}if(d){break}r-=o;n-=o;continue}r--;n--}};var f=function(e,t,i){var r=0,n=o,s,l,c,f,h,d,p,v;var m=false;var g={data:[],size:0};while(n<e.byteLength){if(e[r]===u&&e[n]===u){s=e.subarray(r,n);l=a.ts.parseType(s,t.pid);switch(l){case"pes":c=a.ts.parsePesType(s,t.table);f=a.ts.parsePayloadUnitStartIndicator(s);if(c==="video"){if(f&&!m){h=a.ts.parsePesTime(s);if(h){h.type="video";i.video.push(h);m=true}}if(!i.firstKeyFrame){if(f){if(g.size!==0){d=new Uint8Array(g.size);p=0;while(g.data.length){v=g.data.shift();d.set(v,p);p+=v.byteLength}if(a.ts.videoPacketContainsKeyFrame(d)){var y=a.ts.parsePesTime(d);if(y){i.firstKeyFrame=y;i.firstKeyFrame.type="video"}else{console.warn("Failed to extract PTS/DTS from PES at first keyframe. "+"This could be an unusual TS segment, or else mux.js did not "+"parse your TS segment correctly. If you know your TS "+"segments do contain PTS/DTS on keyframes please file a bug "+"report! You can try ffprobe to double check for yourself.")}}g.size=0}}g.data.push(s);g.size+=s.byteLength}}break;default:break}if(m&&i.firstKeyFrame){break}r+=o;n+=o;continue}r++;n++}n=e.byteLength;r=n-o;m=false;while(r>=0){if(e[r]===u&&e[n]===u){s=e.subarray(r,n);l=a.ts.parseType(s,t.pid);switch(l){case"pes":c=a.ts.parsePesType(s,t.table);f=a.ts.parsePayloadUnitStartIndicator(s);if(c==="video"&&f){h=a.ts.parsePesTime(s);if(h){h.type="video";i.video.push(h);m=true}}break;default:break}if(m){break}r-=o;n-=o;continue}r--;n--}};var h=function(e,t){if(e.audio&&e.audio.length){var i=t;if(typeof i==="undefined"){i=e.audio[0].dts}e.audio.forEach((function(e){e.dts=n(e.dts,i);e.pts=n(e.pts,i);e.dtsTime=e.dts/s;e.ptsTime=e.pts/s}))}if(e.video&&e.video.length){var r=t;if(typeof r==="undefined"){r=e.video[0].dts}e.video.forEach((function(e){e.dts=n(e.dts,r);e.pts=n(e.pts,r);e.dtsTime=e.dts/s;e.ptsTime=e.pts/s}));if(e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=n(a.dts,r);a.pts=n(a.pts,r);a.dtsTime=a.dts/s;a.ptsTime=a.dts/s}}};var d=function(e){var t=false,i=0,r=null,n=null,o=0,u=0,l;while(e.length-u>=3){var c=a.aac.parseType(e,u);switch(c){case"timed-metadata":if(e.length-u<10){t=true;break}o=a.aac.parseId3TagSize(e,u);if(o>e.length){t=true;break}if(n===null){l=e.subarray(u,u+o);n=a.aac.parseAacTimestamp(l)}u+=o;break;case"audio":if(e.length-u<7){t=true;break}o=a.aac.parseAdtsSize(e,u);if(o>e.length){t=true;break}if(r===null){l=e.subarray(u,u+o);r=a.aac.parseSampleRate(l)}i++;u+=o;break;default:u++;break}if(t){return null}}if(r===null||n===null){return null}var f=s/r;var h={audio:[{type:"audio",dts:n,pts:n},{type:"audio",dts:n+i*1024*f,pts:n+i*1024*f}]};return h};var p=function(e){var t={pid:null,table:null};var i={};l(e,t);for(var n in t.table){if(t.table.hasOwnProperty(n)){var a=t.table[n];switch(a){case r.H264_STREAM_TYPE:i.video=[];f(e,t,i);if(i.video.length===0){delete i.video}break;case r.ADTS_STREAM_TYPE:i.audio=[];c(e,t,i);if(i.audio.length===0){delete i.audio}break;default:break}}}return i};var v=function(e,t){var i=a.aac.isLikelyAacData(e);var r;if(i){r=d(e)}else{r=p(e)}if(!r||!r.audio&&!r.video){return null}h(r,t);return r};e.exports={inspect:v,parseAudioPes_:c}},686:function(e,t,i){"use strict";var r=i(566);var n=8589934592;var a=4294967296;var s="shared";var o=function(e,t){var i=1;if(e>t){i=-1}while(Math.abs(t-e)>a){e+=i*n}return e};var u=function(e){var t,i;u.prototype.init.call(this);this.type_=e||s;this.push=function(e){if(this.type_!==s&&e.type!==this.type_){return}if(i===undefined){i=e.dts}e.dts=o(e.dts,i);e.pts=o(e.pts,i);t=e.dts;this.trigger("data",e)};this.flush=function(){i=t;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){i=void 0;t=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};u.prototype=new r;e.exports={TimestampRolloverStream:u,handleRollover:o}},687:function(e,t,i){"use strict";var r=i(567);var n=function(e){var t=e[1]&31;t<<=8;t|=e[2];return t};var a=function(e){return!!(e[1]&64)};var s=function(e){var t=0;if((e[3]&48)>>>4>1){t+=e[4]+1}return t};var o=function(e,t){var i=n(e);if(i===0){return"pat"}else if(i===t){return"pmt"}else if(t){return"pes"}return null};var u=function(e){var t=a(e);var i=4+s(e);if(t){i+=e[i]+1}return(e[i+10]&31)<<8|e[i+11]};var l=function(e){var t={};var i=a(e);var r=4+s(e);if(i){r+=e[r]+1}if(!(e[r+5]&1)){return}var n,o,u;n=(e[r+1]&15)<<8|e[r+2];o=3+n-4;u=(e[r+10]&15)<<8|e[r+11];var l=12+u;while(l<o){var c=r+l;t[(e[c+1]&31)<<8|e[c+2]]=e[c];l+=((e[c+3]&15)<<8|e[c+4])+5}return t};var c=function(e,t){var i=n(e);var a=t[i];switch(a){case r.H264_STREAM_TYPE:return"video";case r.ADTS_STREAM_TYPE:return"audio";case r.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var f=function(e){var t=a(e);if(!t){return null}var i=4+s(e);if(i>=e.byteLength){return null}var r=null;var n;n=e[i+7];if(n&192){r={};r.pts=(e[i+9]&14)<<27|(e[i+10]&255)<<20|(e[i+11]&254)<<12|(e[i+12]&255)<<5|(e[i+13]&254)>>>3;r.pts*=4;r.pts+=(e[i+13]&6)>>>1;r.dts=r.pts;if(n&64){r.dts=(e[i+14]&14)<<27|(e[i+15]&255)<<20|(e[i+16]&254)<<12|(e[i+17]&255)<<5|(e[i+18]&254)>>>3;r.dts*=4;r.dts+=(e[i+18]&6)>>>1}}return r};var h=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var d=function(e){var t=4+s(e);var i=e.subarray(t);var r=0;var n=0;var a=false;var o;for(;n<i.byteLength-3;n++){if(i[n+2]===1){r=n+5;break}}while(r<i.byteLength){switch(i[r]){case 0:if(i[r-1]!==0){r+=2;break}else if(i[r-2]!==0){r++;break}if(n+3!==r-2){o=h(i[n+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){a=true}}do{r++}while(i[r]!==1&&r<i.length);n=r-2;r+=3;break;case 1:if(i[r-1]!==0||i[r-2]!==0){r+=3;break}o=h(i[n+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){a=true}n=r-2;r+=3;break;default:r+=3;break}}i=i.subarray(n);r-=n;n=0;if(i&&i.byteLength>3){o=h(i[n+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){a=true}}return a};e.exports={parseType:o,parsePat:u,parsePmt:l,parsePayloadUnitStartIndicator:a,parsePesType:c,parsePesTime:f,videoPacketContainsKeyFrame:d}},688:function(e,t,i){"use strict";var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var n=function(e){if(e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)){return true}return false};var a=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};var s=function(e,t,i){var r,n="";for(r=t;r<i;r++){n+="%"+("00"+e[r].toString(16)).slice(-2)}return n};var o=function(e,t,i){return unescape(s(e,t,i))};var u=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=e[t+5],n=(r&16)>>4;if(n){return i+20}return i+10};var l=function(e,t){var i=(e[t+5]&224)>>5,r=e[t+4]<<3,n=e[t+3]&3<<11;return n|r|i};var c=function(e,t){if(e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(e[t]&255===255&&(e[t+1]&240)===240){return"audio"}return null};var f=function(e){var t=0;while(t+5<e.length){if(e[t]!==255||(e[t+1]&246)!==240){t++;continue}return r[(e[t+2]&60)>>>2]}return null};var h=function(e){var t,i,r,n;t=10;if(e[5]&64){t+=4;t+=a(e.subarray(10,14))}do{i=a(e.subarray(t+4,t+8));if(i<1){return null}n=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]);if(n==="PRIV"){r=e.subarray(t+10,t+i+10);for(var s=0;s<r.byteLength;s++){if(r[s]===0){var u=o(r,0,s);if(u==="com.apple.streaming.transportStreamTimestamp"){var l=r.subarray(s+1);var c=(l[3]&1)<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;c*=4;c+=l[7]&3;return c}break}}}t+=10;t+=i}while(t<e.byteLength);return null};e.exports={isLikelyAacData:n,parseId3TagSize:u,parseAdtsSize:l,parseType:c,parseSampleRate:f,parseAacTimestamp:h}},689:function(e,t){var i=9e4,r,n,a,s,o,u,l;r=function(e){return e*i};n=function(e,t){return e*t};a=function(e){return e/i};s=function(e,t){return e/t};o=function(e,t){return r(s(e,t))};u=function(e,t){return n(a(e),t)};l=function(e,t,i){return a(i?e:e-t)};e.exports={ONE_SECOND_IN_TS:i,secondsToVideoTs:r,secondsToAudioTs:n,videoTsToSeconds:a,audioTsToSeconds:s,audioTsToVideoTs:o,videoTsToAudioTs:u,metadataTsToSeconds:l}},986:function(e,t,i){"use strict";var r=i(659);var n=i.n(r);var a=i(660);var s=i.n(a);var o=i(559);var u=i.n(o);var l=i(560);var c=i.n(l);var f=i(662);var h=i(664);var d=i(665);var p=i.n(d);var v=i(666);var m=i.n(v);var g=i(667);var y=i.n(g);var _=i(668);var b=i.n(_);var T=i(670);var S=i.n(T);var k=i(676);var w=i.n(k);var C=i(678);var E=i.n(C);var I=i(562);var A=i.n(I);var x=i(477);var P=i.n(x);function L(){L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i){if(Object.prototype.hasOwnProperty.call(i,r)){e[r]=i[r]}}}return e};return L.apply(this,arguments)}function D(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function O(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var N=function(){function e(){this.listeners={}}var t=e.prototype;t.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(i)};t.off=function e(t,i){if(!this.listeners[t]){return false}var r=this.listeners[t].indexOf(i);this.listeners[t].splice(r,1);return r>-1};t.trigger=function e(t){var i=this.listeners[t];var r;var n;var a;if(!i){return}if(arguments.length===2){n=i.length;for(r=0;r<n;++r){i[r].call(this,arguments[1])}}else{a=Array.prototype.slice.call(arguments,1);n=i.length;for(r=0;r<n;++r){i[r].apply(this,a)}}};t.dispose=function e(){this.listeners={}};t.pipe=function e(t){this.on("data",(function(e){t.push(e)}))};return e}();var R=function(e){D(t,e);function t(){var t;t=e.call(this)||this;t.buffer="";return t}var i=t.prototype;i.push=function e(t){var i;this.buffer+=t;i=this.buffer.indexOf("\n");for(;i>-1;i=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,i));this.buffer=this.buffer.substring(i+1)}};return t}(N);var U=function e(){var t="[^=]*";var i='"[^"]*"|[^,]*';var r="(?:"+t+")=(?:"+i+")";return new RegExp("(?:^|,)("+r+")")};var M=function e(t){var i=t.split(U());var r={};var n=i.length;var a;while(n--){if(i[n]===""){continue}a=/([^=]*)=(.*)/.exec(i[n]).slice(1);a[0]=a[0].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1");r[a[0]]=a[1]}return r};var B=function(e){D(t,e);function t(){var t;t=e.call(this)||this;t.customParsers=[];t.tagMappers=[];return t}var i=t.prototype;i.push=function e(t){var i=this;var r;var n;t=t.trim();if(t.length===0){return}if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}var a=this.tagMappers.reduce((function(e,i){var r=i(t);if(r===t){return e}return e.concat([r])}),[t]);a.forEach((function(e){for(var t=0;t<i.customParsers.length;t++){if(i.customParsers[t].call(i,e)){return}}if(e.indexOf("#EXT")!==0){i.trigger("data",{type:"comment",text:e.slice(1)});return}e=e.replace("\r","");r=/^#EXTM3U/.exec(e);if(r){i.trigger("data",{type:"tag",tagType:"m3u"});return}r=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"inf"};if(r[1]){n.duration=parseFloat(r[1])}if(r[2]){n.title=r[2]}i.trigger("data",n);return}r=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"targetduration"};if(r[1]){n.duration=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"totalduration"};if(r[1]){n.duration=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"version"};if(r[1]){n.version=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"media-sequence"};if(r[1]){n.number=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"discontinuity-sequence"};if(r[1]){n.number=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"playlist-type"};if(r[1]){n.playlistType=r[1]}i.trigger("data",n);return}r=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"byterange"};if(r[1]){n.length=parseInt(r[1],10)}if(r[2]){n.offset=parseInt(r[2],10)}i.trigger("data",n);return}r=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e);if(r){n={type:"tag",tagType:"allow-cache"};if(r[1]){n.allowed=!/NO/.test(r[1])}i.trigger("data",n);return}r=/^#EXT-X-MAP:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"map"};if(r[1]){var a=M(r[1]);if(a.URI){n.uri=a.URI}if(a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],u=s[1];n.byterange={};if(o){n.byterange.length=parseInt(o,10)}if(u){n.byterange.offset=parseInt(u,10)}}}i.trigger("data",n);return}r=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"stream-inf"};if(r[1]){n.attributes=M(r[1]);if(n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION.split("x");var c={};if(l[0]){c.width=parseInt(l[0],10)}if(l[1]){c.height=parseInt(l[1],10)}n.attributes.RESOLUTION=c}if(n.attributes.BANDWIDTH){n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)}if(n.attributes["PROGRAM-ID"]){n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10)}}i.trigger("data",n);return}r=/^#EXT-X-MEDIA:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"media"};if(r[1]){n.attributes=M(r[1])}i.trigger("data",n);return}r=/^#EXT-X-ENDLIST/.exec(e);if(r){i.trigger("data",{type:"tag",tagType:"endlist"});return}r=/^#EXT-X-DISCONTINUITY/.exec(e);if(r){i.trigger("data",{type:"tag",tagType:"discontinuity"});return}r=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"program-date-time"};if(r[1]){n.dateTimeString=r[1];n.dateTimeObject=new Date(r[1])}i.trigger("data",n);return}r=/^#EXT-X-KEY:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"key"};if(r[1]){n.attributes=M(r[1]);if(n.attributes.IV){if(n.attributes.IV.substring(0,2).toLowerCase()==="0x"){n.attributes.IV=n.attributes.IV.substring(2)}n.attributes.IV=n.attributes.IV.match(/.{8}/g);n.attributes.IV[0]=parseInt(n.attributes.IV[0],16);n.attributes.IV[1]=parseInt(n.attributes.IV[1],16);n.attributes.IV[2]=parseInt(n.attributes.IV[2],16);n.attributes.IV[3]=parseInt(n.attributes.IV[3],16);n.attributes.IV=new Uint32Array(n.attributes.IV)}}i.trigger("data",n);return}r=/^#EXT-X-START:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"start"};if(r[1]){n.attributes=M(r[1]);n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]);n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)}i.trigger("data",n);return}r=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"cue-out-cont"};if(r[1]){n.data=r[1]}else{n.data=""}i.trigger("data",n);return}r=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"cue-out"};if(r[1]){n.data=r[1]}else{n.data=""}i.trigger("data",n);return}r=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"cue-in"};if(r[1]){n.data=r[1]}else{n.data=""}i.trigger("data",n);return}i.trigger("data",{type:"tag",data:e.slice(4)})}))};i.addParser=function e(t){var i=this;var r=t.expression,n=t.customType,a=t.dataParser,s=t.segment;if(typeof a!=="function"){a=function e(t){return t}}this.customParsers.push((function(e){var t=r.exec(e);if(t){i.trigger("data",{type:"custom",data:a(e),customType:n,segment:s});return true}}))};i.addTagMapper=function e(t){var i=t.expression,r=t.map;var n=function e(t){if(i.test(t)){return r(t)}return t};this.tagMappers.push(n)};return t}(N);function j(e){var t=P.a.atob(e||"");var i=new Uint8Array(t.length);for(var r=0;r<t.length;r++){i[r]=t.charCodeAt(r)}return i}var F=function(e){D(t,e);function t(){var t;t=e.call(this)||this;t.lineStream=new R;t.parseStream=new B;t.lineStream.pipe(t.parseStream);var i=O(t);var r=[];var n={};var a;var s;var o=function e(){};var u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var l="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";var c=0;t.manifest={allowCache:true,discontinuityStarts:[],segments:[]};t.parseStream.on("data",(function(e){var t;var f;({tag:function h(){({"allow-cache":function t(){this.manifest.allowCache=e.allowed;if(!("allowed"in e)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function t(){var t={};if("length"in e){n.byterange=t;t.length=e.length;if(!("offset"in e)){this.trigger("info",{message:"defaulting offset to zero"});e.offset=0}}if("offset"in e){n.byterange=t;t.offset=e.offset}},endlist:function e(){this.manifest.endList=true},inf:function t(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(e.duration>0){n.duration=e.duration}if(e.duration===0){n.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=r},key:function t(){if(!e.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(e.attributes.METHOD==="NONE"){s=null;return}if(!e.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(e.attributes.KEYFORMAT===l){var i=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(i.indexOf(e.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(e.attributes.METHOD==="SAMPLE-AES-CENC"){this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"})}if(e.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(e.attributes.KEYID&&e.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:j(e.attributes.URI.split(",")[1])}};return}if(!e.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}s={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI};if(typeof e.attributes.IV!=="undefined"){s.iv=e.attributes.IV}},"media-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number});return}this.manifest.mediaSequence=e.number},"discontinuity-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number});return}this.manifest.discontinuitySequence=e.number;c=e.number},"playlist-type":function t(){if(!/VOD|EVENT/.test(e.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist});return}this.manifest.playlistType=e.playlistType},map:function t(){a={};if(e.uri){a.uri=e.uri}if(e.byterange){a.byterange=e.byterange}},"stream-inf":function t(){this.manifest.playlists=r;this.manifest.mediaGroups=this.manifest.mediaGroups||u;if(!e.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!n.attributes){n.attributes={}}L(n.attributes,e.attributes)},media:function i(){this.manifest.mediaGroups=this.manifest.mediaGroups||u;if(!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{};t=r[e.attributes["GROUP-ID"]];f={default:/yes/i.test(e.attributes.DEFAULT)};if(f.default){f.autoselect=true}else{f.autoselect=/yes/i.test(e.attributes.AUTOSELECT)}if(e.attributes.LANGUAGE){f.language=e.attributes.LANGUAGE}if(e.attributes.URI){f.uri=e.attributes.URI}if(e.attributes["INSTREAM-ID"]){f.instreamId=e.attributes["INSTREAM-ID"]}if(e.attributes.CHARACTERISTICS){f.characteristics=e.attributes.CHARACTERISTICS}if(e.attributes.FORCED){f.forced=/yes/i.test(e.attributes.FORCED)}t[e.attributes.NAME]=f},discontinuity:function e(){c+=1;n.discontinuity=true;this.manifest.discontinuityStarts.push(r.length)},"program-date-time":function t(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=e.dateTimeString;this.manifest.dateTimeObject=e.dateTimeObject}n.dateTimeString=e.dateTimeString;n.dateTimeObject=e.dateTimeObject},targetduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration});return}this.manifest.targetDuration=e.duration},totalduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration});return}this.manifest.totalDuration=e.duration},start:function t(){if(!e.attributes||isNaN(e.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}},"cue-out":function t(){n.cueOut=e.data},"cue-out-cont":function t(){n.cueOutCont=e.data},"cue-in":function t(){n.cueIn=e.data}}[e.tagType]||o).call(i)},uri:function t(){n.uri=e.uri;r.push(n);if(this.manifest.targetDuration&&!("duration"in n)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});n.duration=this.manifest.targetDuration}if(s){n.key=s}n.timeline=c;if(a){n.map=a}n={}},comment:function e(){},custom:function t(){if(e.segment){n.custom=n.custom||{};n.custom[e.customType]=e.data}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[e.customType]=e.data}}})[e.type].call(i)}));return t}var i=t.prototype;i.push=function e(t){this.lineStream.push(t)};i.end=function e(){this.lineStream.push("\n")};i.addParser=function e(t){this.parseStream.addParser(t)};i.addTagMapper=function e(t){this.parseStream.addTagMapper(t)};return t}(N);var H=i(679);var V=i.n(H);var q=i(680);var W=i.n(q);var z=i(681);var G="0.10.0";var X=function e(t){return!!t&&typeof t==="object"};var K=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}return i.reduce((function(t,i){Object.keys(i).forEach((function(r){if(Array.isArray(t[r])&&Array.isArray(i[r])){t[r]=t[r].concat(i[r])}else if(X(t[r])&&X(i[r])){t[r]=e(t[r],i[r])}else{t[r]=i[r]}}));return t}),{})};var Y=function e(t){return Object.keys(t).map((function(e){return t[e]}))};var $=function e(t,i){var r=[];for(var n=t;n<i;n++){r.push(n)}return r};var Q=function e(t){return t.reduce((function(e,t){return e.concat(t)}),[])};var J=function e(t){if(!t.length){return[]}var i=[];for(var r=0;r<t.length;r++){i.push(t[r])}return i};var Z=function e(t,i){return t.reduce((function(e,t,r){if(t[i]){e.push(r)}return e}),[])};var ee={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};var te=function e(t){var i=t.baseUrl,r=i===void 0?"":i,n=t.source,a=n===void 0?"":n,s=t.range,o=s===void 0?"":s,u=t.indexRange,l=u===void 0?"":u;var c={uri:a,resolvedUri:V()(r||"",a)};if(o||l){var f=o?o:l;var h=f.split("-");var d=parseInt(h[0],10);var p=parseInt(h[1],10);c.byterange={length:p-d+1,offset:d}}return c};var ie=function e(t){var i=t.offset+t.length-1;return t.offset+"-"+i};var re={static:function e(t){var i=t.duration,r=t.timescale,n=r===void 0?1:r,a=t.sourceDuration;return{start:0,end:Math.ceil(a/(i/n))}},dynamic:function e(t){var i=t.NOW,r=t.clientOffset,n=t.availabilityStartTime,a=t.timescale,s=a===void 0?1:a,o=t.duration,u=t.start,l=u===void 0?0:u,c=t.minimumUpdatePeriod,f=c===void 0?0:c,h=t.timeShiftBufferDepth,d=h===void 0?Infinity:h;var p=(i+r)/1e3;var v=n+l;var m=p+f;var g=m-v;var y=Math.ceil(g*s/o);var _=Math.floor((p-v-d)*s/o);var b=Math.floor((p-v)*s/o);return{start:Math.max(0,_),end:Math.min(y,b)}}};var ne=function e(t){return function(e,i){var r=t.duration,n=t.timescale,a=n===void 0?1:n,s=t.periodIndex,o=t.startNumber,u=o===void 0?1:o;return{number:u+e,duration:r/a,timeline:s,time:i*r}}};var ae=function e(t){var i=t.type,r=i===void 0?"static":i,n=t.duration,a=t.timescale,s=a===void 0?1:a,o=t.sourceDuration;var u=re[r](t),l=u.start,c=u.end;var f=$(l,c).map(ne(t));if(r==="static"){var h=f.length-1;f[h].duration=o-n/s*h}return f};var se=function e(t){var i=t.baseUrl,r=t.initialization,n=r===void 0?{}:r,a=t.sourceDuration,s=t.timescale,o=s===void 0?1:s,u=t.indexRange,l=u===void 0?"":u,c=t.duration;if(!i){throw new Error(ee.NO_BASE_URL)}var f=te({baseUrl:i,source:n.sourceURL,range:n.range});var h=te({baseUrl:i,source:i,indexRange:l});h.map=f;if(c){var d=ae(t);if(d.length){h.duration=d[0].duration;h.timeline=d[0].timeline}}else if(a){h.duration=a/o;h.timeline=0}h.number=0;return[h]};var oe=function e(t,i,r){var n=t.sidx.map?t.sidx.map:null;var a=t.sidx.duration;var s=t.timeline||0;var o=t.sidx.byterange;var u=o.offset+o.length;var l=i.timescale;var c=i.references.filter((function(e){return e.referenceType!==1}));var f=[];var h=u+i.firstOffset;for(var d=0;d<c.length;d++){var p=i.references[d];var v=p.referencedSize;var m=p.subsegmentDuration;var g=h+v-1;var y=h+"-"+g;var _={baseUrl:r,timescale:l,timeline:s,periodIndex:s,duration:m,sourceDuration:a,indexRange:y};var b=se(_)[0];if(n){b.map=n}f.push(b);h+=v}t.segments=f;return t};var ue=function e(t){var i=Y(t.reduce((function(e,t){var i=t.attributes.id+(t.attributes.lang||"");if(e[i]){var r;if(t.segments[0]){t.segments[0].discontinuity=true}(r=e[i].segments).push.apply(r,t.segments);if(t.attributes.contentProtection){e[i].attributes.contentProtection=t.attributes.contentProtection}}else{e[i]=t}return e}),{}));return i.map((function(e){e.discontinuityStarts=Z(e.segments,"discontinuity");return e}))};var le=function e(t,i){if(i===void 0){i={}}if(!Object.keys(i).length){return t}for(var r in t){var n=t[r];if(!n.sidx){continue}var a=n.sidx.uri+"-"+ie(n.sidx.byterange);var s=i[a]&&i[a].sidx;if(n.sidx&&s){oe(n,s,n.sidx.resolvedUri)}}return t};var ce=function e(t){var i;var r=t.attributes,n=t.segments,a=t.sidx;var s={attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};if(r.contentProtection){s.contentProtection=r.contentProtection}if(a){s.sidx=a}return s};var fe=function e(t){var i;var r=t.attributes,n=t.segments;if(typeof n==="undefined"){n=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}];r.duration=r.sourceDuration}return{attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1}};var he=function e(t,i){if(i===void 0){i={}}var r;var n=t.reduce((function(e,t){var n=t.attributes.role&&t.attributes.role.value||"";var a=t.attributes.lang||"";var s="main";if(a){var o=n?" ("+n+")":"";s=""+t.attributes.lang+o}if(e[s]&&e[s].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth){return e}e[s]={language:a,autoselect:true,default:n==="main",playlists:le([ce(t)],i),uri:""};if(typeof r==="undefined"&&n==="main"){r=t;r.default=true}return e}),{});if(!r){var a=Object.keys(n)[0];n[a].default=true}return n};var de=function e(t,i){if(i===void 0){i={}}return t.reduce((function(e,t){var r=t.attributes.lang||"text";if(e[r]){return e}e[r]={language:r,default:false,autoselect:false,playlists:le([fe(t)],i),uri:""};return e}),{})};var pe=function e(t){var i;var r=t.attributes,n=t.segments,a=t.sidx;var s={attributes:(i={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};if(r.contentProtection){s.contentProtection=r.contentProtection}if(a){s.sidx=a}return s};var ve=function e(t,i){var r;if(i===void 0){i={}}if(!t.length){return{}}var n=t[0].attributes,a=n.sourceDuration,s=n.type,o=s===void 0?"static":s,u=n.suggestedPresentationDelay,l=n.minimumUpdatePeriod,c=l===void 0?0:l;var f=function e(t){var i=t.attributes;return i.mimeType==="video/mp4"||i.contentType==="video"};var h=function e(t){var i=t.attributes;return i.mimeType==="audio/mp4"||i.contentType==="audio"};var d=function e(t){var i=t.attributes;return i.mimeType==="text/vtt"||i.contentType==="text"};var p=ue(t.filter(f)).map(pe);var v=ue(t.filter(h));var m=t.filter(d);var g={allowCache:true,discontinuityStarts:[],segments:[],endList:true,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:a,playlists:le(p,i),minimumUpdatePeriod:c*1e3};if(o==="dynamic"){g.suggestedPresentationDelay=u}if(v.length){g.mediaGroups.AUDIO.audio=he(v,i)}if(m.length){g.mediaGroups.SUBTITLES.subs=de(m,i)}return g};var me=function e(t,i,r){var n=t.NOW,a=t.clientOffset,s=t.availabilityStartTime,o=t.timescale,u=o===void 0?1:o,l=t.start,c=l===void 0?0:l,f=t.minimumUpdatePeriod,h=f===void 0?0:f;var d=(n+a)/1e3;var p=s+c;var v=d+h;var m=v-p;return Math.ceil((m*u-i)/r)};var ge=function e(t,i){var r=t.type,n=r===void 0?"static":r,a=t.minimumUpdatePeriod,s=a===void 0?0:a,o=t.media,u=o===void 0?"":o,l=t.sourceDuration,c=t.timescale,f=c===void 0?1:c,h=t.startNumber,d=h===void 0?1:h,p=t.periodIndex;var v=[];var m=-1;for(var g=0;g<i.length;g++){var y=i[g];var _=y.d;var b=y.r||0;var T=y.t||0;if(m<0){m=T}if(T&&T>m){m=T}var S=void 0;if(b<0){var k=g+1;if(k===i.length){if(n==="dynamic"&&s>0&&u.indexOf("$Number$")>0){S=me(t,m,_)}else{S=(l*f-m)/_}}else{S=(i[k].t-m)/_}}else{S=b+1}var w=d+v.length+S;var C=d+v.length;while(C<w){v.push({number:C,duration:_/f,time:m,timeline:p});m+=_;C++}}return v};var ye=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;var _e=function e(t){return function(e,i,r,n){if(e==="$$"){return"$"}if(typeof t[i]==="undefined"){return e}var a=""+t[i];if(i==="RepresentationID"){return a}if(!r){n=1}else{n=parseInt(n,10)}if(a.length>=n){return a}return""+new Array(n-a.length+1).join("0")+a}};var be=function e(t,i){return t.replace(ye,_e(i))};var Te=function e(t,i){if(!t.duration&&!i){return[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]}if(t.duration){return ae(t)}return ge(t,i)};var Se=function e(t,i){var r={RepresentationID:t.id,Bandwidth:t.bandwidth||0};var n=t.initialization,a=n===void 0?{sourceURL:"",range:""}:n;var s=te({baseUrl:t.baseUrl,source:be(a.sourceURL,r),range:a.range});var o=Te(t,i);return o.map((function(e){r.Number=e.number;r.Time=e.time;var i=be(t.media||"",r);return{uri:i,timeline:e.timeline,duration:e.duration,resolvedUri:V()(t.baseUrl||"",i),map:s,number:e.number}}))};var ke=function e(t,i){var r=t.baseUrl,n=t.initialization,a=n===void 0?{}:n;var s=te({baseUrl:r,source:a.sourceURL,range:a.range});var o=te({baseUrl:r,source:i.media,range:i.mediaRange});o.map=s;return o};var we=function e(t,i){var r=t.duration,n=t.segmentUrls,a=n===void 0?[]:n;if(!r&&!i||r&&i){throw new Error(ee.SEGMENT_TIME_UNSPECIFIED)}var s=a.map((function(e){return ke(t,e)}));var o;if(r){o=ae(t)}if(i){o=ge(t,i)}var u=o.map((function(e,t){if(s[t]){var i=s[t];i.timeline=e.timeline;i.duration=e.duration;i.number=e.number;return i}})).filter((function(e){return e}));return u};var Ce=function e(t){var i=t.attributes,r=t.segmentInfo;var n;var a;if(r.template){a=Se;n=K(i,r.template)}else if(r.base){a=se;n=K(i,r.base)}else if(r.list){a=we;n=K(i,r.list)}var s={attributes:i};if(!a){return s}var o=a(n,r.timeline);if(n.duration){var u=n,l=u.duration,c=u.timescale,f=c===void 0?1:c;n.duration=l/f}else if(o.length){n.duration=o.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0)}else{n.duration=0}s.attributes=n;s.segments=o;if(r.base&&n.indexRange){s.sidx=o[0];s.segments=[]}return s};var Ee=function e(t){return t.map(Ce)};var Ie=function e(t,i){return J(t.childNodes).filter((function(e){var t=e.tagName;return t===i}))};var Ae=function e(t){return t.textContent.trim()};var xe=function e(t){var i=365*24*60*60;var r=30*24*60*60;var n=24*60*60;var a=60*60;var s=60;var o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/;var u=o.exec(t);if(!u){return 0}var l=u.slice(1),c=l[0],f=l[1],h=l[2],d=l[3],p=l[4],v=l[5];return parseFloat(c||0)*i+parseFloat(f||0)*r+parseFloat(h||0)*n+parseFloat(d||0)*a+parseFloat(p||0)*s+parseFloat(v||0)};var Pe=function e(t){var i=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;if(i.test(t)){t+="Z"}return Date.parse(t)};var Le={mediaPresentationDuration:function e(t){return xe(t)},availabilityStartTime:function e(t){return Pe(t)/1e3},minimumUpdatePeriod:function e(t){return xe(t)},suggestedPresentationDelay:function e(t){return xe(t)},type:function e(t){return t},timeShiftBufferDepth:function e(t){return xe(t)},start:function e(t){return xe(t)},width:function e(t){return parseInt(t,10)},height:function e(t){return parseInt(t,10)},bandwidth:function e(t){return parseInt(t,10)},startNumber:function e(t){return parseInt(t,10)},timescale:function e(t){return parseInt(t,10)},duration:function e(t){var i=parseInt(t,10);if(isNaN(i)){return xe(t)}return i},d:function e(t){return parseInt(t,10)},t:function e(t){return parseInt(t,10)},r:function e(t){return parseInt(t,10)},DEFAULT:function e(t){return t}};var De=function e(t){if(!(t&&t.attributes)){return{}}return J(t.attributes).reduce((function(e,t){var i=Le[t.name]||Le.DEFAULT;e[t.name]=i(t.value);return e}),{})};var Oe={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};var Ne=function e(t,i){if(!i.length){return t}return Q(t.map((function(e){return i.map((function(t){return V()(e,Ae(t))}))})))};var Re=function e(t){var i=Ie(t,"SegmentTemplate")[0];var r=Ie(t,"SegmentList")[0];var n=r&&Ie(r,"SegmentURL").map((function(e){return K({tag:"SegmentURL"},De(e))}));var a=Ie(t,"SegmentBase")[0];var s=r||i;var o=s&&Ie(s,"SegmentTimeline")[0];var u=r||a||i;var l=u&&Ie(u,"Initialization")[0];var c=i&&De(i);if(c&&l){c.initialization=l&&De(l)}else if(c&&c.initialization){c.initialization={sourceURL:c.initialization}}var f={template:c,timeline:o&&Ie(o,"S").map((function(e){return De(e)})),list:r&&K(De(r),{segmentUrls:n,initialization:De(l)}),base:a&&K(De(a),{initialization:De(l)})};Object.keys(f).forEach((function(e){if(!f[e]){delete f[e]}}));return f};var Ue=function e(t,i,r){return function(e){var n=Ie(e,"BaseURL");var a=Ne(i,n);var s=K(t,De(e));var o=Re(e);return a.map((function(e){return{segmentInfo:K(r,o),attributes:K(s,{baseUrl:e})}}))}};var Me=function e(t){return t.reduce((function(e,t){var i=De(t);var r=Oe[i.schemeIdUri];if(r){e[r]={attributes:i};var n=Ie(t,"cenc:pssh")[0];if(n){var a=Ae(n);var s=a&&W()(a);e[r].pssh=s}}return e}),{})};var Be=function e(t,i,r){return function(e){var n=De(e);var a=Ne(i,Ie(e,"BaseURL"));var s=Ie(e,"Role")[0];var o={role:De(s)};var u=K(t,n,o);var l=Me(Ie(e,"ContentProtection"));if(Object.keys(l).length){u=K(u,{contentProtection:l})}var c=Re(e);var f=Ie(e,"Representation");var h=K(r,c);return Q(f.map(Ue(u,a,h)))}};var je=function e(t,i){return function(e,r){var n=Ne(i,Ie(e,"BaseURL"));var a=De(e);var s=parseInt(a.id,10);var o=P.a.isNaN(s)?r:s;var u=K(t,{periodIndex:o});var l=Ie(e,"AdaptationSet");var c=Re(e);return Q(l.map(Be(u,n,c)))}};var Fe=function e(t,i){if(i===void 0){i={}}var r=i,n=r.manifestUri,a=n===void 0?"":n,s=r.NOW,o=s===void 0?Date.now():s,u=r.clientOffset,l=u===void 0?0:u;var c=Ie(t,"Period");if(!c.length){throw new Error(ee.INVALID_NUMBER_OF_PERIOD)}var f=De(t);var h=Ne([a],Ie(t,"BaseURL"));f.sourceDuration=f.mediaPresentationDuration||0;f.NOW=o;f.clientOffset=l;return Q(c.map(je(f,h)))};var He=function e(t){if(t===""){throw new Error(ee.DASH_EMPTY_MANIFEST)}var i=new z["DOMParser"];var r=i.parseFromString(t,"application/xml");var n=r&&r.documentElement.tagName==="MPD"?r.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0){throw new Error(ee.DASH_INVALID_XML)}return n};var Ve=function e(t){var i=Ie(t,"UTCTiming")[0];if(!i){return null}var r=De(i);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT";r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(ee.UNSUPPORTED_UTC_TIMING_SCHEME)}return r};var qe=G;var We=function e(t,i){if(i===void 0){i={}}return ve(Ee(Fe(He(t),i)),i.sidxMapping)};var ze=function e(t){return Ve(He(t))};var Ge=i(518);var Xe=i.n(Ge);var Ke=i(564);var Ye=i.n(Ke);var $e=i(683);var Qe=i.n($e);var Je=i(685);var Ze=i.n(Je);var et=void 0;function tt(e){var t=et[e.byteLength%16||0];var i=new Uint8Array(e.byteLength+t.length);i.set(e);i.set(t,e.byteLength);return i}et=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]];function it(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var rt="1.0.2";var nt=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var at=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var st=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var ot=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var ut=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var i=t[0];var r=t[1];var n=i[4];var a=r[4];var s=void 0;var o=void 0;var u=void 0;var l=[];var c=[];var f=void 0;var h=void 0;var d=void 0;var p=void 0;var v=void 0;var m=void 0;for(s=0;s<256;s++){c[(l[s]=s<<1^(s>>7)*283)^s]=s}for(o=u=0;!n[o];o^=f||1,u=c[u]||1){p=u^u<<1^u<<2^u<<3^u<<4;p=p>>8^p&255^99;n[o]=p;a[p]=o;d=l[h=l[f=l[o]]];m=d*16843009^h*65537^f*257^o*16843008;v=l[p]*257^p*16843008;for(s=0;s<4;s++){i[s][o]=v=v<<24^v>>>8;r[s][p]=m=m<<24^m>>>8}}for(s=0;s<5;s++){i[s]=i[s].slice(0);r[s]=r[s].slice(0)}return t};var lt=null;var ct=function(){function e(t){nt(this,e);if(!lt){lt=ut()}this._tables=[[lt[0][0].slice(),lt[0][1].slice(),lt[0][2].slice(),lt[0][3].slice(),lt[0][4].slice()],[lt[1][0].slice(),lt[1][1].slice(),lt[1][2].slice(),lt[1][3].slice(),lt[1][4].slice()]];var i=void 0;var r=void 0;var n=void 0;var a=void 0;var s=void 0;var o=this._tables[0][4];var u=this._tables[1];var l=t.length;var c=1;if(l!==4&&l!==6&&l!==8){throw new Error("Invalid aes key size")}a=t.slice(0);s=[];this._key=[a,s];for(i=l;i<4*l+28;i++){n=a[i-1];if(i%l===0||l===8&&i%l===4){n=o[n>>>24]<<24^o[n>>16&255]<<16^o[n>>8&255]<<8^o[n&255];if(i%l===0){n=n<<8^n>>>24^c<<24;c=c<<1^(c>>7)*283}}a[i]=a[i-l]^n}for(r=0;i;r++,i--){n=a[r&3?i:i-4];if(i<=4||r<4){s[r]=n}else{s[r]=u[0][o[n>>>24]]^u[1][o[n>>16&255]]^u[2][o[n>>8&255]]^u[3][o[n&255]]}}}e.prototype.decrypt=function e(t,i,r,n,a,s){var o=this._key[1];var u=t^o[0];var l=n^o[1];var c=r^o[2];var f=i^o[3];var h=void 0;var d=void 0;var p=void 0;var v=o.length/4-2;var m=void 0;var g=4;var y=this._tables[1];var _=y[0];var b=y[1];var T=y[2];var S=y[3];var k=y[4];for(m=0;m<v;m++){h=_[u>>>24]^b[l>>16&255]^T[c>>8&255]^S[f&255]^o[g];d=_[l>>>24]^b[c>>16&255]^T[f>>8&255]^S[u&255]^o[g+1];p=_[c>>>24]^b[f>>16&255]^T[u>>8&255]^S[l&255]^o[g+2];f=_[f>>>24]^b[u>>16&255]^T[l>>8&255]^S[c&255]^o[g+3];g+=4;u=h;l=d;c=p}for(m=0;m<4;m++){a[(3&-m)+s]=k[u>>>24]<<24^k[l>>16&255]<<16^k[c>>8&255]<<8^k[f&255]^o[g++];h=u;u=l;l=c;c=f;f=h}};return e}();var ft=function(){function e(){nt(this,e);this.listeners={}}e.prototype.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(i)};e.prototype.off=function e(t,i){if(!this.listeners[t]){return false}var r=this.listeners[t].indexOf(i);this.listeners[t].splice(r,1);return r>-1};e.prototype.trigger=function e(t){var i=this.listeners[t];if(!i){return}if(arguments.length===2){var r=i.length;for(var n=0;n<r;++n){i[n].call(this,arguments[1])}}else{var a=Array.prototype.slice.call(arguments,1);var s=i.length;for(var o=0;o<s;++o){i[o].apply(this,a)}}};e.prototype.dispose=function e(){this.listeners={}};e.prototype.pipe=function e(t){this.on("data",(function(e){t.push(e)}))};return e}();var ht=function(e){st(t,e);function t(){nt(this,t);var i=ot(this,e.call(this,ft));i.jobs=[];i.delay=1;i.timeout_=null;return i}t.prototype.processJob_=function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};t.prototype.push=function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return t}(ft);var dt=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var pt=function e(t,i,r){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var a=new ct(Array.prototype.slice.call(i));var s=new Uint8Array(t.byteLength);var o=new Int32Array(s.buffer);var u=void 0;var l=void 0;var c=void 0;var f=void 0;var h=void 0;var d=void 0;var p=void 0;var v=void 0;var m=void 0;u=r[0];l=r[1];c=r[2];f=r[3];for(m=0;m<n.length;m+=4){h=dt(n[m]);d=dt(n[m+1]);p=dt(n[m+2]);v=dt(n[m+3]);a.decrypt(h,d,p,v,o,m);o[m]=dt(o[m]^u);o[m+1]=dt(o[m+1]^l);o[m+2]=dt(o[m+2]^c);o[m+3]=dt(o[m+3]^f);u=h;l=d;c=p;f=v}return s};var vt=function(){function e(t,i,r,n){nt(this,e);var a=e.STEP;var s=new Int32Array(t.buffer);var o=new Uint8Array(t.byteLength);var u=0;this.asyncStream_=new ht;this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),i,r,o));for(u=a;u<s.length;u+=a){r=new Uint32Array([dt(s[u-4]),dt(s[u-3]),dt(s[u-2]),dt(s[u-1])]);this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),i,r,o))}this.asyncStream_.push((function(){n(null,it(o))}))}e.prototype.decryptChunk_=function e(t,i,r,n){return function(){var e=pt(t,i,r);n.set(e,t.byteOffset)}};at(e,null,[{key:"STEP",get:function e(){return 32e3}}]);return e}();var mt="7.8.4";var gt=[];var yt=function e(t,i){return function(e,r,a){var s=i.levels[r];var o=new RegExp("^("+s+")$");if(e!=="log"){a.unshift(e.toUpperCase()+":")}a.unshift(t+":");if(gt){gt.push([].concat(a));var u=gt.length-1e3;gt.splice(0,u>0?u:0)}if(!n.a.console){return}var l=n.a.console[e];if(!l&&e==="debug"){l=n.a.console.info||n.a.console.log}if(!l||!s||!o.test(e)){return}l[Array.isArray(a)?"apply":"call"](n.a.console,a)}};function _t(e){var t="info";var i;var r=function e(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++){n[a]=arguments[a]}i("log",t,n)};i=yt(e,r);r.createLogger=function(t){return _t(e+": "+t)};r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t};r.level=function(e){if(typeof e==="string"){if(!r.levels.hasOwnProperty(e)){throw new Error('"'+e+'" in not a valid log level')}t=e}return t};r.history=function(){return gt?[].concat(gt):[]};r.history.filter=function(e){return(gt||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))};r.history.clear=function(){if(gt){gt.length=0}};r.history.disable=function(){if(gt!==null){gt.length=0;gt=null}};r.history.enable=function(){if(gt===null){gt=[]}};r.error=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++){r[n]=arguments[n]}return i("error",t,r)};r.warn=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++){r[n]=arguments[n]}return i("warn",t,r)};r.debug=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++){r[n]=arguments[n]}return i("debug",t,r)};return r}var bt=_t("VIDEOJS");var Tt=bt.createLogger;var St=Object.prototype.toString;var kt=function e(t){return It(t)?Object.keys(t):[]};function wt(e,t){kt(e).forEach((function(i){return t(e[i],i)}))}function Ct(e,t,i){if(i===void 0){i=0}return kt(e).reduce((function(i,r){return t(i,e[r],r)}),i)}function Et(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++){i[r-1]=arguments[r]}if(Object.assign){return u.a.apply(void 0,[e].concat(i))}i.forEach((function(t){if(!t){return}wt(t,(function(t,i){e[i]=t}))}));return e}function It(e){return!!e&&typeof e==="object"}function At(e){return It(e)&&St.call(e)==="[object Object]"&&e.constructor===Object}function xt(e,t){if(!e||!t){return""}if(typeof n.a.getComputedStyle==="function"){var i=n.a.getComputedStyle(e);return i?i.getPropertyValue(t)||i[t]:""}return""}function Pt(e){return typeof e==="string"&&Boolean(e.trim())}function Lt(e){if(e.indexOf(" ")>=0){throw new Error("class has illegal whitespace characters")}}function Dt(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function Ot(){return s.a===n.a.document}function Nt(e){return It(e)&&e.nodeType===1}function Rt(){try{return n.a.parent!==n.a.self}catch(e){return true}}function Ut(e){return function(t,i){if(!Pt(t)){return s.a[e](null)}if(Pt(i)){i=s.a.querySelector(i)}var r=Nt(i)?i:s.a;return r[e]&&r[e](t)}}function Mt(e,t,i,r){if(e===void 0){e="div"}if(t===void 0){t={}}if(i===void 0){i={}}var n=s.a.createElement(e);Object.getOwnPropertyNames(t).forEach((function(e){var i=t[e];if(e.indexOf("aria-")!==-1||e==="role"||e==="type"){bt.warn("Setting attributes in the second argument of createEl()\n"+"has been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+e+" to "+i+"."));n.setAttribute(e,i)}else if(e==="textContent"){Bt(n,i)}else if(n[e]!==i){n[e]=i}}));Object.getOwnPropertyNames(i).forEach((function(e){n.setAttribute(e,i[e])}));if(r){ri(n,r)}return n}function Bt(e,t){if(typeof e.textContent==="undefined"){e.innerText=t}else{e.textContent=t}return e}function jt(e,t){if(t.firstChild){t.insertBefore(e,t.firstChild)}else{t.appendChild(e)}}function Ft(e,t){Lt(t);if(e.classList){return e.classList.contains(t)}return Dt(t).test(e.className)}function Ht(e,t){if(e.classList){e.classList.add(t)}else if(!Ft(e,t)){e.className=(e.className+" "+t).trim()}return e}function Vt(e,t){if(e.classList){e.classList.remove(t)}else{Lt(t);e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")}return e}function qt(e,t,i){var r=Ft(e,t);if(typeof i==="function"){i=i(e,t)}if(typeof i!=="boolean"){i=!r}if(i===r){return}if(i){Ht(e,t)}else{Vt(e,t)}return e}function Wt(e,t){Object.getOwnPropertyNames(t).forEach((function(i){var r=t[i];if(r===null||typeof r==="undefined"||r===false){e.removeAttribute(i)}else{e.setAttribute(i,r===true?"":r)}}))}function zt(e){var t={};var i=","+"autoplay,controls,playsinline,loop,muted,default,defaultMuted"+",";if(e&&e.attributes&&e.attributes.length>0){var r=e.attributes;for(var n=r.length-1;n>=0;n--){var a=r[n].name;var s=r[n].value;if(typeof e[a]==="boolean"||i.indexOf(","+a+",")!==-1){s=s!==null?true:false}t[a]=s}}return t}function Gt(e,t){return e.getAttribute(t)}function Xt(e,t,i){e.setAttribute(t,i)}function Kt(e,t){e.removeAttribute(t)}function Yt(){s.a.body.focus();s.a.onselectstart=function(){return false}}function $t(){s.a.onselectstart=function(){return true}}function Qt(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect();var i={};["bottom","height","left","right","top","width"].forEach((function(e){if(t[e]!==undefined){i[e]=t[e]}}));if(!i.height){i.height=parseFloat(xt(e,"height"))}if(!i.width){i.width=parseFloat(xt(e,"width"))}return i}}function Jt(e){var t;if(e.getBoundingClientRect&&e.parentNode){t=e.getBoundingClientRect()}if(!t){return{left:0,top:0}}var i=s.a.documentElement;var r=s.a.body;var a=i.clientLeft||r.clientLeft||0;var o=n.a.pageXOffset||r.scrollLeft;var u=t.left+o-a;var l=i.clientTop||r.clientTop||0;var c=n.a.pageYOffset||r.scrollTop;var f=t.top+c-l;return{left:Math.round(u),top:Math.round(f)}}function Zt(e,t){var i={};var r=Jt(e);var n=e.offsetWidth;var a=e.offsetHeight;var s=r.top;var o=r.left;var u=t.pageY;var l=t.pageX;if(t.changedTouches){l=t.changedTouches[0].pageX;u=t.changedTouches[0].pageY}i.y=Math.max(0,Math.min(1,(s-u+a)/a));i.x=Math.max(0,Math.min(1,(l-o)/n));return i}function ei(e){return It(e)&&e.nodeType===3}function ti(e){while(e.firstChild){e.removeChild(e.firstChild)}return e}function ii(e){if(typeof e==="function"){e=e()}return(Array.isArray(e)?e:[e]).map((function(e){if(typeof e==="function"){e=e()}if(Nt(e)||ei(e)){return e}if(typeof e==="string"&&/\S/.test(e)){return s.a.createTextNode(e)}})).filter((function(e){return e}))}function ri(e,t){ii(t).forEach((function(t){return e.appendChild(t)}));return e}function ni(e,t){return ri(ti(e),t)}function ai(e){if(e.button===undefined&&e.buttons===undefined){return true}if(e.button===0&&e.buttons===undefined){return true}if(e.type==="mouseup"&&e.button===0&&e.buttons===0){return true}if(e.button!==0||e.buttons!==1){return false}return true}var si=Ut("querySelector");var oi=Ut("querySelectorAll");var ui=Object.freeze({__proto__:null,isReal:Ot,isEl:Nt,isInFrame:Rt,createEl:Mt,textContent:Bt,prependTo:jt,hasClass:Ft,addClass:Ht,removeClass:Vt,toggleClass:qt,setAttributes:Wt,getAttributes:zt,getAttribute:Gt,setAttribute:Xt,removeAttribute:Kt,blockTextSelection:Yt,unblockTextSelection:$t,getBoundingClientRect:Qt,findPosition:Jt,getPointerPosition:Zt,isTextNode:ei,emptyEl:ti,normalizeContent:ii,appendContent:ri,insertContent:ni,isSingleLeftClick:ai,$:si,$$:oi});var li=false;var ci;var fi=function e(){if(!Ot()||ci.options.autoSetup===false){return}var t=Array.prototype.slice.call(s.a.getElementsByTagName("video"));var i=Array.prototype.slice.call(s.a.getElementsByTagName("audio"));var r=Array.prototype.slice.call(s.a.getElementsByTagName("video-js"));var n=t.concat(i,r);if(n&&n.length>0){for(var a=0,o=n.length;a<o;a++){var u=n[a];if(u&&u.getAttribute){if(u.player===undefined){var l=u.getAttribute("data-setup");if(l!==null){ci(u)}}}else{hi(1);break}}}else if(!li){hi(1)}};function hi(e,t){if(t){ci=t}n.a.setTimeout(fi,e)}function di(){li=true;n.a.removeEventListener("load",di)}if(Ot()){if(s.a.readyState==="complete"){di()}else{n.a.addEventListener("load",di)}}var pi=function e(t){var i=s.a.createElement("style");i.className=t;return i};var vi=function e(t,i){if(t.styleSheet){t.styleSheet.cssText=i}else{t.textContent=i}};var mi=3;var gi=mi;function yi(){return gi++}var _i;if(!n.a.WeakMap){_i=function(){function e(){this.vdata="vdata"+Math.floor(n.a.performance&&n.a.performance.now()||Date.now());this.data={}}var t=e.prototype;t.set=function e(t,i){var r=t[this.vdata]||yi();if(!t[this.vdata]){t[this.vdata]=r}this.data[r]=i;return this};t.get=function e(t){var i=t[this.vdata];if(i){return this.data[i]}bt("We have no data for this element",t);return undefined};t.has=function e(t){var i=t[this.vdata];return i in this.data};t["delete"]=function e(t){var i=t[this.vdata];if(i){delete this.data[i];delete t[this.vdata]}};return e}()}var bi=n.a.WeakMap?new WeakMap:new _i;function Ti(e,t){if(!bi.has(e)){return}var i=bi.get(e);if(i.handlers[t].length===0){delete i.handlers[t];if(e.removeEventListener){e.removeEventListener(t,i.dispatcher,false)}else if(e.detachEvent){e.detachEvent("on"+t,i.dispatcher)}}if(Object.getOwnPropertyNames(i.handlers).length<=0){delete i.handlers;delete i.dispatcher;delete i.disabled}if(Object.getOwnPropertyNames(i).length===0){bi["delete"](e)}}function Si(e,t,i,r){i.forEach((function(i){e(t,i,r)}))}function ki(e){if(e.fixed_){return e}function t(){return true}function i(){return false}if(!e||!e.isPropagationStopped){var r=e||n.a.event;e={};for(var a in r){if(a!=="layerX"&&a!=="layerY"&&a!=="keyLocation"&&a!=="webkitMovementX"&&a!=="webkitMovementY"){if(!(a==="returnValue"&&r.preventDefault)){e[a]=r[a]}}}if(!e.target){e.target=e.srcElement||s.a}if(!e.relatedTarget){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement}e.preventDefault=function(){if(r.preventDefault){r.preventDefault()}e.returnValue=false;r.returnValue=false;e.defaultPrevented=true};e.defaultPrevented=false;e.stopPropagation=function(){if(r.stopPropagation){r.stopPropagation()}e.cancelBubble=true;r.cancelBubble=true;e.isPropagationStopped=t};e.isPropagationStopped=i;e.stopImmediatePropagation=function(){if(r.stopImmediatePropagation){r.stopImmediatePropagation()}e.isImmediatePropagationStopped=t;e.stopPropagation()};e.isImmediatePropagationStopped=i;if(e.clientX!==null&&e.clientX!==undefined){var o=s.a.documentElement;var u=s.a.body;e.pageX=e.clientX+(o&&o.scrollLeft||u&&u.scrollLeft||0)-(o&&o.clientLeft||u&&u.clientLeft||0);e.pageY=e.clientY+(o&&o.scrollTop||u&&u.scrollTop||0)-(o&&o.clientTop||u&&u.clientTop||0)}e.which=e.charCode||e.keyCode;if(e.button!==null&&e.button!==undefined){e.button=e.button&1?0:e.button&4?1:e.button&2?2:0}}e.fixed_=true;return e}var wi;var Ci=function e(){if(typeof wi!=="boolean"){wi=false;try{var t=Object.defineProperty({},"passive",{get:function e(){wi=true}});n.a.addEventListener("test",null,t);n.a.removeEventListener("test",null,t)}catch(e){}}return wi};var Ei=["touchstart","touchmove"];function Ii(e,t,i){if(Array.isArray(t)){return Si(Ii,e,t,i)}if(!bi.has(e)){bi.set(e,{})}var r=bi.get(e);if(!r.handlers){r.handlers={}}if(!r.handlers[t]){r.handlers[t]=[]}if(!i.guid){i.guid=yi()}r.handlers[t].push(i);if(!r.dispatcher){r.disabled=false;r.dispatcher=function(t,i){if(r.disabled){return}t=ki(t);var n=r.handlers[t.type];if(n){var a=n.slice(0);for(var s=0,o=a.length;s<o;s++){if(t.isImmediatePropagationStopped()){break}else{try{a[s].call(e,t,i)}catch(e){bt.error(e)}}}}}}if(r.handlers[t].length===1){if(e.addEventListener){var n=false;if(Ci()&&Ei.indexOf(t)>-1){n={passive:true}}e.addEventListener(t,r.dispatcher,n)}else if(e.attachEvent){e.attachEvent("on"+t,r.dispatcher)}}}function Ai(e,t,i){if(!bi.has(e)){return}var r=bi.get(e);if(!r.handlers){return}if(Array.isArray(t)){return Si(Ai,e,t,i)}var n=function e(t,i){r.handlers[i]=[];Ti(t,i)};if(t===undefined){for(var a in r.handlers){if(Object.prototype.hasOwnProperty.call(r.handlers||{},a)){n(e,a)}}return}var s=r.handlers[t];if(!s){return}if(!i){n(e,t);return}if(i.guid){for(var o=0;o<s.length;o++){if(s[o].guid===i.guid){s.splice(o--,1)}}}Ti(e,t)}function xi(e,t,i){var r=bi.has(e)?bi.get(e):{};var n=e.parentNode||e.ownerDocument;if(typeof t==="string"){t={type:t,target:e}}else if(!t.target){t.target=e}t=ki(t);if(r.dispatcher){r.dispatcher.call(e,t,i)}if(n&&!t.isPropagationStopped()&&t.bubbles===true){xi.call(null,n,t,i)}else if(!n&&!t.defaultPrevented&&t.target&&t.target[t.type]){if(!bi.has(t.target)){bi.set(t.target,{})}var a=bi.get(t.target);if(t.target[t.type]){a.disabled=true;if(typeof t.target[t.type]==="function"){t.target[t.type]()}a.disabled=false}}return!t.defaultPrevented}function Pi(e,t,i){if(Array.isArray(t)){return Si(Pi,e,t,i)}var r=function r(){Ai(e,t,r);i.apply(this,arguments)};r.guid=i.guid=i.guid||yi();Ii(e,t,r)}function Li(e,t,i){var r=function r(){Ai(e,t,r);i.apply(this,arguments)};r.guid=i.guid=i.guid||yi();Ii(e,t,r)}var Di=Object.freeze({__proto__:null,fixEvent:ki,on:Ii,off:Ai,trigger:xi,one:Pi,any:Li});var Oi=30;var Ni=function e(t,i,r){if(!i.guid){i.guid=yi()}var n=i.bind(t);n.guid=r?r+"_"+i.guid:i.guid;return n};var Ri=function e(t,i){var r=n.a.performance.now();var a=function e(){var a=n.a.performance.now();if(a-r>=i){t.apply(void 0,arguments);r=a}};return a};var Ui=function e(t,i,r,a){if(a===void 0){a=n.a}var s;var o=function e(){a.clearTimeout(s);s=null};var u=function e(){var n=this;var o=arguments;var u=function e(){s=null;u=null;if(!r){t.apply(n,o)}};if(!s&&r){t.apply(n,o)}a.clearTimeout(s);s=a.setTimeout(u,i)};u.cancel=o;return u};var Mi=function e(){};Mi.prototype.allowedEvents_={};Mi.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){};Ii(this,e,t);this.addEventListener=i};Mi.prototype.addEventListener=Mi.prototype.on;Mi.prototype.off=function(e,t){Ai(this,e,t)};Mi.prototype.removeEventListener=Mi.prototype.off;Mi.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){};Pi(this,e,t);this.addEventListener=i};Mi.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){};Li(this,e,t);this.addEventListener=i};Mi.prototype.trigger=function(e){var t=e.type||e;if(typeof e==="string"){e={type:t}}e=ki(e);if(this.allowedEvents_[t]&&this["on"+t]){this["on"+t](e)}xi(this,e)};Mi.prototype.dispatchEvent=Mi.prototype.trigger;var Bi;Mi.prototype.queueTrigger=function(e){var t=this;if(!Bi){Bi=new Map}var i=e.type||e;var r=Bi.get(this);if(!r){r=new Map;Bi.set(this,r)}var a=r.get(i);r["delete"](i);n.a.clearTimeout(a);var s=n.a.setTimeout((function(){if(r.size===0){r=null;Bi["delete"](t)}t.trigger(e)}),0);r.set(i,s)};var ji=function e(t){return t instanceof Mi||!!t.eventBusEl_&&["on","one","off","trigger"].every((function(e){return typeof t[e]==="function"}))};var Fi=function e(t,i){if(ji(t)){i()}else{if(!t.eventedCallbacks){t.eventedCallbacks=[]}t.eventedCallbacks.push(i)}};var Hi=function e(t){return typeof t==="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length};var Vi=function e(t){if(!t.nodeName&&!ji(t)){throw new Error("Invalid target; must be a DOM node or evented object.")}};var qi=function e(t){if(!Hi(t)){throw new Error("Invalid event type; must be a non-empty string or array.")}};var Wi=function e(t){if(typeof t!=="function"){throw new Error("Invalid listener; must be a function.")}};var zi=function e(t,i){var r=i.length<3||i[0]===t||i[0]===t.eventBusEl_;var n;var a;var s;if(r){n=t.eventBusEl_;if(i.length>=3){i.shift()}a=i[0];s=i[1]}else{n=i[0];a=i[1];s=i[2]}Vi(n);qi(a);Wi(s);s=Ni(t,s);return{isTargetingSelf:r,target:n,type:a,listener:s}};var Gi=function e(t,i,r,n){Vi(t);if(t.nodeName){Di[i](t,r,n)}else{t[i](r,n)}};var Xi={on:function e(){var t=this;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}var a=zi(this,r),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;Gi(o,"on",u,l);if(!s){var c=function e(){return t.off(o,u,l)};c.guid=l.guid;var f=function e(){return t.off("dispose",c)};f.guid=l.guid;Gi(this,"on","dispose",c);Gi(o,"on","dispose",f)}},one:function e(){var t=this;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}var a=zi(this,r),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s){Gi(o,"one",u,l)}else{var c=function e(){t.off(o,u,e);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}l.apply(null,r)};c.guid=l.guid;Gi(o,"one",u,c)}},any:function e(){var t=this;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}var a=zi(this,r),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s){Gi(o,"any",u,l)}else{var c=function e(){t.off(o,u,e);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}l.apply(null,r)};c.guid=l.guid;Gi(o,"any",u,c)}},off:function e(t,i,r){if(!t||Hi(t)){Ai(this.eventBusEl_,t,i)}else{var n=t;var a=i;Vi(n);qi(a);Wi(r);r=Ni(this,r);this.off("dispose",r);if(n.nodeName){Ai(n,a,r);Ai(n,"dispose",r)}else if(ji(n)){n.off(a,r);n.off("dispose",r)}}},trigger:function e(t,i){return xi(this.eventBusEl_,t,i)}};function Ki(e,t){if(t===void 0){t={}}var i=t,r=i.eventBusKey;if(r){if(!e[r].nodeName){throw new Error('The eventBusKey "'+r+'" does not refer to an element.')}e.eventBusEl_=e[r]}else{e.eventBusEl_=Mt("span",{className:"vjs-event-bus"})}Et(e,Xi);if(e.eventedCallbacks){e.eventedCallbacks.forEach((function(e){e()}))}e.on("dispose",(function(){e.off();n.a.setTimeout((function(){e.eventBusEl_=null}),0)}));return e}var Yi={state:{},setState:function e(t){var i=this;if(typeof t==="function"){t=t()}var r;wt(t,(function(e,t){if(i.state[t]!==e){r=r||{};r[t]={from:i.state[t],to:e}}i.state[t]=e}));if(r&&ji(this)){this.trigger({changes:r,type:"statechanged"})}return r}};function $i(e,t){Et(e,Yi);e.state=Et({},e.state,t);if(typeof e.handleStateChanged==="function"&&ji(e)){e.on("statechanged",e.handleStateChanged)}return e}var Qi=function e(t){if(typeof t!=="string"){return t}return t.replace(/./,(function(e){return e.toLowerCase()}))};var Ji=function e(t){if(typeof t!=="string"){return t}return t.replace(/./,(function(e){return e.toUpperCase()}))};var Zi=function e(t,i){return Ji(t)===Ji(i)};function er(){var e={};for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}i.forEach((function(t){if(!t){return}wt(t,(function(t,i){if(!At(t)){e[i]=t;return}if(!At(e[i])){e[i]={}}e[i]=er(e[i],t)}))}));return e}var tr=function(){function e(e,t,i){if(!e&&this.play){this.player_=e=this}else{this.player_=e}this.isDisposed_=false;this.parentComponent_=null;this.options_=er({},this.options_);t=this.options_=er(this.options_,t);this.id_=t.id||t.el&&t.el.id;if(!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+yi()}this.name_=t.name||null;if(t.el){this.el_=t.el}else if(t.createEl!==false){this.el_=this.createEl()}if(t.evented!==false){Ki(this,{eventBusKey:this.el_?"el_":null})}$i(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};var a;if(!n.a.Set){a=function(){function e(){this.set_={}}var t=e.prototype;t.has=function e(t){return t in this.set_};t["delete"]=function e(t){var i=this.has(t);delete this.set_[t];return i};t.add=function e(t){this.set_[t]=1;return this};t.forEach=function e(t,i){for(var r in this.set_){t.call(i,r,r,this)}};return e}()}this.setTimeoutIds_=n.a.Set?new Set:new a;this.setIntervalIds_=n.a.Set?new Set:new a;this.rafIds_=n.a.Set?new Set:new a;this.clearingTimersOnDispose_=false;if(t.initChildren!==false){this.initChildren()}this.ready(i);if(t.reportTouchActivity!==false){this.enableTouchActivity()}}var t=e.prototype;t.dispose=function e(){if(this.isDisposed_){return}this.trigger({type:"dispose",bubbles:false});this.isDisposed_=true;if(this.children_){for(var t=this.children_.length-1;t>=0;t--){if(this.children_[t].dispose){this.children_[t].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}if(bi.has(this.el_)){bi["delete"](this.el_)}this.el_=null}this.player_=null};t.isDisposed=function e(){return Boolean(this.isDisposed_)};t.player=function e(){return this.player_};t.options=function e(t){if(!t){return this.options_}this.options_=er(this.options_,t);return this.options_};t.el=function e(){return this.el_};t.createEl=function e(t,i,r){return Mt(t,i,r)};t.localize=function e(t,i,r){if(r===void 0){r=t}var n=this.player_.language&&this.player_.language();var a=this.player_.languages&&this.player_.languages();var s=a&&a[n];var o=n&&n.split("-")[0];var u=a&&a[o];var l=r;if(s&&s[t]){l=s[t]}else if(u&&u[t]){l=u[t]}if(i){l=l.replace(/\{(\d+)\}/g,(function(e,t){var r=i[t-1];var n=r;if(typeof r==="undefined"){n=e}return n}))}return l};t.contentEl=function e(){return this.contentEl_||this.el_};t.id=function e(){return this.id_};t.name=function e(){return this.name_};t.children=function e(){return this.children_};t.getChildById=function e(t){return this.childIndex_[t]};t.getChild=function e(t){if(!t){return}return this.childNameIndex_[t]};t.getDescendant=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}i=i.reduce((function(e,t){return e.concat(t)}),[]);var n=this;for(var a=0;a<i.length;a++){n=n.getChild(i[a]);if(!n||!n.getChild){return}}return n};t.addChild=function t(i,r,n){if(r===void 0){r={}}if(n===void 0){n=this.children_.length}var a;var s;if(typeof i==="string"){s=Ji(i);var o=r.componentClass||s;r.name=s;var u=e.getComponent(o);if(!u){throw new Error("Component "+o+" does not exist")}if(typeof u!=="function"){return null}a=new u(this.player_||this,r)}else{a=i}if(a.parentComponent_){a.parentComponent_.removeChild(a)}this.children_.splice(n,0,a);a.parentComponent_=this;if(typeof a.id==="function"){this.childIndex_[a.id()]=a}s=s||a.name&&Ji(a.name());if(s){this.childNameIndex_[s]=a;this.childNameIndex_[Qi(s)]=a}if(typeof a.el==="function"&&a.el()){var l=null;if(this.children_[n+1]){if(this.children_[n+1].el_){l=this.children_[n+1].el_}else if(Nt(this.children_[n+1])){l=this.children_[n+1]}}this.contentEl().insertBefore(a.el(),l)}return a};t.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t)}if(!t||!this.children_){return}var i=false;for(var r=this.children_.length-1;r>=0;r--){if(this.children_[r]===t){i=true;this.children_.splice(r,1);break}}if(!i){return}t.parentComponent_=null;this.childIndex_[t.id()]=null;this.childNameIndex_[Ji(t.name())]=null;this.childNameIndex_[Qi(t.name())]=null;var n=t.el();if(n&&n.parentNode===this.contentEl()){this.contentEl().removeChild(t.el())}};t.initChildren=function t(){var i=this;var r=this.options_.children;if(r){var n=this.options_;var a=function e(t){var r=t.name;var a=t.opts;if(n[r]!==undefined){a=n[r]}if(a===false){return}if(a===true){a={}}a.playerOptions=i.options_.playerOptions;var s=i.addChild(r,a);if(s){i[r]=s}};var s;var o=e.getComponent("Tech");if(Array.isArray(r)){s=r}else{s=Object.keys(r)}s.concat(Object.keys(this.options_).filter((function(e){return!s.some((function(t){if(typeof t==="string"){return e===t}return e===t.name}))}))).map((function(e){var t;var n;if(typeof e==="string"){t=e;n=r[t]||i.options_[t]||{}}else{t=e.name;n=e}return{name:t,opts:n}})).filter((function(t){var i=e.getComponent(t.opts.componentClass||Ji(t.name));return i&&!o.isTech(i)})).forEach(a)}};t.buildCSSClass=function e(){return""};t.ready=function e(t,i){if(i===void 0){i=false}if(!t){return}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(t);return}if(i){t.call(this)}else{this.setTimeout(t,1)}};t.triggerReady=function e(){this.isReady_=true;this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[];if(e&&e.length>0){e.forEach((function(e){e.call(this)}),this)}this.trigger("ready")}),1)};t.$=function e(t,i){return si(t,i||this.contentEl())};t.$$=function e(t,i){return oi(t,i||this.contentEl())};t.hasClass=function e(t){return Ft(this.el_,t)};t.addClass=function e(t){Ht(this.el_,t)};t.removeClass=function e(t){Vt(this.el_,t)};t.toggleClass=function e(t,i){qt(this.el_,t,i)};t.show=function e(){this.removeClass("vjs-hidden")};t.hide=function e(){this.addClass("vjs-hidden")};t.lockShowing=function e(){this.addClass("vjs-lock-showing")};t.unlockShowing=function e(){this.removeClass("vjs-lock-showing")};t.getAttribute=function e(t){return Gt(this.el_,t)};t.setAttribute=function e(t,i){Xt(this.el_,t,i)};t.removeAttribute=function e(t){Kt(this.el_,t)};t.width=function e(t,i){return this.dimension("width",t,i)};t.height=function e(t,i){return this.dimension("height",t,i)};t.dimensions=function e(t,i){this.width(t,true);this.height(i)};t.dimension=function e(t,i,r){if(i!==undefined){if(i===null||i!==i){i=0}if((""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1){this.el_.style[t]=i}else if(i==="auto"){this.el_.style[t]=""}else{this.el_.style[t]=i+"px"}if(!r){this.trigger("componentresize")}return}if(!this.el_){return 0}var n=this.el_.style[t];var a=n.indexOf("px");if(a!==-1){return parseInt(n.slice(0,a),10)}return parseInt(this.el_["offset"+Ji(t)],10)};t.currentDimension=function e(t){var i=0;if(t!=="width"&&t!=="height"){throw new Error("currentDimension only accepts width or height value")}i=xt(this.el_,t);i=parseFloat(i);if(i===0||isNaN(i)){var r="offset"+Ji(t);i=this.el_[r]}return i};t.currentDimensions=function e(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};t.currentWidth=function e(){return this.currentDimension("width")};t.currentHeight=function e(){return this.currentDimension("height")};t.focus=function e(){this.el_.focus()};t.blur=function e(){this.el_.blur()};t.handleKeyDown=function e(t){if(this.player_){t.stopPropagation();this.player_.handleKeyDown(t)}};t.handleKeyPress=function e(t){this.handleKeyDown(t)};t.emitTapEvents=function e(){var t=0;var i=null;var r=10;var a=200;var s;this.on("touchstart",(function(e){if(e.touches.length===1){i={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY};t=n.a.performance.now();s=true}}));this.on("touchmove",(function(e){if(e.touches.length>1){s=false}else if(i){var t=e.touches[0].pageX-i.pageX;var n=e.touches[0].pageY-i.pageY;var a=Math.sqrt(t*t+n*n);if(a>r){s=false}}}));var o=function e(){s=false};this.on("touchleave",o);this.on("touchcancel",o);this.on("touchend",(function(e){i=null;if(s===true){var r=n.a.performance.now()-t;if(r<a){e.preventDefault();this.trigger("tap")}}}))};t.enableTouchActivity=function e(){if(!this.player()||!this.player().reportUserActivity){return}var t=Ni(this.player(),this.player().reportUserActivity);var i;this.on("touchstart",(function(){t();this.clearInterval(i);i=this.setInterval(t,250)}));var r=function e(r){t();this.clearInterval(i)};this.on("touchmove",t);this.on("touchend",r);this.on("touchcancel",r)};t.setTimeout=function e(t,i){var r=this;var a;t=Ni(this,t);this.clearTimersOnDispose_();a=n.a.setTimeout((function(){if(r.setTimeoutIds_.has(a)){r.setTimeoutIds_["delete"](a)}t()}),i);this.setTimeoutIds_.add(a);return a};t.clearTimeout=function e(t){if(this.setTimeoutIds_.has(t)){this.setTimeoutIds_["delete"](t);n.a.clearTimeout(t)}return t};t.setInterval=function e(t,i){t=Ni(this,t);this.clearTimersOnDispose_();var r=n.a.setInterval(t,i);this.setIntervalIds_.add(r);return r};t.clearInterval=function e(t){if(this.setIntervalIds_.has(t)){this.setIntervalIds_["delete"](t);n.a.clearInterval(t)}return t};t.requestAnimationFrame=function e(t){var i=this;if(!this.supportsRaf_){return this.setTimeout(t,1e3/60)}this.clearTimersOnDispose_();var r;t=Ni(this,t);r=n.a.requestAnimationFrame((function(){if(i.rafIds_.has(r)){i.rafIds_["delete"](r)}t()}));this.rafIds_.add(r);return r};t.cancelAnimationFrame=function e(t){if(!this.supportsRaf_){return this.clearTimeout(t)}if(this.rafIds_.has(t)){this.rafIds_["delete"](t);n.a.cancelAnimationFrame(t)}return t};t.clearTimersOnDispose_=function e(){var t=this;if(this.clearingTimersOnDispose_){return}this.clearingTimersOnDispose_=true;this.one("dispose",(function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(e){var i=e[0],r=e[1];t[i].forEach(t[r],t)}));t.clearingTimersOnDispose_=false}))};e.registerComponent=function t(i,r){if(typeof i!=="string"||!i){throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.')}var n=e.getComponent("Tech");var a=n&&n.isTech(r);var s=e===r||e.prototype.isPrototypeOf(r.prototype);if(a||!s){var o;if(a){o="techs must be registered using Tech.registerTech()"}else{o="must be a Component subclass"}throw new Error('Illegal component, "'+i+'"; '+o+".")}i=Ji(i);if(!e.components_){e.components_={}}var u=e.getComponent("Player");if(i==="Player"&&u&&u.players){var l=u.players;var c=Object.keys(l);if(l&&c.length>0&&c.map((function(e){return l[e]})).every(Boolean)){throw new Error("Can not register Player component after player has been created.")}}e.components_[i]=r;e.components_[Qi(i)]=r;return r};e.getComponent=function t(i){if(!i||!e.components_){return}return e.components_[i]};return e}();tr.prototype.supportsRaf_=typeof n.a.requestAnimationFrame==="function"&&typeof n.a.cancelAnimationFrame==="function";tr.registerComponent("Component",tr);var ir=n.a.navigator&&n.a.navigator.userAgent||"";var rr=/AppleWebKit\/([\d.]+)/i.exec(ir);var nr=rr?parseFloat(rr.pop()):null;var ar=/iPod/i.test(ir);var sr=function(){var e=ir.match(/OS (\d+)_/i);if(e&&e[1]){return e[1]}return null}();var or=/Android/i.test(ir);var ur=function(){var e=ir.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e){return null}var t=e[1]&&parseFloat(e[1]);var i=e[2]&&parseFloat(e[2]);if(t&&i){return parseFloat(e[1]+"."+e[2])}else if(t){return t}return null}();var lr=or&&ur<5&&nr<537;var cr=/Firefox/i.test(ir);var fr=/Edg/i.test(ir);var hr=!fr&&(/Chrome/i.test(ir)||/CriOS/i.test(ir));var dr=function(){var e=ir.match(/(Chrome|CriOS)\/(\d+)/);if(e&&e[2]){return parseFloat(e[2])}return null}();var pr=function(){var e=/MSIE\s(\d+)\.\d/.exec(ir);var t=e&&parseFloat(e[1]);if(!t&&/Trident\/7.0/i.test(ir)&&/rv:11.0/.test(ir)){t=11}return t}();var vr=/Safari/i.test(ir)&&!hr&&!or&&!fr;var mr=/Windows/i.test(ir);var gr=Ot()&&("ontouchstart"in n.a||n.a.navigator.maxTouchPoints||n.a.DocumentTouch&&n.a.document instanceof n.a.DocumentTouch);var yr=/iPad/i.test(ir)||vr&&gr&&!/iPhone/i.test(ir);var _r=/iPhone/i.test(ir)&&!yr;var br=_r||yr||ar;var Tr=(vr||br)&&!hr;var Sr=Object.freeze({__proto__:null,IS_IPOD:ar,IOS_VERSION:sr,IS_ANDROID:or,ANDROID_VERSION:ur,IS_NATIVE_ANDROID:lr,IS_FIREFOX:cr,IS_EDGE:fr,IS_CHROME:hr,CHROME_VERSION:dr,IE_VERSION:pr,IS_SAFARI:vr,IS_WINDOWS:mr,TOUCH_ENABLED:gr,IS_IPAD:yr,IS_IPHONE:_r,IS_IOS:br,IS_ANY_SAFARI:Tr});function kr(e,t,i){if(typeof t!=="number"||t<0||t>i){throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}}function wr(e,t,i,r){kr(e,r,i.length-1);return i[r][t]}function Cr(e){if(e===undefined||e.length===0){return{length:0,start:function e(){throw new Error("This TimeRanges object is empty")},end:function e(){throw new Error("This TimeRanges object is empty")}}}return{length:e.length,start:wr.bind(null,"start",0,e),end:wr.bind(null,"end",1,e)}}function Er(e,t){if(Array.isArray(e)){return Cr(e)}else if(e===undefined||t===undefined){return Cr()}return Cr([[e,t]])}function Ir(e,t){var i=0;var r;var n;if(!t){return 0}if(!e||!e.length){e=Er(0,0)}for(var a=0;a<e.length;a++){r=e.start(a);n=e.end(a);if(n>t){n=t}i+=n-r}return i/t}var Ar={prefixed:true};var xr=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]];var Pr=xr[0];var Lr;for(var Dr=0;Dr<xr.length;Dr++){if(xr[Dr][1]in s.a){Lr=xr[Dr];break}}if(Lr){for(var Or=0;Or<Lr.length;Or++){Ar[Pr[Or]]=Lr[Or]}Ar.prefixed=Lr[0]!==Pr[0]}function Nr(e){if(e instanceof Nr){return e}if(typeof e==="number"){this.code=e}else if(typeof e==="string"){this.message=e}else if(It(e)){if(typeof e.code==="number"){this.code=e.code}Et(this,e)}if(!this.message){this.message=Nr.defaultMessages[this.code]||""}}Nr.prototype.code=0;Nr.prototype.message="";Nr.prototype.status=null;Nr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Nr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Rr=0;Rr<Nr.errorTypes.length;Rr++){Nr[Nr.errorTypes[Rr]]=Rr;Nr.prototype[Nr.errorTypes[Rr]]=Rr}function Ur(e){return e!==undefined&&e!==null&&typeof e.then==="function"}function Mr(e){if(Ur(e)){e.then(null,(function(e){}))}}var Br=function e(t){var i=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(e,i,r){if(t[i]){e[i]=t[i]}return e}),{cues:t.cues&&Array.prototype.map.call(t.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))});return i};var jr=function e(t){var i=t.$$("track");var r=Array.prototype.map.call(i,(function(e){return e.track}));var n=Array.prototype.map.call(i,(function(e){var t=Br(e.track);if(e.src){t.src=e.src}return t}));return n.concat(Array.prototype.filter.call(t.textTracks(),(function(e){return r.indexOf(e)===-1})).map(Br))};var Fr=function e(t,i){t.forEach((function(e){var t=i.addRemoteTextTrack(e).track;if(!e.src&&e.cues){e.cues.forEach((function(e){return t.addCue(e)}))}}));return i.textTracks()};var Hr={textTracksToJson:jr,jsonToTextTracks:Fr,trackToJson_:Br};var Vr="vjs-modal-dialog";var qr=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=false;r.closeable(!r.options_.uncloseable);r.content(r.options_.content);r.contentEl_=Mt("div",{className:Vr+"-content"},{role:"document"});r.descEl_=Mt("p",{className:Vr+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")});Bt(r.descEl_,r.description());r.el_.appendChild(r.descEl_);r.el_.appendChild(r.contentEl_);return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};i.dispose=function t(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;e.prototype.dispose.call(this)};i.buildCSSClass=function t(){return Vr+" vjs-hidden "+e.prototype.buildCSSClass.call(this)};i.label=function e(){return this.localize(this.options_.label||"Modal Window")};i.description=function e(){var t=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")}return t};i.open=function e(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill()}this.wasPlaying_=!t.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){t.pause()}this.on("keydown",this.handleKeyDown);this.hadControls_=t.controls();t.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true}};i.opened=function e(t){if(typeof t==="boolean"){this[t?"open":"close"]()}return this.opened_};i.close=function e(){if(!this.opened_){return}var t=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){t.play()}this.off("keydown",this.handleKeyDown);if(this.hadControls_){t.controls(true)}this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose()}};i.closeable=function e(t){if(typeof t==="boolean"){var e=this.closeable_=!!t;var i=this.getChild("closeButton");if(e&&!i){var r=this.contentEl_;this.contentEl_=this.el_;i=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=r;this.on(i,"close",this.close)}if(!e&&i){this.off(i,"close",this.close);this.removeChild(i);i.dispose()}}return this.closeable_};i.fill=function e(){this.fillWith(this.content())};i.fillWith=function e(t){var i=this.contentEl();var r=i.parentNode;var n=i.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;r.removeChild(i);this.empty();ni(i,t);this.trigger("modalfill");if(n){r.insertBefore(i,n)}else{r.appendChild(i)}var a=this.getChild("closeButton");if(a){r.appendChild(a.el_)}};i.empty=function e(){this.trigger("beforemodalempty");ti(this.contentEl());this.trigger("modalempty")};i.content=function e(t){if(typeof t!=="undefined"){this.content_=t}return this.content_};i.conditionalFocus_=function e(){var t=s.a.activeElement;var i=this.player_.el_;this.previouslyActiveEl_=null;if(i.contains(t)||i===t){this.previouslyActiveEl_=t;this.focus()}};i.conditionalBlur_=function e(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null}};i.handleKeyDown=function e(t){t.stopPropagation();if(y.a.isEventKey(t,"Escape")&&this.closeable()){t.preventDefault();this.close();return}if(!y.a.isEventKey(t,"Tab")){return}var i=this.focusableEls_();var r=this.el_.querySelector(":focus");var n;for(var a=0;a<i.length;a++){if(r===i[a]){n=a;break}}if(s.a.activeElement===this.el_){n=0}if(t.shiftKey&&n===0){i[i.length-1].focus();t.preventDefault()}else if(!t.shiftKey&&n===i.length-1){i[0].focus();t.preventDefault()}};i.focusableEls_=function e(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,(function(e){return(e instanceof n.a.HTMLAnchorElement||e instanceof n.a.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof n.a.HTMLInputElement||e instanceof n.a.HTMLSelectElement||e instanceof n.a.HTMLTextAreaElement||e instanceof n.a.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof n.a.HTMLIFrameElement||e instanceof n.a.HTMLObjectElement||e instanceof n.a.HTMLEmbedElement||e.hasAttribute("tabindex")&&e.getAttribute("tabindex")!==-1||e.hasAttribute("contenteditable")}))};return t}(tr);qr.prototype.options_={pauseOnOpen:true,temporary:true};tr.registerComponent("ModalDialog",qr);var Wr=function(e){p()(t,e);function t(t){var i;if(t===void 0){t=[]}i=e.call(this)||this;i.tracks_=[];Object.defineProperty(c()(i),"length",{get:function e(){return this.tracks_.length}});for(var r=0;r<t.length;r++){i.addTrack(t[r])}return i}var i=t.prototype;i.addTrack=function e(t){var i=this.tracks_.length;if(!(""+i in this)){Object.defineProperty(this,i,{get:function e(){return this.tracks_[i]}})}if(this.tracks_.indexOf(t)===-1){this.tracks_.push(t);this.trigger({track:t,type:"addtrack",target:this})}};i.removeTrack=function e(t){var i;for(var r=0,n=this.length;r<n;r++){if(this[r]===t){i=this[r];if(i.off){i.off()}this.tracks_.splice(r,1);break}}if(!i){return}this.trigger({track:i,type:"removetrack",target:this})};i.getTrackById=function e(t){var i=null;for(var r=0,n=this.length;r<n;r++){var a=this[r];if(a.id===t){i=a;break}}return i};return t}(Mi);Wr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var zr in Wr.prototype.allowedEvents_){Wr.prototype["on"+zr]=null}var Gr=function e(t,i){for(var r=0;r<t.length;r++){if(!Object.keys(t[r]).length||i.id===t[r].id){continue}t[r].enabled=false}};var Xr=function(e){p()(t,e);function t(t){var i;if(t===void 0){t=[]}for(var r=t.length-1;r>=0;r--){if(t[r].enabled){Gr(t,t[r]);break}}i=e.call(this,t)||this;i.changing_=false;return i}var i=t.prototype;i.addTrack=function t(i){var r=this;if(i.enabled){Gr(this,i)}e.prototype.addTrack.call(this,i);if(!i.addEventListener){return}i.enabledChange_=function(){if(r.changing_){return}r.changing_=true;Gr(r,i);r.changing_=false;r.trigger("change")};i.addEventListener("enabledchange",i.enabledChange_)};i.removeTrack=function t(i){e.prototype.removeTrack.call(this,i);if(i.removeEventListener&&i.enabledChange_){i.removeEventListener("enabledchange",i.enabledChange_);i.enabledChange_=null}};return t}(Wr);var Kr=function e(t,i){for(var r=0;r<t.length;r++){if(!Object.keys(t[r]).length||i.id===t[r].id){continue}t[r].selected=false}};var Yr=function(e){p()(t,e);function t(t){var i;if(t===void 0){t=[]}for(var r=t.length-1;r>=0;r--){if(t[r].selected){Kr(t,t[r]);break}}i=e.call(this,t)||this;i.changing_=false;Object.defineProperty(c()(i),"selectedIndex",{get:function e(){for(var t=0;t<this.length;t++){if(this[t].selected){return t}}return-1},set:function e(){}});return i}var i=t.prototype;i.addTrack=function t(i){var r=this;if(i.selected){Kr(this,i)}e.prototype.addTrack.call(this,i);if(!i.addEventListener){return}i.selectedChange_=function(){if(r.changing_){return}r.changing_=true;Kr(r,i);r.changing_=false;r.trigger("change")};i.addEventListener("selectedchange",i.selectedChange_)};i.removeTrack=function t(i){e.prototype.removeTrack.call(this,i);if(i.removeEventListener&&i.selectedChange_){i.removeEventListener("selectedchange",i.selectedChange_);i.selectedChange_=null}};return t}(Wr);var $r=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.addTrack=function t(i){var r=this;e.prototype.addTrack.call(this,i);if(!this.queueChange_){this.queueChange_=function(){return r.queueTrigger("change")}}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return r.trigger("selectedlanguagechange")}}i.addEventListener("modechange",this.queueChange_);var n=["metadata","chapters"];if(n.indexOf(i.kind)===-1){i.addEventListener("modechange",this.triggerSelectedlanguagechange_)}};i.removeTrack=function t(i){e.prototype.removeTrack.call(this,i);if(i.removeEventListener){if(this.queueChange_){i.removeEventListener("modechange",this.queueChange_)}if(this.selectedlanguagechange_){i.removeEventListener("modechange",this.triggerSelectedlanguagechange_)}}};return t}(Wr);var Qr=function(){function e(e){if(e===void 0){e=[]}this.trackElements_=[];Object.defineProperty(this,"length",{get:function e(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++){this.addTrackElement_(e[t])}}var t=e.prototype;t.addTrackElement_=function e(t){var i=this.trackElements_.length;if(!(""+i in this)){Object.defineProperty(this,i,{get:function e(){return this.trackElements_[i]}})}if(this.trackElements_.indexOf(t)===-1){this.trackElements_.push(t)}};t.getTrackElementByTrack_=function e(t){var i;for(var r=0,n=this.trackElements_.length;r<n;r++){if(t===this.trackElements_[r].track){i=this.trackElements_[r];break}}return i};t.removeTrackElement_=function e(t){for(var i=0,r=this.trackElements_.length;i<r;i++){if(t===this.trackElements_[i]){if(this.trackElements_[i].track&&typeof this.trackElements_[i].track.off==="function"){this.trackElements_[i].track.off()}if(typeof this.trackElements_[i].off==="function"){this.trackElements_[i].off()}this.trackElements_.splice(i,1);break}}};return e}();var Jr=function(){function e(t){e.prototype.setCues_.call(this,t);Object.defineProperty(this,"length",{get:function e(){return this.length_}})}var t=e.prototype;t.setCues_=function e(t){var i=this.length||0;var r=0;var n=t.length;this.cues_=t;this.length_=t.length;var a=function e(t){if(!(""+t in this)){Object.defineProperty(this,""+t,{get:function e(){return this.cues_[t]}})}};if(i<n){r=i;for(;r<n;r++){a.call(this,r)}}};t.getCueById=function e(t){var i=null;for(var r=0,n=this.length;r<n;r++){var a=this[r];if(a.id===t){i=a;break}}return i};return e}();var Zr={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var en={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var tn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var rn={disabled:"disabled",hidden:"hidden",showing:"showing"};var nn=function(e){p()(t,e);function t(t){var i;if(t===void 0){t={}}i=e.call(this)||this;var r={id:t.id||"vjs_track_"+yi(),kind:t.kind||"",label:t.label||"",language:t.language||""};var n=function e(t){Object.defineProperty(c()(i),t,{get:function e(){return r[t]},set:function e(){}})};for(var a in r){n(a)}return i}return t}(Mi);var an=function e(t){var i=["protocol","hostname","port","pathname","search","hash","host"];var r=s.a.createElement("a");r.href=t;var a=r.host===""&&r.protocol!=="file:";var o;if(a){o=s.a.createElement("div");o.innerHTML='<a href="'+t+'"></a>';r=o.firstChild;o.setAttribute("style","display:none; position:absolute;");s.a.body.appendChild(o)}var u={};for(var l=0;l<i.length;l++){u[i[l]]=r[i[l]]}if(u.protocol==="http:"){u.host=u.host.replace(/:80$/,"")}if(u.protocol==="https:"){u.host=u.host.replace(/:443$/,"")}if(!u.protocol){u.protocol=n.a.location.protocol}if(a){s.a.body.removeChild(o)}return u};var sn=function e(t){if(!t.match(/^https?:\/\//)){var i=s.a.createElement("div");i.innerHTML='<a href="'+t+'">x</a>';t=i.firstChild.href}return t};var on=function e(t){if(typeof t==="string"){var i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/;var r=i.exec(t);if(r){return r.pop().toLowerCase()}}return""};var un=function e(t,i){if(i===void 0){i=n.a.location}var r=an(t);var a=r.protocol===":"?i.protocol:r.protocol;var s=a+r.host!==i.protocol+i.host;return s};var ln=Object.freeze({__proto__:null,parseUrl:an,getAbsoluteURL:sn,getFileExtension:on,isCrossOrigin:un});var cn=function e(t,i){var r=new n.a.WebVTT.Parser(n.a,n.a.vttjs,n.a.WebVTT.StringDecoder());var a=[];r.oncue=function(e){i.addCue(e)};r.onparsingerror=function(e){a.push(e)};r.onflush=function(){i.trigger({type:"loadeddata",target:i})};r.parse(t);if(a.length>0){if(n.a.console&&n.a.console.groupCollapsed){n.a.console.groupCollapsed("Text Track parsing errors for "+i.src)}a.forEach((function(e){return bt.error(e)}));if(n.a.console&&n.a.console.groupEnd){n.a.console.groupEnd()}}r.flush()};var fn=function e(t,i){var r={uri:t};var a=un(t);if(a){r.cors=a}b()(r,Ni(this,(function(e,t,r){if(e){return bt.error(e,t)}i.loaded_=true;if(typeof n.a.WebVTT!=="function"){if(i.tech_){i.tech_.any(["vttjsloaded","vttjserror"],(function(e){if(e.type==="vttjserror"){bt.error("vttjs failed to load, stopping trying to process "+i.src);return}return cn(r,i)}))}}else{cn(r,i)}})))};var hn=function(e){p()(t,e);function t(t){var i;if(t===void 0){t={}}if(!t.tech){throw new Error("A tech was not provided.")}var r=er(t,{kind:tn[t.kind]||"subtitles",language:t.language||t.srclang||""});var n=rn[r.mode]||"disabled";var a=r["default"];if(r.kind==="metadata"||r.kind==="chapters"){n="hidden"}i=e.call(this,r)||this;i.tech_=r.tech;i.cues_=[];i.activeCues_=[];i.preload_=i.tech_.preloadTextTracks!==false;var s=new Jr(i.cues_);var o=new Jr(i.activeCues_);var u=false;var l=Ni(c()(i),(function(){this.activeCues=this.activeCues;if(u){this.trigger("cuechange");u=false}}));if(n!=="disabled"){i.tech_.ready((function(){i.tech_.on("timeupdate",l)}),true)}Object.defineProperties(c()(i),{default:{get:function e(){return a},set:function e(){}},mode:{get:function e(){return n},set:function e(t){var i=this;if(!rn[t]){return}n=t;if(!this.preload_&&n!=="disabled"&&this.cues.length===0){fn(this.src,this)}if(n!=="disabled"){this.tech_.ready((function(){i.tech_.on("timeupdate",l)}),true)}else{this.tech_.off("timeupdate",l)}this.trigger("modechange")}},cues:{get:function e(){if(!this.loaded_){return null}return s},set:function e(){}},activeCues:{get:function e(){if(!this.loaded_){return null}if(this.cues.length===0){return o}var t=this.tech_.currentTime();var i=[];for(var r=0,n=this.cues.length;r<n;r++){var a=this.cues[r];if(a.startTime<=t&&a.endTime>=t){i.push(a)}else if(a.startTime===a.endTime&&a.startTime<=t&&a.startTime+.5>=t){i.push(a)}}u=false;if(i.length!==this.activeCues_.length){u=true}else{for(var s=0;s<i.length;s++){if(this.activeCues_.indexOf(i[s])===-1){u=true}}}this.activeCues_=i;o.setCues_(this.activeCues_);return o},set:function e(){}}});if(r.src){i.src=r.src;if(!i.preload_){i.loaded_=true}if(i.preload_||a||r.kind!=="subtitles"&&r.kind!=="captions"){fn(i.src,c()(i))}}else{i.loaded_=true}return i}var i=t.prototype;i.addCue=function e(t){var i=t;if(n.a.vttjs&&!(t instanceof n.a.vttjs.VTTCue)){i=new n.a.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var r in t){if(!(r in i)){i[r]=t[r]}}i.id=t.id;i.originalCue_=t}var a=this.tech_.textTracks();for(var s=0;s<a.length;s++){if(a[s]!==this){a[s].removeCue(i)}}this.cues_.push(i);this.cues.setCues_(this.cues_)};i.removeCue=function e(t){var i=this.cues_.length;while(i--){var r=this.cues_[i];if(r===t||r.originalCue_&&r.originalCue_===t){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break}}};return t}(nn);hn.prototype.allowedEvents_={cuechange:"cuechange"};var dn=function(e){p()(t,e);function t(t){var i;if(t===void 0){t={}}var r=er(t,{kind:en[t.kind]||""});i=e.call(this,r)||this;var n=false;Object.defineProperty(c()(i),"enabled",{get:function e(){return n},set:function e(t){if(typeof t!=="boolean"||t===n){return}n=t;this.trigger("enabledchange")}});if(r.enabled){i.enabled=r.enabled}i.loaded_=true;return i}return t}(nn);var pn=function(e){p()(t,e);function t(t){var i;if(t===void 0){t={}}var r=er(t,{kind:Zr[t.kind]||""});i=e.call(this,r)||this;var n=false;Object.defineProperty(c()(i),"selected",{get:function e(){return n},set:function e(t){if(typeof t!=="boolean"||t===n){return}n=t;this.trigger("selectedchange")}});if(r.selected){i.selected=r.selected}return i}return t}(nn);var vn=0;var mn=1;var gn=2;var yn=3;var _n=function(e){p()(t,e);function t(t){var i;if(t===void 0){t={}}i=e.call(this)||this;var r;var n=new hn(t);i.kind=n.kind;i.src=n.src;i.srclang=n.language;i.label=n.label;i["default"]=n["default"];Object.defineProperties(c()(i),{readyState:{get:function e(){return r}},track:{get:function e(){return n}}});r=vn;n.addEventListener("loadeddata",(function(){r=gn;i.trigger({type:"load",target:c()(i)})}));return i}return t}(Mi);_n.prototype.allowedEvents_={load:"load"};_n.NONE=vn;_n.LOADING=mn;_n.LOADED=gn;_n.ERROR=yn;var bn={audio:{ListClass:Xr,TrackClass:dn,capitalName:"Audio"},video:{ListClass:Yr,TrackClass:pn,capitalName:"Video"},text:{ListClass:$r,TrackClass:hn,capitalName:"Text"}};Object.keys(bn).forEach((function(e){bn[e].getterName=e+"Tracks";bn[e].privateName=e+"Tracks_"}));var Tn={remoteText:{ListClass:$r,TrackClass:hn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Qr,TrackClass:_n,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var Sn=u()({},bn,Tn);Tn.names=Object.keys(Tn);bn.names=Object.keys(bn);Sn.names=[].concat(Tn.names).concat(bn.names);function kn(e,t,i,r,n){if(n===void 0){n={}}var a=e.textTracks();n.kind=t;if(i){n.label=i}if(r){n.language=r}n.tech=e;var s=new Sn.text.TrackClass(n);a.addTrack(s);return s}var wn=function(e){p()(t,e);function t(t,i){var r;if(t===void 0){t={}}if(i===void 0){i=function e(){}}t.reportTouchActivity=false;r=e.call(this,null,t,i)||this;r.hasStarted_=false;r.on("playing",(function(){this.hasStarted_=true}));r.on("loadstart",(function(){this.hasStarted_=false}));Sn.names.forEach((function(e){var i=Sn[e];if(t&&t[i.getterName]){r[i.privateName]=t[i.getterName]}}));if(!r.featuresProgressEvents){r.manualProgressOn()}if(!r.featuresTimeupdateEvents){r.manualTimeUpdatesOn()}["Text","Audio","Video"].forEach((function(e){if(t["native"+e+"Tracks"]===false){r["featuresNative"+e+"Tracks"]=false}}));if(t.nativeCaptions===false||t.nativeTextTracks===false){r.featuresNativeTextTracks=false}else if(t.nativeCaptions===true||t.nativeTextTracks===true){r.featuresNativeTextTracks=true}if(!r.featuresNativeTextTracks){r.emulateTextTracks()}r.preloadTextTracks=t.preloadTextTracks!==false;r.autoRemoteTextTracks_=new Sn.text.ListClass;r.initTrackListeners();if(!t.nativeControlsForTouch){r.emitTapEvents()}if(r.constructor){r.name_=r.constructor.name||"Unknown Tech"}return r}var i=t.prototype;i.triggerSourceset=function e(t){var i=this;if(!this.isReady_){this.one("ready",(function(){return i.setTimeout((function(){return i.triggerSourceset(t)}),1)}))}this.trigger({src:t,type:"sourceset"})};i.manualProgressOn=function e(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress)};i.manualProgressOff=function e(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};i.trackProgress=function e(t){this.stopTrackingProgress();this.progressInterval=this.setInterval(Ni(this,(function(){var e=this.bufferedPercent();if(this.bufferedPercent_!==e){this.trigger("progress")}this.bufferedPercent_=e;if(e===1){this.stopTrackingProgress()}})),500)};i.onDurationChange=function e(t){this.duration_=this.duration()};i.buffered=function e(){return Er(0,0)};i.bufferedPercent=function e(){return Ir(this.buffered(),this.duration_)};i.stopTrackingProgress=function e(){this.clearInterval(this.progressInterval)};i.manualTimeUpdatesOn=function e(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};i.manualTimeUpdatesOff=function e(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};i.trackCurrentTime=function e(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}),250)};i.stopTrackingCurrentTime=function e(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})};i.dispose=function t(){this.clearTracks(bn.names);if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}e.prototype.dispose.call(this)};i.clearTracks=function e(t){var i=this;t=[].concat(t);t.forEach((function(e){var t=i[e+"Tracks"]()||[];var r=t.length;while(r--){var n=t[r];if(e==="text"){i.removeRemoteTextTrack(n)}t.removeTrack(n)}}))};i.cleanupAutoTextTracks=function e(){var t=this.autoRemoteTextTracks_||[];var i=t.length;while(i--){var r=t[i];this.removeRemoteTextTrack(r)}};i.reset=function e(){};i.error=function e(t){if(t!==undefined){this.error_=new Nr(t);this.trigger("error")}return this.error_};i.played=function e(){if(this.hasStarted_){return Er(0,0)}return Er()};i.setCurrentTime=function e(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}};i.initTrackListeners=function e(){var t=this;bn.names.forEach((function(e){var i=bn[e];var r=function i(){t.trigger(e+"trackchange")};var n=t[i.getterName]();n.addEventListener("removetrack",r);n.addEventListener("addtrack",r);t.on("dispose",(function(){n.removeEventListener("removetrack",r);n.removeEventListener("addtrack",r)}))}))};i.addWebVttScript_=function e(){var t=this;if(n.a.WebVTT){return}if(s.a.body.contains(this.el())){if(!this.options_["vtt.js"]&&At(S.a)&&Object.keys(S.a).length>0){this.trigger("vttjsloaded");return}var i=s.a.createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";i.onload=function(){t.trigger("vttjsloaded")};i.onerror=function(){t.trigger("vttjserror")};this.on("dispose",(function(){i.onload=null;i.onerror=null}));n.a.WebVTT=true;this.el().parentNode.appendChild(i)}else{this.ready(this.addWebVttScript_)}};i.emulateTextTracks=function e(){var t=this;var i=this.textTracks();var r=this.remoteTextTracks();var n=function e(t){return i.addTrack(t.track)};var a=function e(t){return i.removeTrack(t.track)};r.on("addtrack",n);r.on("removetrack",a);this.addWebVttScript_();var s=function e(){return t.trigger("texttrackchange")};var o=function e(){s();for(var t=0;t<i.length;t++){var r=i[t];r.removeEventListener("cuechange",s);if(r.mode==="showing"){r.addEventListener("cuechange",s)}}};o();i.addEventListener("change",o);i.addEventListener("addtrack",o);i.addEventListener("removetrack",o);this.on("dispose",(function(){r.off("addtrack",n);r.off("removetrack",a);i.removeEventListener("change",o);i.removeEventListener("addtrack",o);i.removeEventListener("removetrack",o);for(var e=0;e<i.length;e++){var t=i[e];t.removeEventListener("cuechange",s)}}))};i.addTextTrack=function e(t,i,r){if(!t){throw new Error("TextTrack kind is required but was not provided")}return kn(this,t,i,r)};i.createRemoteTextTrack=function e(t){var i=er(t,{tech:this});return new Tn.remoteTextEl.TrackClass(i)};i.addRemoteTextTrack=function e(t,i){var r=this;if(t===void 0){t={}}var n=this.createRemoteTextTrack(t);if(i!==true&&i!==false){bt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');i=true}this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack(n.track);if(i!==true){this.ready((function(){return r.autoRemoteTextTracks_.addTrack(n.track)}))}return n};i.removeRemoteTextTrack=function e(t){var i=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(i);this.remoteTextTracks().removeTrack(t);this.autoRemoteTextTracks_.removeTrack(t)};i.getVideoPlaybackQuality=function e(){return{}};i.requestPictureInPicture=function e(){var t=this.options_.Promise||n.a.Promise;if(t){return t.reject()}};i.setPoster=function e(){};i.playsinline=function e(){};i.setPlaysinline=function e(){};i.overrideNativeAudioTracks=function e(){};i.overrideNativeVideoTracks=function e(){};i.canPlayType=function e(){return""};t.canPlayType=function e(){return""};t.canPlaySource=function e(i,r){return t.canPlayType(i.type)};t.isTech=function e(i){return i.prototype instanceof t||i instanceof t||i===t};t.registerTech=function e(i,r){if(!t.techs_){t.techs_={}}if(!t.isTech(r)){throw new Error("Tech "+i+" must be a Tech")}if(!t.canPlayType){throw new Error("Techs must have a static canPlayType method on them")}if(!t.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them")}i=Ji(i);t.techs_[i]=r;t.techs_[Qi(i)]=r;if(i!=="Tech"){t.defaultTechOrder_.push(i)}return r};t.getTech=function e(i){if(!i){return}if(t.techs_&&t.techs_[i]){return t.techs_[i]}i=Ji(i);if(n.a&&n.a.videojs&&n.a.videojs[i]){bt.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return n.a.videojs[i]}};return t}(tr);Sn.names.forEach((function(e){var t=Sn[e];wn.prototype[t.getterName]=function(){this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}}));wn.prototype.featuresVolumeControl=true;wn.prototype.featuresMuteControl=true;wn.prototype.featuresFullscreenResize=false;wn.prototype.featuresPlaybackRate=false;wn.prototype.featuresProgressEvents=false;wn.prototype.featuresSourceset=false;wn.prototype.featuresTimeupdateEvents=false;wn.prototype.featuresNativeTextTracks=false;wn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var r=e.sourceHandlers;if(!r){r=e.sourceHandlers=[]}if(i===undefined){i=r.length}r.splice(i,0,t)};e.canPlayType=function(t){var i=e.sourceHandlers||[];var r;for(var n=0;n<i.length;n++){r=i[n].canPlayType(t);if(r){return r}}return""};e.selectSourceHandler=function(t,i){var r=e.sourceHandlers||[];var n;for(var a=0;a<r.length;a++){n=r[a].canHandleSource(t,i);if(n){return r[a]}}return null};e.canPlaySource=function(t,i){var r=e.selectSourceHandler(t,i);if(r){return r.canHandleSource(t,i)}return""};var t=["seekable","seeking","duration"];t.forEach((function(e){var t=this[e];if(typeof t!=="function"){return}this[e]=function(){if(this.sourceHandler_&&this.sourceHandler_[e]){return this.sourceHandler_[e].apply(this.sourceHandler_,arguments)}return t.apply(this,arguments)}}),e.prototype);e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);if(!i){if(e.nativeSourceHandler){i=e.nativeSourceHandler}else{bt.error("No source handler found for the current source.")}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(i!==e.nativeSourceHandler){this.currentSource_=t}this.sourceHandler_=i.handleSource(t,this,this.options_);this.one("dispose",this.disposeSourceHandler)};e.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null}this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose()}this.sourceHandler_=null}}};tr.registerComponent("Tech",wn);wn.registerTech("Tech",wn);wn.defaultTechOrder_=[];var Cn={};var En={};var In={};function An(e,t){Cn[e]=Cn[e]||[];Cn[e].push(t)}function xn(e,t,i){e.setTimeout((function(){return Hn(t,Cn[t.type],i,e)}),1)}function Pn(e,t){e.forEach((function(e){return e.setTech&&e.setTech(t)}))}function Ln(e,t,i){return e.reduceRight(Mn(i),t[i]())}function Dn(e,t,i,r){return t[i](e.reduce(Mn(i),r))}function On(e,t,i,r){if(r===void 0){r=null}var n="call"+Ji(i);var a=e.reduce(Mn(n),r);var s=a===In;var o=s?null:t[i](a);Bn(e,i,o,s);return o}var Nn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1};var Rn={setCurrentTime:1,setMuted:1,setVolume:1};var Un={play:1,pause:1};function Mn(e){return function(t,i){if(t===In){return In}if(i[e]){return i[e](t)}return t}}function Bn(e,t,i,r){for(var n=e.length-1;n>=0;n--){var a=e[n];if(a[t]){a[t](r,i)}}}function jn(e){En[e.id()]=null}function Fn(e,t){var i=En[e.id()];var r=null;if(i===undefined||i===null){r=t(e);En[e.id()]=[[t,r]];return r}for(var n=0;n<i.length;n++){var a=i[n],s=a[0],o=a[1];if(s!==t){continue}r=o}if(r===null){r=t(e);i.push([t,r])}return r}function Hn(e,t,i,r,n,a){if(e===void 0){e={}}if(t===void 0){t=[]}if(n===void 0){n=[]}if(a===void 0){a=false}var s=t,o=s[0],u=s.slice(1);if(typeof o==="string"){Hn(e,Cn[o],i,r,n,a)}else if(o){var l=Fn(r,o);if(!l.setSource){n.push(l);return Hn(e,u,i,r,n,a)}l.setSource(Et({},e),(function(t,s){if(t){return Hn(e,u,i,r,n,a)}n.push(l);Hn(s,e.type===s.type?u:Cn[s.type],i,r,n,a)}))}else if(u.length){Hn(e,u,i,r,n,a)}else if(a){i(e,n)}else{Hn(e,Cn["*"],i,r,n,true)}}var Vn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};var qn=function e(t){if(t===void 0){t=""}var i=on(t);var r=Vn[i.toLowerCase()];return r||""};var Wn=function e(t,i){if(!i){return""}if(t.cache_.source.src===i&&t.cache_.source.type){return t.cache_.source.type}var r=t.cache_.sources.filter((function(e){return e.src===i}));if(r.length){return r[0].type}var n=t.$$("source");for(var a=0;a<n.length;a++){var s=n[a];if(s.type&&s.src&&s.src===i){return s.type}}return qn(i)};var zn=function e(t){if(Array.isArray(t)){var i=[];t.forEach((function(t){t=e(t);if(Array.isArray(t)){i=i.concat(t)}else if(It(t)){i.push(t)}}));t=i}else if(typeof t==="string"&&t.trim()){t=[Gn({src:t})]}else if(It(t)&&typeof t.src==="string"&&t.src&&t.src.trim()){t=[Gn(t)]}else{t=[]}return t};function Gn(e){if(!e.type){var t=qn(e.src);if(t){e.type=t}}return e}var Xn=function(e){p()(t,e);function t(t,i,r){var n;var a=er({createEl:false},i);n=e.call(this,t,a,r)||this;if(!i.playerOptions.sources||i.playerOptions.sources.length===0){for(var s=0,o=i.playerOptions.techOrder;s<o.length;s++){var u=Ji(o[s]);var l=wn.getTech(u);if(!u){l=tr.getComponent(u)}if(l&&l.isSupported()){t.loadTech_(u);break}}}else{t.src(i.playerOptions.sources)}return n}return t}(tr);tr.registerComponent("MediaLoader",Xn);var Kn=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.emitTapEvents();r.enable();return r}var i=t.prototype;i.createEl=function t(i,r,n){if(i===void 0){i="div"}if(r===void 0){r={}}if(n===void 0){n={}}r=Et({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},r);if(i==="button"){bt.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead.")}n=Et({role:"button"},n);this.tabIndex_=r.tabIndex;var a=e.prototype.createEl.call(this,i,r,n);this.createControlTextEl(a);return a};i.dispose=function t(){this.controlTextEl_=null;e.prototype.dispose.call(this)};i.createControlTextEl=function e(t){this.controlTextEl_=Mt("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(t){t.appendChild(this.controlTextEl_)}this.controlText(this.controlText_,t);return this.controlTextEl_};i.controlText=function e(t,i){if(i===void 0){i=this.el()}if(t===undefined){return this.controlText_||"Need Text"}var r=this.localize(t);this.controlText_=t;Bt(this.controlTextEl_,r);if(!this.nonIconControl){i.setAttribute("title",r)}};i.buildCSSClass=function t(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)};i.enable=function e(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_)}this.on(["tap","click"],this.handleClick);this.on("keydown",this.handleKeyDown)}};i.disable=function e(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex")}this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};i.handleClick=function e(t){if(this.options_.clickHandler){this.options_.clickHandler.call(this,arguments)}};i.handleKeyDown=function t(i){if(y.a.isEventKey(i,"Space")||y.a.isEventKey(i,"Enter")){i.preventDefault();i.stopPropagation();this.trigger("click")}else{e.prototype.handleKeyDown.call(this,i)}};return t}(tr);tr.registerComponent("ClickableComponent",Kn);var Yn=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.update();t.on("posterchange",Ni(c()(r),r.update));return r}var i=t.prototype;i.dispose=function t(){this.player().off("posterchange",this.update);e.prototype.dispose.call(this)};i.createEl=function e(){var t=Mt("div",{className:"vjs-poster",tabIndex:-1});return t};i.update=function e(t){var i=this.player().poster();this.setSrc(i);if(i){this.show()}else{this.hide()}};i.setSrc=function e(t){var i="";if(t){i='url("'+t+'")'}this.el_.style.backgroundImage=i};i.handleClick=function e(t){if(!this.player_.controls()){return}var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;if(this.player_.tech(true)&&!((pr||fr)&&i)){this.player_.tech(true).focus()}if(this.player_.paused()){Mr(this.player_.play())}else{this.player_.pause()}};return t}(Kn);tr.registerComponent("PosterImage",Yn);var $n="#222";var Qn="#ccc";var Jn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Zn(e,t){var i;if(e.length===4){i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}else if(e.length===7){i=e.slice(1)}else{throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.")}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function ea(e,t,i){try{e.style[t]=i}catch(e){return}}var ta=function(e){p()(t,e);function t(t,i,r){var a;a=e.call(this,t,i,r)||this;var s=Ni(c()(a),a.updateDisplay);t.on("loadstart",Ni(c()(a),a.toggleDisplay));t.on("texttrackchange",s);t.on("loadedmetadata",Ni(c()(a),a.preselectTrack));t.ready(Ni(c()(a),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks){this.hide();return}t.on("fullscreenchange",s);t.on("playerresize",s);n.a.addEventListener("orientationchange",s);t.on("dispose",(function(){return n.a.removeEventListener("orientationchange",s)}));var e=this.options_.playerOptions.tracks||[];for(var i=0;i<e.length;i++){this.player_.addRemoteTextTrack(e[i],true)}this.preselectTrack()})));return a}var i=t.prototype;i.preselectTrack=function e(){var t={captions:1,subtitles:1};var i=this.player_.textTracks();var r=this.player_.cache_.selectedLanguage;var n;var a;var s;for(var o=0;o<i.length;o++){var u=i[o];if(r&&r.enabled&&r.language&&r.language===u.language&&u.kind in t){if(u.kind===r.kind){s=u}else if(!s){s=u}}else if(r&&!r.enabled){s=null;n=null;a=null}else if(u["default"]){if(u.kind==="descriptions"&&!n){n=u}else if(u.kind in t&&!a){a=u}}}if(s){s.mode="showing"}else if(a){a.mode="showing"}else if(n){n.mode="showing"}};i.toggleDisplay=function e(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide()}else{this.show()}};i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};i.clearDisplay=function e(){if(typeof n.a.WebVTT==="function"){n.a.WebVTT.processCues(n.a,[],this.el_)}};i.updateDisplay=function e(){var t=this.player_.textTracks();var i=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(i){var r=[];for(var n=0;n<t.length;++n){var a=t[n];if(a.mode!=="showing"){continue}r.push(a)}this.updateForTrack(r);return}var s=null;var o=null;var u=t.length;while(u--){var l=t[u];if(l.mode==="showing"){if(l.kind==="descriptions"){s=l}else{o=l}}}if(o){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off")}this.updateForTrack(o)}else if(s){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive")}this.updateForTrack(s)}};i.updateDisplayState=function e(t){var i=this.player_.textTrackSettings.getValues();var r=t.activeCues;var a=r.length;while(a--){var s=r[a];if(!s){continue}var o=s.displayState;if(i.color){o.firstChild.style.color=i.color}if(i.textOpacity){ea(o.firstChild,"color",Zn(i.color||"#fff",i.textOpacity))}if(i.backgroundColor){o.firstChild.style.backgroundColor=i.backgroundColor}if(i.backgroundOpacity){ea(o.firstChild,"backgroundColor",Zn(i.backgroundColor||"#000",i.backgroundOpacity))}if(i.windowColor){if(i.windowOpacity){ea(o,"backgroundColor",Zn(i.windowColor,i.windowOpacity))}else{o.style.backgroundColor=i.windowColor}}if(i.edgeStyle){if(i.edgeStyle==="dropshadow"){o.firstChild.style.textShadow="2px 2px 3px "+$n+", 2px 2px 4px "+$n+", 2px 2px 5px "+$n}else if(i.edgeStyle==="raised"){o.firstChild.style.textShadow="1px 1px "+$n+", 2px 2px "+$n+", 3px 3px "+$n}else if(i.edgeStyle==="depressed"){o.firstChild.style.textShadow="1px 1px "+Qn+", 0 1px "+Qn+", -1px -1px "+$n+", 0 -1px "+$n}else if(i.edgeStyle==="uniform"){o.firstChild.style.textShadow="0 0 4px "+$n+", 0 0 4px "+$n+", 0 0 4px "+$n+", 0 0 4px "+$n}}if(i.fontPercent&&i.fontPercent!==1){var u=n.a.parseFloat(o.style.fontSize);o.style.fontSize=u*i.fontPercent+"px";o.style.height="auto";o.style.top="auto";o.style.bottom="2px"}if(i.fontFamily&&i.fontFamily!=="default"){if(i.fontFamily==="small-caps"){o.firstChild.style.fontVariant="small-caps"}else{o.firstChild.style.fontFamily=Jn[i.fontFamily]}}}};i.updateForTrack=function e(t){if(!Array.isArray(t)){t=[t]}if(typeof n.a.WebVTT!=="function"||t.every((function(e){return!e.activeCues}))){return}var i=[];for(var r=0;r<t.length;++r){var a=t[r];for(var s=0;s<a.activeCues.length;++s){i.push(a.activeCues[s])}}n.a.WebVTT.processCues(n.a,i,this.el_);for(var o=0;o<t.length;++o){var u=t[o];for(var l=0;l<u.activeCues.length;++l){var c=u.activeCues[l].displayState;Ht(c,"vjs-text-track-cue");Ht(c,"vjs-text-track-cue-"+(u.language?u.language:o))}if(this.player_.textTrackSettings){this.updateDisplayState(u)}}};return t}(tr);tr.registerComponent("TextTrackDisplay",ta);var ia=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(){var i=this.player_.isAudio();var r=this.localize(i?"Audio Player":"Video Player");var n=Mt("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[r])});var a=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});a.appendChild(n);return a};return t}(tr);tr.registerComponent("LoadingSpinner",ia);var ra=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function e(t,i,r){if(i===void 0){i={}}if(r===void 0){r={}}t="button";i=Et({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},i);r=Et({type:"button"},r);var n=tr.prototype.createEl.call(this,t,i,r);this.createControlTextEl(n);return n};i.addChild=function e(t,i){if(i===void 0){i={}}var r=this.constructor.name;bt.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead.");return tr.prototype.addChild.call(this,t,i)};i.enable=function t(){e.prototype.enable.call(this);this.el_.removeAttribute("disabled")};i.disable=function t(){e.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};i.handleKeyDown=function t(i){if(y.a.isEventKey(i,"Space")||y.a.isEventKey(i,"Enter")){i.stopPropagation();return}e.prototype.handleKeyDown.call(this,i)};return t}(Kn);tr.registerComponent("Button",ra);var na=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.mouseused_=false;r.on("mousedown",r.handleMouseDown);return r}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-big-play-button"};i.handleClick=function e(t){var i=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var r=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Mr(i);if(this.player_.tech(true)&&!((pr||fr)&&r)){this.player_.tech(true).focus()}return}var n=this.player_.getChild("controlBar");var a=n&&n.getChild("playToggle");if(!a){this.player_.tech(true).focus();return}var s=function e(){return a.focus()};if(Ur(i)){i.then(s,(function(){}))}else{this.setTimeout(s,1)}};i.handleKeyDown=function t(i){this.mouseused_=false;e.prototype.handleKeyDown.call(this,i)};i.handleMouseDown=function e(t){this.mouseused_=true};return t}(ra);na.prototype.controlText_="Play Video";tr.registerComponent("BigPlayButton",na);var aa=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.controlText(i&&i.controlText||r.localize("Close"));return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)};i.handleClick=function e(t){this.trigger({type:"close",bubbles:false})};i.handleKeyDown=function t(i){if(y.a.isEventKey(i,"Esc")){i.preventDefault();i.stopPropagation();this.trigger("click")}else{e.prototype.handleKeyDown.call(this,i)}};return t}(ra);tr.registerComponent("CloseButton",aa);var sa=function(e){p()(t,e);function t(t,i){var r;if(i===void 0){i={}}r=e.call(this,t,i)||this;i.replay=i.replay===undefined||i.replay;r.on(t,"play",r.handlePlay);r.on(t,"pause",r.handlePause);if(i.replay){r.on(t,"ended",r.handleEnded)}return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)};i.handleClick=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};i.handleSeeked=function e(t){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(t)}else{this.handlePlay(t)}};i.handlePlay=function e(t){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};i.handlePause=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};i.handleEnded=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return t}(ra);sa.prototype.controlText_="Play";tr.registerComponent("PlayToggle",sa);var oa=function e(t,i){t=t<0?0:t;var r=Math.floor(t%60);var n=Math.floor(t/60%60);var a=Math.floor(t/3600);var s=Math.floor(i/60%60);var o=Math.floor(i/3600);if(isNaN(t)||t===Infinity){a=n=r="-"}a=a>0||o>0?a+":":"";n=((a||s>=10)&&n<10?"0"+n:n)+":";r=r<10?"0"+r:r;return a+n+r};var ua=oa;function la(e){ua=e}function ca(){ua=oa}function fa(e,t){if(t===void 0){t=e}return ua(e,t)}var ha=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,["timeupdate","ended"],r.updateContent);r.updateTextNode_();return r}var i=t.prototype;i.createEl=function t(){var i=this.buildCSSClass();var r=e.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});this.contentEl_=Mt("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"});r.appendChild(this.contentEl_);return r};i.dispose=function t(){this.contentEl_=null;this.textNode_=null;e.prototype.dispose.call(this)};i.updateTextNode_=function e(t){var i=this;if(t===void 0){t=0}t=fa(t);if(this.formattedTime_===t){return}this.formattedTime_=t;this.requestAnimationFrame((function(){if(!i.contentEl_){return}var e=i.textNode_;i.textNode_=s.a.createTextNode(i.formattedTime_);if(!i.textNode_){return}if(e){i.contentEl_.replaceChild(i.textNode_,e)}else{i.contentEl_.appendChild(i.textNode_)}}))};i.updateContent=function e(t){};return t}(tr);ha.prototype.labelText_="Time";ha.prototype.controlText_="Time";tr.registerComponent("TimeDisplay",ha);var da=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-current-time"};i.updateContent=function e(t){var i;if(this.player_.ended()){i=this.player_.duration()}else{i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}this.updateTextNode_(i)};return t}(ha);da.prototype.labelText_="Current Time";da.prototype.controlText_="Current Time";tr.registerComponent("CurrentTimeDisplay",da);var pa=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,"durationchange",r.updateContent);r.on(t,"loadstart",r.updateContent);r.on(t,"loadedmetadata",r.updateContent);return r}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-duration"};i.updateContent=function e(t){var i=this.player_.duration();this.updateTextNode_(i)};return t}(ha);pa.prototype.labelText_="Duration";pa.prototype.controlText_="Duration";tr.registerComponent("DurationDisplay",pa);var va=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":true})};return t}(tr);tr.registerComponent("TimeDivider",va);var ma=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,"durationchange",r.updateContent);return r}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-remaining-time"};i.createEl=function t(){var i=e.prototype.createEl.call(this);i.insertBefore(Mt("span",{},{"aria-hidden":true},"-"),this.contentEl_);return i};i.updateContent=function e(t){if(typeof this.player_.duration()!=="number"){return}var i;if(this.player_.ended()){i=0}else if(this.player_.remainingTimeDisplay){i=this.player_.remainingTimeDisplay()}else{i=this.player_.remainingTime()}this.updateTextNode_(i)};return t}(ha);ma.prototype.labelText_="Remaining Time";ma.prototype.controlText_="Remaining Time";tr.registerComponent("RemainingTimeDisplay",ma);var ga=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.updateShowing();r.on(r.player(),"durationchange",r.updateShowing);return r}var i=t.prototype;i.createEl=function t(){var i=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=Mt("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"});i.appendChild(this.contentEl_);return i};i.dispose=function t(){this.contentEl_=null;e.prototype.dispose.call(this)};i.updateShowing=function e(t){if(this.player().duration()===Infinity){this.show()}else{this.hide()}};return t}(tr);tr.registerComponent("LiveDisplay",ga);var ya=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.updateLiveEdgeStatus();if(r.player_.liveTracker){r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatus)}return r}var i=t.prototype;i.createEl=function t(){var i=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=Mt("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});i.appendChild(this.textEl_);return i};i.updateLiveEdgeStatus=function e(){if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute("aria-disabled",true);this.addClass("vjs-at-live-edge");this.controlText("Seek to live, currently playing live")}else{this.setAttribute("aria-disabled",false);this.removeClass("vjs-at-live-edge");this.controlText("Seek to live, currently behind live")}};i.handleClick=function e(){this.player_.liveTracker.seekToLiveEdge()};i.dispose=function t(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus)}this.textEl_=null;e.prototype.dispose.call(this)};return t}(ra);ya.prototype.controlText_="Seek to live, currently playing live";tr.registerComponent("SeekToLive",ya);var _a=function e(t,i,r){t=Number(t);return Math.min(r,Math.max(i,isNaN(t)?i:t))};var ba=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.bar=r.getChild(r.options_.barName);r.vertical(!!r.options_.vertical);r.enable();return r}var i=t.prototype;i.enabled=function e(){return this.enabled_};i.enable=function e(){if(this.enabled()){return}this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update)}this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true};i.disable=function e(){if(!this.enabled()){return}var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update)}this.enabled_=false};i.createEl=function t(i,r,n){if(r===void 0){r={}}if(n===void 0){n={}}r.className=r.className+" vjs-slider";r=Et({tabIndex:0},r);n=Et({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n);return e.prototype.createEl.call(this,i,r,n)};i.handleMouseDown=function e(t){var i=this.bar.el_.ownerDocument;if(t.type==="mousedown"){t.preventDefault()}if(t.type==="touchstart"&&!hr){t.preventDefault()}Yt();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(i,"mousemove",this.handleMouseMove);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchmove",this.handleMouseMove);this.on(i,"touchend",this.handleMouseUp);this.handleMouseMove(t)};i.handleMouseMove=function e(t){};i.handleMouseUp=function e(){var t=this.bar.el_.ownerDocument;$t();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.update()};i.update=function e(){var t=this;if(!this.el_||!this.bar){return}var i=this.getProgress();if(i===this.progress_){return i}this.progress_=i;this.requestAnimationFrame((function(){var e=t.vertical()?"height":"width";t.bar.el().style[e]=(i*100).toFixed(2)+"%"}));return i};i.getProgress=function e(){return Number(_a(this.getPercent(),0,1).toFixed(4))};i.calculateDistance=function e(t){var i=Zt(this.el_,t);if(this.vertical()){return i.y}return i.x};i.handleKeyDown=function t(i){if(y.a.isEventKey(i,"Left")||y.a.isEventKey(i,"Down")){i.preventDefault();i.stopPropagation();this.stepBack()}else if(y.a.isEventKey(i,"Right")||y.a.isEventKey(i,"Up")){i.preventDefault();i.stopPropagation();this.stepForward()}else{e.prototype.handleKeyDown.call(this,i)}};i.handleClick=function e(t){t.stopPropagation();t.preventDefault()};i.vertical=function e(t){if(t===undefined){return this.vertical_||false}this.vertical_=!!t;if(this.vertical_){this.addClass("vjs-slider-vertical")}else{this.addClass("vjs-slider-horizontal")}};return t}(tr);tr.registerComponent("Slider",ba);var Ta=function e(t,i){return _a(t/i*100,0,100).toFixed(2)+"%"};var Sa=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.partEls_=[];r.on(t,"progress",r.update);return r}var i=t.prototype;i.createEl=function t(){var i=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"});var r=Mt("span",{className:"vjs-control-text"});var n=Mt("span",{textContent:this.localize("Loaded")});var a=s.a.createTextNode(": ");this.percentageEl_=Mt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});i.appendChild(r);r.appendChild(n);r.appendChild(a);r.appendChild(this.percentageEl_);return i};i.dispose=function t(){this.partEls_=null;this.percentageEl_=null;e.prototype.dispose.call(this)};i.update=function e(t){var i=this;this.requestAnimationFrame((function(){var e=i.player_.liveTracker;var t=i.player_.buffered();var r=e&&e.isLive()?e.seekableEnd():i.player_.duration();var n=i.player_.bufferedEnd();var a=i.partEls_;var s=Ta(n,r);if(i.percent_!==s){i.el_.style.width=s;Bt(i.percentageEl_,s);i.percent_=s}for(var o=0;o<t.length;o++){var u=t.start(o);var l=t.end(o);var c=a[o];if(!c){c=i.el_.appendChild(Mt());a[o]=c}if(c.dataset.start===u&&c.dataset.end===l){continue}c.dataset.start=u;c.dataset.end=l;c.style.left=Ta(u,n);c.style.width=Ta(l-u,n)}for(var f=a.length;f>t.length;f--){i.el_.removeChild(a[f-1])}a.length=t.length}))};return t}(tr);tr.registerComponent("LoadProgressBar",Sa);var ka=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.update=Ri(Ni(c()(r),r.update),Oi);return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};i.update=function e(t,i,r){var n=Qt(this.el_);var a=Qt(this.player_.el());var s=t.width*i;if(!a||!n){return}var o=t.left-a.left+s;var u=t.width-s+(a.right-t.right);var l=n.width/2;if(o<l){l+=l-o}else if(u<l){l=u}if(l<0){l=0}else if(l>n.width){l=n.width}this.el_.style.right="-"+l+"px";this.write(r)};i.write=function e(t){Bt(this.el_,t)};i.updateTime=function e(t,i,r,n){var a=this;if(this.rafId_){this.cancelAnimationFrame(this.rafId_)}this.rafId_=this.requestAnimationFrame((function(){var e;var s=a.player_.duration();if(a.player_.liveTracker&&a.player_.liveTracker.isLive()){var o=a.player_.liveTracker.liveWindow();var u=o-i*o;e=(u<1?"":"-")+fa(u,o)}else{e=fa(r,s)}a.update(t,i,e);if(n){n()}}))};return t}(tr);tr.registerComponent("TimeTooltip",ka);var wa=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.update=Ri(Ni(c()(r),r.update),Oi);return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};i.update=function e(t,i){var r=this.getChild("timeTooltip");if(!r){return}var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(t,i,n)};return t}(tr);wa.prototype.options_={children:[]};if(!br&&!or){wa.prototype.options_.children.push("timeTooltip")}tr.registerComponent("PlayProgressBar",wa);var Ca=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.update=Ri(Ni(c()(r),r.update),Oi);return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};i.update=function e(t,i){var r=this;var n=i*this.player_.duration();this.getChild("timeTooltip").updateTime(t,i,n,(function(){r.el_.style.left=t.width*i+"px"}))};return t}(tr);Ca.prototype.options_={children:["timeTooltip"]};tr.registerComponent("MouseTimeDisplay",Ca);var Ea=5;var Ia=12;var Aa=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.setEventHandlers_();return r}var i=t.prototype;i.setEventHandlers_=function e(){this.update_=Ni(this,this.update);this.update=Ri(this.update_,Oi);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in s.a&&"visibilityState"in s.a){this.on(s.a,"visibilitychange",this.toggleVisibility_)}};i.toggleVisibility_=function e(t){if(s.a.hidden){this.disableInterval_(t)}else{this.enableInterval_();this.update()}};i.enableInterval_=function e(){if(this.updateInterval){return}this.updateInterval=this.setInterval(this.update,Oi)};i.disableInterval_=function e(t){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"){return}if(!this.updateInterval){return}this.clearInterval(this.updateInterval);this.updateInterval=null};i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};i.update=function t(i){var r=this;var n=e.prototype.update.call(this);this.requestAnimationFrame((function(){var e=r.player_.ended()?r.player_.duration():r.getCurrentTime_();var t=r.player_.liveTracker;var i=r.player_.duration();if(t&&t.isLive()){i=r.player_.liveTracker.liveCurrentTime()}if(r.percent_!==n){r.el_.setAttribute("aria-valuenow",(n*100).toFixed(2));r.percent_=n}if(r.currentTime_!==e||r.duration_!==i){r.el_.setAttribute("aria-valuetext",r.localize("progress bar timing: currentTime={1} duration={2}",[fa(e,i),fa(i,i)],"{1} of {2}"));r.currentTime_=e;r.duration_=i}if(r.bar){r.bar.update(Qt(r.el()),r.getProgress())}}));return n};i.getCurrentTime_=function e(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};i.getPercent=function e(){var t=this.getCurrentTime_();var i;var r=this.player_.liveTracker;if(r&&r.isLive()){i=(t-r.seekableStart())/r.liveWindow();if(r.atLiveEdge()){i=1}}else{i=t/this.player_.duration()}return i};i.handleMouseDown=function t(i){if(!ai(i)){return}i.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();e.prototype.handleMouseDown.call(this,i)};i.handleMouseMove=function e(t){if(!ai(t)){return}var i;var r=this.calculateDistance(t);var n=this.player_.liveTracker;if(!n||!n.isLive()){i=r*this.player_.duration();if(i===this.player_.duration()){i=i-.1}}else{if(r>=.99){n.seekToLiveEdge();return}var a=n.seekableStart();var s=n.liveCurrentTime();i=a+r*n.liveWindow();if(i>=s){i=s}if(i<=a){i=a+.1}if(i===Infinity){return}}this.player_.currentTime(i)};i.enable=function t(){e.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");if(!i){return}i.show()};i.disable=function t(){e.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");if(!i){return}i.hide()};i.handleMouseUp=function t(i){e.prototype.handleMouseUp.call(this,i);if(i){i.stopPropagation()}this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){Mr(this.player_.play())}else{this.update_()}};i.stepForward=function e(){this.player_.currentTime(this.player_.currentTime()+Ea)};i.stepBack=function e(){this.player_.currentTime(this.player_.currentTime()-Ea)};i.handleAction=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};i.handleKeyDown=function t(i){if(y.a.isEventKey(i,"Space")||y.a.isEventKey(i,"Enter")){i.preventDefault();i.stopPropagation();this.handleAction(i)}else if(y.a.isEventKey(i,"Home")){i.preventDefault();i.stopPropagation();this.player_.currentTime(0)}else if(y.a.isEventKey(i,"End")){i.preventDefault();i.stopPropagation();this.player_.currentTime(this.player_.duration())}else if(/^[0-9]$/.test(y()(i))){i.preventDefault();i.stopPropagation();var r=(y.a.codes[y()(i)]-y.a.codes["0"])*10/100;this.player_.currentTime(this.player_.duration()*r)}else if(y.a.isEventKey(i,"PgDn")){i.preventDefault();i.stopPropagation();this.player_.currentTime(this.player_.currentTime()-Ea*Ia)}else if(y.a.isEventKey(i,"PgUp")){i.preventDefault();i.stopPropagation();this.player_.currentTime(this.player_.currentTime()+Ea*Ia)}else{e.prototype.handleKeyDown.call(this,i)}};i.dispose=function t(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.off(this.player_,["playing"],this.enableInterval_);this.off(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in s.a&&"visibilityState"in s.a){this.off(s.a,"visibilitychange",this.toggleVisibility_)}e.prototype.dispose.call(this)};return t}(ba);Aa.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!br&&!or){Aa.prototype.options_.children.splice(1,0,"mouseTimeDisplay")}tr.registerComponent("SeekBar",Aa);var xa=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.handleMouseMove=Ri(Ni(c()(r),r.handleMouseMove),Oi);r.throttledHandleMouseSeek=Ri(Ni(c()(r),r.handleMouseSeek),Oi);r.enable();return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};i.handleMouseMove=function e(t){var i=this.getChild("seekBar");if(!i){return}var r=i.getChild("playProgressBar");var n=i.getChild("mouseTimeDisplay");if(!r&&!n){return}var a=i.el();var s=Qt(a);var o=Zt(a,t).x;o=_a(0,1,o);if(n){n.update(s,o)}if(r){r.update(s,i.getProgress())}};i.handleMouseSeek=function e(t){var i=this.getChild("seekBar");if(i){i.handleMouseMove(t)}};i.enabled=function e(){return this.enabled_};i.disable=function e(){this.children().forEach((function(e){return e.disable&&e.disable()}));if(!this.enabled()){return}this.off(["mousedown","touchstart"],this.handleMouseDown);this.off(this.el_,"mousemove",this.handleMouseMove);this.handleMouseUp();this.addClass("disabled");this.enabled_=false};i.enable=function e(){this.children().forEach((function(e){return e.enable&&e.enable()}));if(this.enabled()){return}this.on(["mousedown","touchstart"],this.handleMouseDown);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true};i.handleMouseDown=function e(t){var i=this.el_.ownerDocument;var r=this.getChild("seekBar");if(r){r.handleMouseDown(t)}this.on(i,"mousemove",this.throttledHandleMouseSeek);this.on(i,"touchmove",this.throttledHandleMouseSeek);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchend",this.handleMouseUp)};i.handleMouseUp=function e(t){var i=this.el_.ownerDocument;var r=this.getChild("seekBar");if(r){r.handleMouseUp(t)}this.off(i,"mousemove",this.throttledHandleMouseSeek);this.off(i,"touchmove",this.throttledHandleMouseSeek);this.off(i,"mouseup",this.handleMouseUp);this.off(i,"touchend",this.handleMouseUp)};return t}(tr);xa.prototype.options_={children:["seekBar"]};tr.registerComponent("ProgressControl",xa);var Pa=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,["enterpictureinpicture","leavepictureinpicture"],r.handlePictureInPictureChange);if(!s.a.pictureInPictureEnabled){r.disable()}return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)};i.handlePictureInPictureChange=function e(t){if(this.player_.isInPictureInPicture()){this.controlText("Exit Picture-in-Picture")}else{this.controlText("Picture-in-Picture")}};i.handleClick=function e(t){if(!this.player_.isInPictureInPicture()){this.player_.requestPictureInPicture()}else{this.player_.exitPictureInPicture()}};return t}(ra);Pa.prototype.controlText_="Picture-in-Picture";tr.registerComponent("PictureInPictureToggle",Pa);var La=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,"fullscreenchange",r.handleFullscreenChange);if(s.a[t.fsApi_.fullscreenEnabled]===false){r.disable()}return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)};i.handleFullscreenChange=function e(t){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen")}else{this.controlText("Fullscreen")}};i.handleClick=function e(t){if(!this.player_.isFullscreen()){this.player_.requestFullscreen()}else{this.player_.exitFullscreen()}};return t}(ra);La.prototype.controlText_="Fullscreen";tr.registerComponent("FullscreenToggle",La);var Da=function e(t,i){if(i.tech_&&!i.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}t.on(i,"loadstart",(function(){if(!i.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}}))};var Oa=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return t}(tr);tr.registerComponent("VolumeLevel",Oa);var Na=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on("slideractive",r.updateLastVolume_);r.on(t,"volumechange",r.updateARIAAttributes);t.ready((function(){return r.updateARIAAttributes()}));return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};i.handleMouseDown=function t(i){if(!ai(i)){return}e.prototype.handleMouseDown.call(this,i)};i.handleMouseMove=function e(t){if(!ai(t)){return}this.checkMuted();this.player_.volume(this.calculateDistance(t))};i.checkMuted=function e(){if(this.player_.muted()){this.player_.muted(false)}};i.getPercent=function e(){if(this.player_.muted()){return 0}return this.player_.volume()};i.stepForward=function e(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};i.stepBack=function e(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};i.updateARIAAttributes=function e(t){var i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i);this.el_.setAttribute("aria-valuetext",i+"%")};i.volumeAsPercentage_=function e(){return Math.round(this.player_.volume()*100)};i.updateLastVolume_=function e(){var t=this;var i=this.player_.volume();this.one("sliderinactive",(function(){if(t.player_.volume()===0){t.player_.lastVolume_(i)}}))};return t}(ba);Na.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};Na.prototype.playerEvent="volumechange";tr.registerComponent("VolumeBar",Na);var Ra=function(e){p()(t,e);function t(t,i){var r;if(i===void 0){i={}}i.vertical=i.vertical||false;if(typeof i.volumeBar==="undefined"||At(i.volumeBar)){i.volumeBar=i.volumeBar||{};i.volumeBar.vertical=i.vertical}r=e.call(this,t,i)||this;Da(c()(r),t);r.throttledHandleMouseMove=Ri(Ni(c()(r),r.handleMouseMove),Oi);r.on("mousedown",r.handleMouseDown);r.on("touchstart",r.handleMouseDown);r.on(r.volumeBar,["focus","slideractive"],(function(){r.volumeBar.addClass("vjs-slider-active");r.addClass("vjs-slider-active");r.trigger("slideractive")}));r.on(r.volumeBar,["blur","sliderinactive"],(function(){r.volumeBar.removeClass("vjs-slider-active");r.removeClass("vjs-slider-active");r.trigger("sliderinactive")}));return r}var i=t.prototype;i.createEl=function t(){var i="vjs-volume-horizontal";if(this.options_.vertical){i="vjs-volume-vertical"}return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})};i.handleMouseDown=function e(t){var i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove);this.on(i,"touchmove",this.throttledHandleMouseMove);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchend",this.handleMouseUp)};i.handleMouseUp=function e(t){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove);this.off(i,"touchmove",this.throttledHandleMouseMove);this.off(i,"mouseup",this.handleMouseUp);this.off(i,"touchend",this.handleMouseUp)};i.handleMouseMove=function e(t){this.volumeBar.handleMouseMove(t)};return t}(tr);Ra.prototype.options_={children:["volumeBar"]};tr.registerComponent("VolumeControl",Ra);var Ua=function e(t,i){if(i.tech_&&!i.tech_.featuresMuteControl){t.addClass("vjs-hidden")}t.on(i,"loadstart",(function(){if(!i.tech_.featuresMuteControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}}))};var Ma=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;Ua(c()(r),t);r.on(t,["loadstart","volumechange"],r.update);return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)};i.handleClick=function e(t){var i=this.player_.volume();var r=this.player_.lastVolume_();if(i===0){var n=r<.1?.1:r;this.player_.volume(n);this.player_.muted(false)}else{this.player_.muted(this.player_.muted()?false:true)}};i.update=function e(t){this.updateIcon_();this.updateControlText_()};i.updateIcon_=function e(){var t=this.player_.volume();var i=3;if(br&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted)}if(t===0||this.player_.muted()){i=0}else if(t<.33){i=1}else if(t<.67){i=2}for(var r=0;r<4;r++){Vt(this.el_,"vjs-vol-"+r)}Ht(this.el_,"vjs-vol-"+i)};i.updateControlText_=function e(){var t=this.player_.muted()||this.player_.volume()===0;var i=t?"Unmute":"Mute";if(this.controlText()!==i){this.controlText(i)}};return t}(ra);Ma.prototype.controlText_="Mute";tr.registerComponent("MuteToggle",Ma);var Ba=function(e){p()(t,e);function t(t,i){var r;if(i===void 0){i={}}if(typeof i.inline!=="undefined"){i.inline=i.inline}else{i.inline=true}if(typeof i.volumeControl==="undefined"||At(i.volumeControl)){i.volumeControl=i.volumeControl||{};i.volumeControl.vertical=!i.inline}r=e.call(this,t,i)||this;r.on(t,["loadstart"],r.volumePanelState_);r.on(r.muteToggle,"keyup",r.handleKeyPress);r.on(r.volumeControl,"keyup",r.handleVolumeControlKeyUp);r.on("keydown",r.handleKeyPress);r.on("mouseover",r.handleMouseOver);r.on("mouseout",r.handleMouseOut);r.on(r.volumeControl,["slideractive"],r.sliderActive_);r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_);return r}var i=t.prototype;i.sliderActive_=function e(){this.addClass("vjs-slider-active")};i.sliderInactive_=function e(){this.removeClass("vjs-slider-active")};i.volumePanelState_=function e(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden")}if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only")}};i.createEl=function t(){var i="vjs-volume-panel-horizontal";if(!this.options_.inline){i="vjs-volume-panel-vertical"}return e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})};i.dispose=function t(){this.handleMouseOut();e.prototype.dispose.call(this)};i.handleVolumeControlKeyUp=function e(t){if(y.a.isEventKey(t,"Esc")){this.muteToggle.focus()}};i.handleMouseOver=function e(t){this.addClass("vjs-hover");Ii(s.a,"keyup",Ni(this,this.handleKeyPress))};i.handleMouseOut=function e(t){this.removeClass("vjs-hover");Ai(s.a,"keyup",Ni(this,this.handleKeyPress))};i.handleKeyPress=function e(t){if(y.a.isEventKey(t,"Esc")){this.handleMouseOut()}};return t}(tr);Ba.prototype.options_={children:["muteToggle","volumeControl"]};tr.registerComponent("VolumePanel",Ba);var ja=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;if(i){r.menuButton_=i.menuButton}r.focusedChild_=-1;r.on("keydown",r.handleKeyDown);r.boundHandleBlur_=Ni(c()(r),r.handleBlur);r.boundHandleTapClick_=Ni(c()(r),r.handleTapClick);return r}var i=t.prototype;i.addEventListenerForItem=function e(t){if(!(t instanceof tr)){return}this.on(t,"blur",this.boundHandleBlur_);this.on(t,["tap","click"],this.boundHandleTapClick_)};i.removeEventListenerForItem=function e(t){if(!(t instanceof tr)){return}this.off(t,"blur",this.boundHandleBlur_);this.off(t,["tap","click"],this.boundHandleTapClick_)};i.removeChild=function t(i){if(typeof i==="string"){i=this.getChild(i)}this.removeEventListenerForItem(i);e.prototype.removeChild.call(this,i)};i.addItem=function e(t){var i=this.addChild(t);if(i){this.addEventListenerForItem(i)}};i.createEl=function t(){var i=this.options_.contentElType||"ul";this.contentEl_=Mt(i,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var r=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});r.appendChild(this.contentEl_);Ii(r,"click",(function(e){e.preventDefault();e.stopImmediatePropagation()}));return r};i.dispose=function t(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;e.prototype.dispose.call(this)};i.handleBlur=function e(t){var i=t.relatedTarget||s.a.activeElement;if(!this.children().some((function(e){return e.el()===i}))){var r=this.menuButton_;if(r&&r.buttonPressed_&&i!==r.el().firstChild){r.unpressButton()}}};i.handleTapClick=function e(t){if(this.menuButton_){this.menuButton_.unpressButton();var i=this.children();if(!Array.isArray(i)){return}var r=i.filter((function(e){return e.el()===t.target}))[0];if(!r){return}if(r.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus()}}};i.handleKeyDown=function e(t){if(y.a.isEventKey(t,"Left")||y.a.isEventKey(t,"Down")){t.preventDefault();t.stopPropagation();this.stepForward()}else if(y.a.isEventKey(t,"Right")||y.a.isEventKey(t,"Up")){t.preventDefault();t.stopPropagation();this.stepBack()}};i.stepForward=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_+1}this.focus(t)};i.stepBack=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_-1}this.focus(t)};i.focus=function e(t){if(t===void 0){t=0}var i=this.children().slice();var r=i.length&&i[0].className&&/vjs-menu-title/.test(i[0].className);if(r){i.shift()}if(i.length>0){if(t<0){t=0}else if(t>=i.length){t=i.length-1}this.focusedChild_=t;i[t].el_.focus()}};return t}(tr);tr.registerComponent("Menu",ja);var Fa=function(e){p()(t,e);function t(t,i){var r;if(i===void 0){i={}}r=e.call(this,t,i)||this;r.menuButton_=new ra(t,i);r.menuButton_.controlText(r.controlText_);r.menuButton_.el_.setAttribute("aria-haspopup","true");var n=ra.prototype.buildCSSClass();r.menuButton_.el_.className=r.buildCSSClass()+" "+n;r.menuButton_.removeClass("vjs-control");r.addChild(r.menuButton_);r.update();r.enabled_=true;r.on(r.menuButton_,"tap",r.handleClick);r.on(r.menuButton_,"click",r.handleClick);r.on(r.menuButton_,"keydown",r.handleKeyDown);r.on(r.menuButton_,"mouseenter",(function(){r.addClass("vjs-hover");r.menu.show();Ii(s.a,"keyup",Ni(c()(r),r.handleMenuKeyUp))}));r.on("mouseleave",r.handleMouseLeave);r.on("keydown",r.handleSubmenuKeyDown);return r}var i=t.prototype;i.update=function e(){var t=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu)}this.menu=t;this.addChild(t);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide()}else{this.show()}};i.createMenu=function e(){var t=new ja(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var i=Mt("li",{className:"vjs-menu-title",innerHTML:Ji(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var r=new tr(this.player_,{el:i});t.addItem(r)}this.items=this.createItems();if(this.items){for(var n=0;n<this.items.length;n++){t.addItem(this.items[n])}}return t};i.createItems=function e(){};i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};i.buildWrapperCSSClass=function t(){var i="vjs-menu-button";if(this.options_.inline===true){i+="-inline"}else{i+="-popup"}var r=ra.prototype.buildCSSClass();return"vjs-menu-button "+i+" "+r+" "+e.prototype.buildCSSClass.call(this)};i.buildCSSClass=function t(){var i="vjs-menu-button";if(this.options_.inline===true){i+="-inline"}else{i+="-popup"}return"vjs-menu-button "+i+" "+e.prototype.buildCSSClass.call(this)};i.controlText=function e(t,i){if(i===void 0){i=this.menuButton_.el()}return this.menuButton_.controlText(t,i)};i.dispose=function t(){this.handleMouseLeave();e.prototype.dispose.call(this)};i.handleClick=function e(t){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};i.handleMouseLeave=function e(t){this.removeClass("vjs-hover");Ai(s.a,"keyup",Ni(this,this.handleMenuKeyUp))};i.focus=function e(){this.menuButton_.focus()};i.blur=function e(){this.menuButton_.blur()};i.handleKeyDown=function e(t){if(y.a.isEventKey(t,"Esc")||y.a.isEventKey(t,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!y.a.isEventKey(t,"Tab")){t.preventDefault();this.menuButton_.focus()}}else if(y.a.isEventKey(t,"Up")||y.a.isEventKey(t,"Down")){if(!this.buttonPressed_){t.preventDefault();this.pressButton()}}};i.handleMenuKeyUp=function e(t){if(y.a.isEventKey(t,"Esc")||y.a.isEventKey(t,"Tab")){this.removeClass("vjs-hover")}};i.handleSubmenuKeyPress=function e(t){this.handleSubmenuKeyDown(t)};i.handleSubmenuKeyDown=function e(t){if(y.a.isEventKey(t,"Esc")||y.a.isEventKey(t,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!y.a.isEventKey(t,"Tab")){t.preventDefault();this.menuButton_.focus()}}};i.pressButton=function e(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(br&&Rt()){return}this.menu.focus()}};i.unpressButton=function e(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute("aria-expanded","false")}};i.disable=function e(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable()};i.enable=function e(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable()};return t}(tr);tr.registerComponent("MenuButton",Fa);var Ha=function(e){p()(t,e);function t(t,i){var r;var n=i.tracks;r=e.call(this,t,i)||this;if(r.items.length<=1){r.hide()}if(!n){return c()(r)}var a=Ni(c()(r),r.update);n.addEventListener("removetrack",a);n.addEventListener("addtrack",a);r.player_.on("ready",a);r.player_.on("dispose",(function(){n.removeEventListener("removetrack",a);n.removeEventListener("addtrack",a)}));return r}return t}(Fa);tr.registerComponent("TrackButton",Ha);var Va=["Tab","Esc","Up","Down","Right","Left"];var qa=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.selectable=i.selectable;r.isSelected_=i.selected||false;r.multiSelectable=i.multiSelectable;r.selected(r.isSelected_);if(r.selectable){if(r.multiSelectable){r.el_.setAttribute("role","menuitemcheckbox")}else{r.el_.setAttribute("role","menuitemradio")}}else{r.el_.setAttribute("role","menuitem")}return r}var i=t.prototype;i.createEl=function t(i,r,n){this.nonIconControl=true;return e.prototype.createEl.call(this,"li",Et({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},r),n)};i.handleKeyDown=function t(i){if(!Va.some((function(e){return y.a.isEventKey(i,e)}))){e.prototype.handleKeyDown.call(this,i)}};i.handleClick=function e(t){this.selected(true)};i.selected=function e(t){if(this.selectable){if(t){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false}}};return t}(Kn);tr.registerComponent("MenuItem",qa);var Wa=function(e){p()(t,e);function t(t,i){var r;var a=i.track;var o=t.textTracks();i.label=a.label||a.language||"Unknown";i.selected=a.mode==="showing";r=e.call(this,t,i)||this;r.track=a;r.kinds=(i.kinds||[i.kind||r.track.kind]).filter(Boolean);var u=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++){i[n]=arguments[n]}r.handleTracksChange.apply(c()(r),i)};var l=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++){i[n]=arguments[n]}r.handleSelectedLanguageChange.apply(c()(r),i)};t.on(["loadstart","texttrackchange"],u);o.addEventListener("change",u);o.addEventListener("selectedlanguagechange",l);r.on("dispose",(function(){t.off(["loadstart","texttrackchange"],u);o.removeEventListener("change",u);o.removeEventListener("selectedlanguagechange",l)}));if(o.onchange===undefined){var f;r.on(["tap","click"],(function(){if(typeof n.a.Event!=="object"){try{f=new n.a.Event("change")}catch(e){}}if(!f){f=s.a.createEvent("Event");f.initEvent("change",true,true)}o.dispatchEvent(f)}))}r.handleTracksChange();return r}var i=t.prototype;i.handleClick=function t(i){var r=this.track;var n=this.player_.textTracks();e.prototype.handleClick.call(this,i);if(!n){return}for(var a=0;a<n.length;a++){var s=n[a];if(this.kinds.indexOf(s.kind)===-1){continue}if(s===r){if(s.mode!=="showing"){s.mode="showing"}}else if(s.mode!=="disabled"){s.mode="disabled"}}};i.handleTracksChange=function e(t){var i=this.track.mode==="showing";if(i!==this.isSelected_){this.selected(i)}};i.handleSelectedLanguageChange=function e(t){if(this.track.mode==="showing"){var i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind){return}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind}}};i.dispose=function t(){this.track=null;e.prototype.dispose.call(this)};return t}(qa);tr.registerComponent("TextTrackMenuItem",Wa);var za=function(e){p()(t,e);function t(t,i){i.track={player:t,kind:i.kind,kinds:i.kinds,default:false,mode:"disabled"};if(!i.kinds){i.kinds=[i.kind]}if(i.label){i.track.label=i.label}else{i.track.label=i.kinds.join(" and ")+" off"}i.selectable=true;i.multiSelectable=false;return e.call(this,t,i)||this}var i=t.prototype;i.handleTracksChange=function e(t){var i=this.player().textTracks();var r=true;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(this.options_.kinds.indexOf(s.kind)>-1&&s.mode==="showing"){r=false;break}}if(r!==this.isSelected_){this.selected(r)}};i.handleSelectedLanguageChange=function e(t){var i=this.player().textTracks();var r=true;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&s.mode==="showing"){r=false;break}}if(r){this.player_.cache_.selectedLanguage={enabled:false}}};return t}(Wa);tr.registerComponent("OffTextTrackMenuItem",za);var Ga=function(e){p()(t,e);function t(t,i){if(i===void 0){i={}}i.tracks=t.textTracks();return e.call(this,t,i)||this}var i=t.prototype;i.createItems=function e(t,i){if(t===void 0){t=[]}if(i===void 0){i=Wa}var r;if(this.label_){r=this.label_+" off"}t.push(new za(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r}));this.hideThreshold_+=1;var n=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_]}for(var a=0;a<n.length;a++){var s=n[a];if(this.kinds_.indexOf(s.kind)>-1){var o=new i(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:true,multiSelectable:false});o.addClass("vjs-"+s.kind+"-menu-item");t.push(o)}}return t};return t}(Ha);tr.registerComponent("TextTrackButton",Ga);var Xa=function(e){p()(t,e);function t(t,i){var r;var n=i.track;var a=i.cue;var s=t.currentTime();i.selectable=true;i.multiSelectable=false;i.label=a.text;i.selected=a.startTime<=s&&s<a.endTime;r=e.call(this,t,i)||this;r.track=n;r.cue=a;n.addEventListener("cuechange",Ni(c()(r),r.update));return r}var i=t.prototype;i.handleClick=function t(i){e.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};i.update=function e(t){var i=this.cue;var r=this.player_.currentTime();this.selected(i.startTime<=r&&r<i.endTime)};return t}(qa);tr.registerComponent("ChaptersTrackMenuItem",Xa);var Ka=function(e){p()(t,e);function t(t,i,r){return e.call(this,t,i,r)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)};i.update=function t(i){if(!this.track_||i&&(i.type==="addtrack"||i.type==="removetrack")){this.setTrack(this.findChaptersTrack())}e.prototype.update.call(this)};i.setTrack=function e(t){if(this.track_===t){return}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this)}if(this.track_){var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(i){i.removeEventListener("load",this.updateHandler_)}this.track_=null}this.track_=t;if(this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(r){r.addEventListener("load",this.updateHandler_)}}};i.findChaptersTrack=function e(){var t=this.player_.textTracks()||[];for(var i=t.length-1;i>=0;i--){var r=t[i];if(r.kind===this.kind_){return r}}};i.getMenuCaption=function e(){if(this.track_&&this.track_.label){return this.track_.label}return this.localize(Ji(this.kind_))};i.createMenu=function t(){this.options_.title=this.getMenuCaption();return e.prototype.createMenu.call(this)};i.createItems=function e(){var t=[];if(!this.track_){return t}var i=this.track_.cues;if(!i){return t}for(var r=0,n=i.length;r<n;r++){var a=i[r];var s=new Xa(this.player_,{track:this.track_,cue:a});t.push(s)}return t};return t}(Ga);Ka.prototype.kind_="chapters";Ka.prototype.controlText_="Chapters";tr.registerComponent("ChaptersButton",Ka);var Ya=function(e){p()(t,e);function t(t,i,r){var n;n=e.call(this,t,i,r)||this;var a=t.textTracks();var s=Ni(c()(n),n.handleTracksChange);a.addEventListener("change",s);n.on("dispose",(function(){a.removeEventListener("change",s)}));return n}var i=t.prototype;i.handleTracksChange=function e(t){var i=this.player().textTracks();var r=false;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(s.kind!==this.kind_&&s.mode==="showing"){r=true;break}}if(r){this.disable()}else{this.enable()}};i.buildCSSClass=function t(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)};return t}(Ga);Ya.prototype.kind_="descriptions";Ya.prototype.controlText_="Descriptions";tr.registerComponent("DescriptionsButton",Ya);var $a=function(e){p()(t,e);function t(t,i,r){return e.call(this,t,i,r)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)};return t}(Ga);$a.prototype.kind_="subtitles";$a.prototype.controlText_="Subtitles";tr.registerComponent("SubtitlesButton",$a);var Qa=function(e){p()(t,e);function t(t,i){var r;i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:false,default:false,mode:"disabled"};i.selectable=false;i.name="CaptionSettingsMenuItem";r=e.call(this,t,i)||this;r.addClass("vjs-texttrack-settings");r.controlText(", opens "+i.kind+" settings dialog");return r}var i=t.prototype;i.handleClick=function e(t){this.player().getChild("textTrackSettings").open()};return t}(Wa);tr.registerComponent("CaptionSettingsMenuItem",Qa);var Ja=function(e){p()(t,e);function t(t,i,r){return e.call(this,t,i,r)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)};i.createItems=function t(){var i=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){i.push(new Qa(this.player_,{kind:this.kind_}));this.hideThreshold_+=1}return e.prototype.createItems.call(this,i)};return t}(Ga);Ja.prototype.kind_="captions";Ja.prototype.controlText_="Captions";tr.registerComponent("CaptionsButton",Ja);var Za=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(i,r,n){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="captions"){a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "}a+="</span>";var s=e.prototype.createEl.call(this,i,Et({innerHTML:a},r),n);return s};return t}(Wa);tr.registerComponent("SubsCapsMenuItem",Za);var es=function(e){p()(t,e);function t(t,i){var r;if(i===void 0){i={}}r=e.call(this,t,i)||this;r.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1){r.label_="captions"}r.menuButton_.controlText(Ji(r.label_));return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)};i.createItems=function t(){var i=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){i.push(new Qa(this.player_,{kind:this.label_}));this.hideThreshold_+=1}i=e.prototype.createItems.call(this,i,Za);return i};return t}(Ga);es.prototype.kinds_=["captions","subtitles"];es.prototype.controlText_="Subtitles";tr.registerComponent("SubsCapsButton",es);var ts=function(e){p()(t,e);function t(t,i){var r;var n=i.track;var a=t.audioTracks();i.label=n.label||n.language||"Unknown";i.selected=n.enabled;r=e.call(this,t,i)||this;r.track=n;r.addClass("vjs-"+n.kind+"-menu-item");var s=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++){i[n]=arguments[n]}r.handleTracksChange.apply(c()(r),i)};a.addEventListener("change",s);r.on("dispose",(function(){a.removeEventListener("change",s)}));return r}var i=t.prototype;i.createEl=function t(i,r,n){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="main-desc"){a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "}a+="</span>";var s=e.prototype.createEl.call(this,i,Et({innerHTML:a},r),n);return s};i.handleClick=function t(i){var r=this.player_.audioTracks();e.prototype.handleClick.call(this,i);for(var n=0;n<r.length;n++){var a=r[n];a.enabled=a===this.track}};i.handleTracksChange=function e(t){this.selected(this.track.enabled)};return t}(qa);tr.registerComponent("AudioTrackMenuItem",ts);var is=function(e){p()(t,e);function t(t,i){if(i===void 0){i={}}i.tracks=t.audioTracks();return e.call(this,t,i)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)};i.createItems=function e(t){if(t===void 0){t=[]}this.hideThreshold_=1;var i=this.player_.audioTracks();for(var r=0;r<i.length;r++){var n=i[r];t.push(new ts(this.player_,{track:n,selectable:true,multiSelectable:false}))}return t};return t}(Ha);is.prototype.controlText_="Audio Track";tr.registerComponent("AudioTrackButton",is);var rs=function(e){p()(t,e);function t(t,i){var r;var n=i.rate;var a=parseFloat(n,10);i.label=n;i.selected=a===1;i.selectable=true;i.multiSelectable=false;r=e.call(this,t,i)||this;r.label=n;r.rate=a;r.on(t,"ratechange",r.update);return r}var i=t.prototype;i.handleClick=function t(i){e.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};i.update=function e(t){this.selected(this.player().playbackRate()===this.rate)};return t}(qa);rs.prototype.contentElType="button";tr.registerComponent("PlaybackRateMenuItem",rs);var ns=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.updateVisibility();r.updateLabel();r.on(t,"loadstart",r.updateVisibility);r.on(t,"ratechange",r.updateLabel);return r}var i=t.prototype;i.createEl=function t(){var i=e.prototype.createEl.call(this);this.labelEl_=Mt("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});i.appendChild(this.labelEl_);return i};i.dispose=function t(){this.labelEl_=null;e.prototype.dispose.call(this)};i.buildCSSClass=function t(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)};i.createMenu=function e(){var t=new ja(this.player());var i=this.playbackRates();if(i){for(var r=i.length-1;r>=0;r--){t.addChild(new rs(this.player(),{rate:i[r]+"x"}))}}return t};i.updateARIAAttributes=function e(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};i.handleClick=function e(t){var i=this.player().playbackRate();var r=this.playbackRates();var n=r[0];for(var a=0;a<r.length;a++){if(r[a]>i){n=r[a];break}}this.player().playbackRate(n)};i.playbackRates=function e(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};i.playbackRateSupported=function e(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0};i.updateVisibility=function e(t){if(this.playbackRateSupported()){this.removeClass("vjs-hidden")}else{this.addClass("vjs-hidden")}};i.updateLabel=function e(t){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x"}};return t}(Fa);ns.prototype.controlText_="Playback Rate";tr.registerComponent("PlaybackRateMenuButton",ns);var as=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)};i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return t}(tr);tr.registerComponent("Spacer",as);var ss=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)};i.createEl=function t(){var i=e.prototype.createEl.call(this,{className:this.buildCSSClass()});i.innerHTML=" ";return i};return t}(as);tr.registerComponent("CustomControlSpacer",ss);var os=function(e){p()(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return t}(tr);os.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};if("exitPictureInPicture"in s.a){os.prototype.options_.children.splice(os.prototype.options_.children.length-1,0,"pictureInPictureToggle")}tr.registerComponent("ControlBar",os);var us=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,"error",r.open);return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)};i.content=function e(){var t=this.player().error();return t?this.localize(t.message):""};return t}(qr);us.prototype.options_=u()({},qr.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});tr.registerComponent("ErrorDisplay",us);var ls="vjs-text-track-settings";var cs=["#000","Black"];var fs=["#00F","Blue"];var hs=["#0FF","Cyan"];var ds=["#0F0","Green"];var ps=["#F0F","Magenta"];var vs=["#F00","Red"];var ms=["#FFF","White"];var gs=["#FF0","Yellow"];var ys=["1","Opaque"];var _s=["0.5","Semi-Transparent"];var bs=["0","Transparent"];var Ts={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[cs,ms,vs,ds,fs,gs,ps,hs]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ys,_s,bs]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ms,cs,vs,ds,fs,gs,ps,hs]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function e(t){return t==="1.00"?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ys,_s]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[bs,_s,ys]}};Ts.windowColor.options=Ts.backgroundColor.options;function Ss(e,t){if(t){e=t(e)}if(e&&e!=="none"){return e}}function ks(e,t){var i=e.options[e.options.selectedIndex].value;return Ss(i,t)}function ws(e,t,i){if(!t){return}for(var r=0;r<e.options.length;r++){if(Ss(e.options[r].value,i)===t){e.selectedIndex=r;break}}}var Cs=function(e){p()(t,e);function t(t,i){var r;i.temporary=false;r=e.call(this,t,i)||this;r.updateDisplay=Ni(c()(r),r.updateDisplay);r.fill();r.hasBeenOpened_=r.hasBeenFilled_=true;r.endDialog=Mt("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")});r.el().appendChild(r.endDialog);r.setDefaults();if(i.persistTextTrackSettings===undefined){r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings}r.on(r.$(".vjs-done-button"),"click",(function(){r.saveSettings();r.close()}));r.on(r.$(".vjs-default-button"),"click",(function(){r.setDefaults();r.updateDisplay()}));wt(Ts,(function(e){r.on(r.$(e.selector),"change",r.updateDisplay)}));if(r.options_.persistTextTrackSettings){r.restoreSettings()}return r}var i=t.prototype;i.dispose=function t(){this.endDialog=null;e.prototype.dispose.call(this)};i.createElSelect_=function e(t,i,r){var n=this;if(i===void 0){i=""}if(r===void 0){r="label"}var a=Ts[t];var s=a.id.replace("%s",this.id_);var o=[i,s].join(" ").trim();return["<"+r+' id="'+s+'" class="'+(r==="label"?"vjs-label":"")+'">',this.localize(a.label),"</"+r+">",'<select aria-labelledby="'+o+'">'].concat(a.options.map((function(e){var t=s+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',n.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")};i.createElFgColor_=function e(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")};i.createElBgColor_=function e(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")};i.createElWinColor_=function e(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")};i.createElColors_=function e(){return Mt("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};i.createElFont_=function e(){return Mt("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};i.createElControls_=function e(){var t=this.localize("restore all settings to the default values");return Mt("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};i.content=function e(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};i.label=function e(){return this.localize("Caption Settings Dialog")};i.description=function e(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};i.buildCSSClass=function t(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};i.getValues=function e(){var t=this;return Ct(Ts,(function(e,i,r){var n=ks(t.$(i.selector),i.parser);if(n!==undefined){e[r]=n}return e}),{})};i.setValues=function e(t){var i=this;wt(Ts,(function(e,r){ws(i.$(e.selector),t[r],e.parser)}))};i.setDefaults=function e(){var t=this;wt(Ts,(function(e){var i=e.hasOwnProperty("default")?e["default"]:0;t.$(e.selector).selectedIndex=i}))};i.restoreSettings=function e(){var t;try{t=JSON.parse(n.a.localStorage.getItem(ls))}catch(e){bt.warn(e)}if(t){this.setValues(t)}};i.saveSettings=function e(){if(!this.options_.persistTextTrackSettings){return}var t=this.getValues();try{if(Object.keys(t).length){n.a.localStorage.setItem(ls,JSON.stringify(t))}else{n.a.localStorage.removeItem(ls)}}catch(e){bt.warn(e)}};i.updateDisplay=function e(){var t=this.player_.getChild("textTrackDisplay");if(t){t.updateDisplay()}};i.conditionalBlur_=function e(){this.previouslyActiveEl_=null;var t=this.player_.controlBar;var i=t&&t.subsCapsButton;var r=t&&t.captionsButton;if(i){i.focus()}else if(r){r.focus()}};return t}(qr);tr.registerComponent("TextTrackSettings",Cs);var Es=function(e){p()(t,e);function t(t,i){var r;var a=i.ResizeObserver||n.a.ResizeObserver;if(i.ResizeObserver===null){a=false}var s=er({createEl:!a,reportTouchActivity:false},i);r=e.call(this,t,s)||this;r.ResizeObserver=i.ResizeObserver||n.a.ResizeObserver;r.loadListener_=null;r.resizeObserver_=null;r.debouncedHandler_=Ui((function(){r.resizeHandler()}),100,false,c()(r));if(a){r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_);r.resizeObserver_.observe(t.el())}else{r.loadListener_=function(){if(!r.el_||!r.el_.contentWindow){return}var e=r.debouncedHandler_;var t=r.unloadListener_=function(){Ai(this,"resize",e);Ai(this,"unload",t);t=null};Ii(r.el_.contentWindow,"unload",t);Ii(r.el_.contentWindow,"resize",e)};r.one("load",r.loadListener_)}return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};i.resizeHandler=function e(){if(!this.player_||!this.player_.trigger){return}this.player_.trigger("playerresize")};i.dispose=function t(){if(this.debouncedHandler_){this.debouncedHandler_.cancel()}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el())}this.resizeObserver_.disconnect()}if(this.loadListener_){this.off("load",this.loadListener_)}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow)}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;e.prototype.dispose.call(this)};return t}(tr);tr.registerComponent("ResizeManager",Es);var Is={trackingThreshold:30,liveTolerance:15};var As=function(e){p()(t,e);function t(t,i){var r;var n=er(Is,i,{createEl:false});r=e.call(this,t,n)||this;r.reset_();r.on(r.player_,"durationchange",r.handleDurationchange);if(pr&&"hidden"in s.a&&"visibilityState"in s.a){r.on(s.a,"visibilitychange",r.handleVisibilityChange)}return r}var i=t.prototype;i.handleVisibilityChange=function e(){if(this.player_.duration()!==Infinity){return}if(s.a.hidden){this.stopTracking()}else{this.startTracking()}};i.trackLive_=function e(){var t=this.player_.seekable();if(!t||!t.length){return}var i=Number(n.a.performance.now().toFixed(4));var r=this.lastTime_===-1?0:(i-this.lastTime_)/1e3;this.lastTime_=i;this.pastSeekEnd_=this.pastSeekEnd()+r;var a=this.liveCurrentTime();var s=this.player_.currentTime();var o=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-s)>this.options_.liveTolerance;if(!this.timeupdateSeen_||a===Infinity){o=false}if(o!==this.behindLiveEdge_){this.behindLiveEdge_=o;this.trigger("liveedgechange")}};i.handleDurationchange=function e(){if(this.player_.duration()===Infinity&&this.liveWindow()>=this.options_.trackingThreshold){if(this.player_.options_.liveui){this.player_.addClass("vjs-liveui")}this.startTracking()}else{this.player_.removeClass("vjs-liveui");this.stopTracking()}};i.startTracking=function e(){if(this.isTracking()){return}if(!this.timeupdateSeen_){this.timeupdateSeen_=this.player_.hasStarted()}this.trackingInterval_=this.setInterval(this.trackLive_,Oi);this.trackLive_();this.on(this.player_,["play","pause"],this.trackLive_);if(!this.timeupdateSeen_){this.one(this.player_,"play",this.handlePlay);this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)}else{this.on(this.player_,"seeked",this.handleSeeked)}};i.handleFirstTimeupdate=function e(){this.timeupdateSeen_=true;this.on(this.player_,"seeked",this.handleSeeked)};i.handleSeeked=function e(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.skipNextSeeked_?false:t>2;this.skipNextSeeked_=false;this.trackLive_()};i.handlePlay=function e(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};i.reset_=function e(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=true;this.timeupdateSeen_=false;this.seekedBehindLive_=false;this.skipNextSeeked_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLive_);this.off(this.player_,"seeked",this.handleSeeked);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate);this.off(this.player_,"timeupdate",this.seekToLiveEdge)};i.stopTracking=function e(){if(!this.isTracking()){return}this.reset_();this.trigger("liveedgechange")};i.seekableEnd=function e(){var t=this.player_.seekable();var i=[];var r=t?t.length:0;while(r--){i.push(t.end(r))}return i.length?i.sort()[i.length-1]:Infinity};i.seekableStart=function e(){var t=this.player_.seekable();var i=[];var r=t?t.length:0;while(r--){i.push(t.start(r))}return i.length?i.sort()[0]:0};i.liveWindow=function e(){var t=this.liveCurrentTime();if(t===Infinity){return Infinity}return t-this.seekableStart()};i.isLive=function e(){return this.isTracking()};i.atLiveEdge=function e(){return!this.behindLiveEdge()};i.liveCurrentTime=function e(){return this.pastSeekEnd()+this.seekableEnd()};i.pastSeekEnd=function e(){var t=this.seekableEnd();if(this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_){this.pastSeekEnd_=0}this.lastSeekEnd_=t;return this.pastSeekEnd_};i.behindLiveEdge=function e(){return this.behindLiveEdge_};i.isTracking=function e(){return typeof this.trackingInterval_==="number"};i.seekToLiveEdge=function e(){this.seekedBehindLive_=false;if(this.atLiveEdge()){return}this.skipNextSeeked_=true;this.player_.currentTime(this.liveCurrentTime())};i.dispose=function t(){this.off(s.a,"visibilitychange",this.handleVisibilityChange);this.stopTracking();e.prototype.dispose.call(this)};return t}(tr);tr.registerComponent("LiveTracker",As);var xs=function e(t){var i=t.el();if(i.hasAttribute("src")){t.triggerSourceset(i.src);return true}var r=t.$$("source");var n=[];var a="";if(!r.length){return false}for(var s=0;s<r.length;s++){var o=r[s].src;if(o&&n.indexOf(o)===-1){n.push(o)}}if(!n.length){return false}if(n.length===1){a=n[0]}t.triggerSourceset(a);return true};var Ps=Object.defineProperty({},"innerHTML",{get:function e(){return this.cloneNode(true).innerHTML},set:function e(t){var i=s.a.createElement(this.nodeName.toLowerCase());i.innerHTML=t;var r=s.a.createDocumentFragment();while(i.childNodes.length){r.appendChild(i.childNodes[0])}this.innerText="";n.a.Element.prototype.appendChild.call(this,r);return this.innerHTML}});var Ls=function e(t,i){var r={};for(var n=0;n<t.length;n++){r=Object.getOwnPropertyDescriptor(t[n],i);if(r&&r.set&&r.get){break}}r.enumerable=true;r.configurable=true;return r};var Ds=function e(t){return Ls([t.el(),n.a.HTMLMediaElement.prototype,n.a.Element.prototype,Ps],"innerHTML")};var Os=function e(t){var i=t.el();if(i.resetSourceWatch_){return}var r={};var n=Ds(t);var a=function e(r){return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++){n[a]=arguments[a]}var s=r.apply(i,n);xs(t);return s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){if(!i[e]){return}r[e]=i[e];i[e]=a(r[e])}));Object.defineProperty(i,"innerHTML",er(n,{set:a(n.set)}));i.resetSourceWatch_=function(){i.resetSourceWatch_=null;Object.keys(r).forEach((function(e){i[e]=r[e]}));Object.defineProperty(i,"innerHTML",n)};t.one("sourceset",i.resetSourceWatch_)};var Ns=Object.defineProperty({},"src",{get:function e(){if(this.hasAttribute("src")){return sn(n.a.Element.prototype.getAttribute.call(this,"src"))}return""},set:function e(t){n.a.Element.prototype.setAttribute.call(this,"src",t);return t}});var Rs=function e(t){return Ls([t.el(),n.a.HTMLMediaElement.prototype,Ns],"src")};var Us=function e(t){if(!t.featuresSourceset){return}var i=t.el();if(i.resetSourceset_){return}var r=Rs(t);var n=i.setAttribute;var a=i.load;Object.defineProperty(i,"src",er(r,{set:function e(n){var a=r.set.call(i,n);t.triggerSourceset(i.src);return a}}));i.setAttribute=function(e,r){var a=n.call(i,e,r);if(/src/i.test(e)){t.triggerSourceset(i.src)}return a};i.load=function(){var e=a.call(i);if(!xs(t)){t.triggerSourceset("");Os(t)}return e};if(i.currentSrc){t.triggerSourceset(i.currentSrc)}else if(!xs(t)){Os(t)}i.resetSourceset_=function(){i.resetSourceset_=null;i.load=a;i.setAttribute=n;Object.defineProperty(i,"src",r);if(i.resetSourceWatch_){i.resetSourceWatch_()}}};var Ms=function e(t,i,r,n){if(n===void 0){n=true}var a=function e(r){return Object.defineProperty(t,i,{value:r,enumerable:true,writable:true})};var s={configurable:true,enumerable:true,get:function e(){var t=r();a(t);return t}};if(n){s.set=a}return Object.defineProperty(t,i,s)};var Bs=function(e){p()(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;var n=t.source;var a=false;if(n&&(r.el_.currentSrc!==n.src||t.tag&&t.tag.initNetworkState_===3)){r.setSource(n)}else{r.handleLateInit_(r.el_)}if(t.enableSourceset){r.setupSourcesetHandling_()}if(r.el_.hasChildNodes()){var s=r.el_.childNodes;var o=s.length;var u=[];while(o--){var l=s[o];var c=l.nodeName.toLowerCase();if(c==="track"){if(!r.featuresNativeTextTracks){u.push(l)}else{r.remoteTextTrackEls().addTrackElement_(l);r.remoteTextTracks().addTrack(l.track);r.textTracks().addTrack(l.track);if(!a&&!r.el_.hasAttribute("crossorigin")&&un(l.src)){a=true}}}}for(var f=0;f<u.length;f++){r.el_.removeChild(u[f])}}r.proxyNativeTracks_();if(r.featuresNativeTextTracks&&a){bt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n"+"This may prevent text tracks from loading.")}r.restoreMetadataTracksInIOSNativePlayer_();if((gr||_r||lr)&&t.nativeControlsForTouch===true){r.setControls(true)}r.proxyWebkitFullscreen_();r.triggerReady();return r}var i=t.prototype;i.dispose=function i(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_()}t.disposeMediaElement(this.el_);this.options_=null;e.prototype.dispose.call(this)};i.setupSourcesetHandling_=function e(){Us(this)};i.restoreMetadataTracksInIOSNativePlayer_=function e(){var t=this.textTracks();var i;var r=function e(){i=[];for(var r=0;r<t.length;r++){var n=t[r];if(n.kind==="metadata"){i.push({track:n,storedMode:n.mode})}}};r();t.addEventListener("change",r);this.on("dispose",(function(){return t.removeEventListener("change",r)}));var n=function e(){for(var r=0;r<i.length;r++){var n=i[r];if(n.track.mode==="disabled"&&n.track.mode!==n.storedMode){n.track.mode=n.storedMode}}t.removeEventListener("change",e)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",r);t.removeEventListener("change",n);t.addEventListener("change",n)}));this.on("webkitendfullscreen",(function(){t.removeEventListener("change",r);t.addEventListener("change",r);t.removeEventListener("change",n)}))};i.overrideNative_=function e(t,i){var r=this;if(i!==this["featuresNative"+t+"Tracks"]){return}var n=t.toLowerCase();if(this[n+"TracksListeners_"]){Object.keys(this[n+"TracksListeners_"]).forEach((function(e){var t=r.el()[n+"Tracks"];t.removeEventListener(e,r[n+"TracksListeners_"][e])}))}this["featuresNative"+t+"Tracks"]=!i;this[n+"TracksListeners_"]=null;this.proxyNativeTracksForType_(n)};i.overrideNativeAudioTracks=function e(t){this.overrideNative_("Audio",t)};i.overrideNativeVideoTracks=function e(t){this.overrideNative_("Video",t)};i.proxyNativeTracksForType_=function e(t){var i=this;var r=bn[t];var n=this.el()[r.getterName];var a=this[r.getterName]();if(!this["featuresNative"+r.capitalName+"Tracks"]||!n||!n.addEventListener){return}var s={change:function e(r){var n={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(n);if(t==="text"){i[Tn.remoteText.getterName]().trigger(n)}},addtrack:function e(t){a.addTrack(t.track)},removetrack:function e(t){a.removeTrack(t.track)}};var o=function e(){var t=[];for(var i=0;i<a.length;i++){var r=false;for(var s=0;s<n.length;s++){if(n[s]===a[i]){r=true;break}}if(!r){t.push(a[i])}}while(t.length){a.removeTrack(t.shift())}};this[r.getterName+"Listeners_"]=s;Object.keys(s).forEach((function(e){var t=s[e];n.addEventListener(e,t);i.on("dispose",(function(i){return n.removeEventListener(e,t)}))}));this.on("loadstart",o);this.on("dispose",(function(e){return i.off("loadstart",o)}))};i.proxyNativeTracks_=function e(){var t=this;bn.names.forEach((function(e){t.proxyNativeTracksForType_(e)}))};i.createEl=function e(){var i=this.options_.tag;if(!i||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(i){var r=i.cloneNode(true);if(i.parentNode){i.parentNode.insertBefore(r,i)}t.disposeMediaElement(i);i=r}else{i=s.a.createElement("video");var n=this.options_.tag&&zt(this.options_.tag);var a=er({},n);if(!gr||this.options_.nativeControlsForTouch!==true){delete a.controls}Wt(i,Et(a,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}if(typeof this.options_.preload!=="undefined"){Xt(i,"preload",this.options_.preload)}var o=["loop","muted","playsinline","autoplay"];for(var u=0;u<o.length;u++){var l=o[u];var c=this.options_[l];if(typeof c!=="undefined"){if(c){Xt(i,l,l)}else{Kt(i,l)}i[l]=c}}return i};i.handleLateInit_=function e(t){if(t.networkState===0||t.networkState===3){return}if(t.readyState===0){var i=false;var r=function e(){i=true};this.on("loadstart",r);var n=function e(){if(!i){this.trigger("loadstart")}};this.on("loadedmetadata",n);this.ready((function(){this.off("loadstart",r);this.off("loadedmetadata",n);if(!i){this.trigger("loadstart")}}));return}var a=["loadstart"];a.push("loadedmetadata");if(t.readyState>=2){a.push("loadeddata")}if(t.readyState>=3){a.push("canplay")}if(t.readyState>=4){a.push("canplaythrough")}this.ready((function(){a.forEach((function(e){this.trigger(e)}),this)}))};i.setCurrentTime=function e(t){try{this.el_.currentTime=t}catch(e){bt(e,"Video is not ready. (Video.js)")}};i.duration=function e(){var t=this;if(this.el_.duration===Infinity&&or&&hr&&this.el_.currentTime===0){var i=function e(){if(t.el_.currentTime>0){if(t.el_.duration===Infinity){t.trigger("durationchange")}t.off("timeupdate",e)}};this.on("timeupdate",i);return NaN}return this.el_.duration||NaN};i.width=function e(){return this.el_.offsetWidth};i.height=function e(){return this.el_.offsetHeight};i.proxyWebkitFullscreen_=function e(){var t=this;if(!("webkitDisplayingFullscreen"in this.el_)){return}var i=function e(){this.trigger("fullscreenchange",{isFullscreen:false})};var r=function e(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",i);this.trigger("fullscreenchange",{isFullscreen:true,nativeIOSFullscreen:true})}};this.on("webkitbeginfullscreen",r);this.on("dispose",(function(){t.off("webkitbeginfullscreen",r);t.off("webkitendfullscreen",i)}))};i.supportsFullScreen=function e(){if(typeof this.el_.webkitEnterFullScreen==="function"){var t=n.a.navigator&&n.a.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t)){return true}}return false};i.enterFullScreen=function e(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA){Mr(this.el_.play());this.setTimeout((function(){t.pause();try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0)}else{try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}};i.exitFullScreen=function e(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()};i.requestPictureInPicture=function e(){return this.el_.requestPictureInPicture()};i.src=function e(t){if(t===undefined){return this.el_.src}this.setSrc(t)};i.reset=function e(){t.resetMediaElement(this.el_)};i.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src}return this.el_.currentSrc};i.setControls=function e(t){this.el_.controls=!!t};i.addTextTrack=function t(i,r,n){if(!this.featuresNativeTextTracks){return e.prototype.addTextTrack.call(this,i,r,n)}return this.el_.addTextTrack(i,r,n)};i.createRemoteTextTrack=function t(i){if(!this.featuresNativeTextTracks){return e.prototype.createRemoteTextTrack.call(this,i)}var r=s.a.createElement("track");if(i.kind){r.kind=i.kind}if(i.label){r.label=i.label}if(i.language||i.srclang){r.srclang=i.language||i.srclang}if(i["default"]){r["default"]=i["default"]}if(i.id){r.id=i.id}if(i.src){r.src=i.src}return r};i.addRemoteTextTrack=function t(i,r){var n=e.prototype.addRemoteTextTrack.call(this,i,r);if(this.featuresNativeTextTracks){this.el().appendChild(n)}return n};i.removeRemoteTextTrack=function t(i){e.prototype.removeRemoteTextTrack.call(this,i);if(this.featuresNativeTextTracks){var r=this.$$("track");var n=r.length;while(n--){if(i===r[n]||i===r[n].track){this.el().removeChild(r[n])}}}};i.getVideoPlaybackQuality=function e(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality()}var t={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){t.droppedVideoFrames=this.el().webkitDroppedFrameCount;t.totalVideoFrames=this.el().webkitDecodedFrameCount}if(n.a.performance&&typeof n.a.performance.now==="function"){t.creationTime=n.a.performance.now()}else if(n.a.performance&&n.a.performance.timing&&typeof n.a.performance.timing.navigationStart==="number"){t.creationTime=n.a.Date.now()-n.a.performance.timing.navigationStart}return t};return t}(wn);Ms(Bs,"TEST_VID",(function(){if(!Ot()){return}var e=s.a.createElement("video");var t=s.a.createElement("track");t.kind="captions";t.srclang="en";t.label="English";e.appendChild(t);return e}));Bs.isSupported=function(){try{Bs.TEST_VID.volume=.5}catch(e){return false}return!!(Bs.TEST_VID&&Bs.TEST_VID.canPlayType)};Bs.canPlayType=function(e){return Bs.TEST_VID.canPlayType(e)};Bs.canPlaySource=function(e,t){return Bs.canPlayType(e.type)};Bs.canControlVolume=function(){try{var e=Bs.TEST_VID.volume;Bs.TEST_VID.volume=e/2+.1;return e!==Bs.TEST_VID.volume}catch(e){return false}};Bs.canMuteVolume=function(){try{var e=Bs.TEST_VID.muted;Bs.TEST_VID.muted=!e;if(Bs.TEST_VID.muted){Xt(Bs.TEST_VID,"muted","muted")}else{Kt(Bs.TEST_VID,"muted","muted")}return e!==Bs.TEST_VID.muted}catch(e){return false}};Bs.canControlPlaybackRate=function(){if(or&&hr&&dr<58){return false}try{var e=Bs.TEST_VID.playbackRate;Bs.TEST_VID.playbackRate=e/2+.1;return e!==Bs.TEST_VID.playbackRate}catch(e){return false}};Bs.canOverrideAttributes=function(){try{var e=function e(){};Object.defineProperty(s.a.createElement("video"),"src",{get:e,set:e});Object.defineProperty(s.a.createElement("audio"),"src",{get:e,set:e});Object.defineProperty(s.a.createElement("video"),"innerHTML",{get:e,set:e});Object.defineProperty(s.a.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return false}return true};Bs.supportsNativeTextTracks=function(){return Tr||br&&hr};Bs.supportsNativeVideoTracks=function(){return!!(Bs.TEST_VID&&Bs.TEST_VID.videoTracks)};Bs.supportsNativeAudioTracks=function(){return!!(Bs.TEST_VID&&Bs.TEST_VID.audioTracks)};Bs.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],i=e[1];Ms(Bs.prototype,t,(function(){return Bs[i]()}),true)}));Bs.prototype.movingMediaElementInDOM=!br;Bs.prototype.featuresFullscreenResize=true;Bs.prototype.featuresProgressEvents=true;Bs.prototype.featuresTimeupdateEvents=true;var js;Bs.patchCanPlayType=function(){if(ur>=4&&!cr&&!hr){js=Bs.TEST_VID&&Bs.TEST_VID.constructor.prototype.canPlayType;Bs.TEST_VID.constructor.prototype.canPlayType=function(e){var t=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;if(e&&t.test(e)){return"maybe"}return js.call(this,e)}}};Bs.unpatchCanPlayType=function(){var e=Bs.TEST_VID.constructor.prototype.canPlayType;if(js){Bs.TEST_VID.constructor.prototype.canPlayType=js}return e};Bs.patchCanPlayType();Bs.disposeMediaElement=function(e){if(!e){return}if(e.parentNode){e.parentNode.removeChild(e)}while(e.hasChildNodes()){e.removeChild(e.firstChild)}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(e){}})()}};Bs.resetMediaElement=function(e){if(!e){return}var t=e.querySelectorAll("source");var i=t.length;while(i--){e.removeChild(t[i])}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(e){}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Bs.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}));["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Bs.prototype["set"+Ji(e)]=function(t){this.el_[e]=t;if(t){this.el_.setAttribute(e,e)}else{this.el_.removeAttribute(e)}}}));["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Bs.prototype[e]=function(){return this.el_[e]}}));["volume","src","poster","preload","playbackRate","defaultPlaybackRate","crossOrigin"].forEach((function(e){Bs.prototype["set"+Ji(e)]=function(t){this.el_[e]=t}}));["pause","load","play"].forEach((function(e){Bs.prototype[e]=function(){return this.el_[e]()}}));wn.withSourceHandlers(Bs);Bs.nativeSourceHandler={};Bs.nativeSourceHandler.canPlayType=function(e){try{return Bs.TEST_VID.canPlayType(e)}catch(e){return""}};Bs.nativeSourceHandler.canHandleSource=function(e,t){if(e.type){return Bs.nativeSourceHandler.canPlayType(e.type)}else if(e.src){var i=on(e.src);return Bs.nativeSourceHandler.canPlayType("video/"+i)}return""};Bs.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)};Bs.nativeSourceHandler.dispose=function(){};Bs.registerSourceHandler(Bs.nativeSourceHandler);wn.registerTech("Html5",Bs);var Fs=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var Hs={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var Vs=["tiny","xsmall","small","medium","large","xlarge","huge"];var qs={};Vs.forEach((function(e){var t=e.charAt(0)==="x"?"x-"+e.substring(1):e;qs[e]="vjs-layout-"+t}));var Ws={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var zs=function(e){p()(t,e);function t(i,r,n){var a;i.id=i.id||r.id||"vjs_video_"+yi();r=Et(t.getTagSettings(i),r);r.initChildren=false;r.createEl=false;r.evented=false;r.reportTouchActivity=false;if(!r.language){if(typeof i.closest==="function"){var o=i.closest("[lang]");if(o&&o.getAttribute){r.language=o.getAttribute("lang")}}else{var u=i;while(u&&u.nodeType===1){if(zt(u).hasOwnProperty("lang")){r.language=u.getAttribute("lang");break}u=u.parentNode}}}a=e.call(this,null,r,n)||this;a.boundDocumentFullscreenChange_=Ni(c()(a),a.documentFullscreenChange_);a.boundFullWindowOnEscKey_=Ni(c()(a),a.fullWindowOnEscKey);a.isFullscreen_=false;a.log=Tt(a.id_);a.fsApi_=Ar;a.isPosterFromTech_=false;a.queuedCallbacks_=[];a.isReady_=false;a.hasStarted_=false;a.userActive_=false;if(!a.options_||!a.options_.techOrder||!a.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?")}a.tag=i;a.tagAttributes=i&&zt(i);a.language(a.options_.language);if(r.languages){var l={};Object.getOwnPropertyNames(r.languages).forEach((function(e){l[e.toLowerCase()]=r.languages[e]}));a.languages_=l}else{a.languages_=t.prototype.options_.languages}a.resetCache_();a.poster_=r.poster||"";a.controls_=!!r.controls;i.controls=false;i.removeAttribute("controls");a.changingSrc_=false;a.playCallbacks_=[];a.playTerminatedQueue_=[];if(i.hasAttribute("autoplay")){a.autoplay(true)}else{a.autoplay(a.options_.autoplay)}if(r.plugins){Object.keys(r.plugins).forEach((function(e){if(typeof a[e]!=="function"){throw new Error('plugin "'+e+'" does not exist')}}))}a.scrubbing_=false;a.el_=a.createEl();Ki(c()(a),{eventBusKey:"el_"});if(a.fsApi_.requestFullscreen){Ii(s.a,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_);a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)}if(a.fluid_){a.on("playerreset",a.updateStyleEl_)}var f=er(a.options_);if(r.plugins){Object.keys(r.plugins).forEach((function(e){a[e](r.plugins[e])}))}a.options_.playerOptions=f;a.middleware_=[];a.initChildren();a.isAudio(i.nodeName.toLowerCase()==="audio");if(a.controls()){a.addClass("vjs-controls-enabled")}else{a.addClass("vjs-controls-disabled")}a.el_.setAttribute("role","region");if(a.isAudio()){a.el_.setAttribute("aria-label",a.localize("Audio Player"))}else{a.el_.setAttribute("aria-label",a.localize("Video Player"))}if(a.isAudio()){a.addClass("vjs-audio")}if(a.flexNotSupported_()){a.addClass("vjs-no-flex")}if(gr){a.addClass("vjs-touch-enabled")}if(!br){a.addClass("vjs-workinghover")}t.players[a.id_]=c()(a);var h=mt.split(".")[0];a.addClass("vjs-v"+h);a.userActive(true);a.reportUserActivity();a.one("play",a.listenForUserActivity_);a.on("stageclick",a.handleStageClick_);a.on("keydown",a.handleKeyDown);a.breakpoints(a.options_.breakpoints);a.responsive(a.options_.responsive);return a}var i=t.prototype;i.dispose=function i(){var r=this;this.trigger("dispose");this.off("dispose");Ai(s.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);Ai(s.a,"keydown",this.boundFullWindowOnEscKey_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null}t.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_=""}if(this.playerElIngest_){this.playerElIngest_=null}if(this.tag){this.tag=null}jn(this);Sn.names.forEach((function(e){var t=Sn[e];var i=r[t.getterName]();if(i&&i.off){i.off()}}));e.prototype.dispose.call(this)};i.createEl=function t(){var i=this.tag;var r;var a=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player");var o=this.tag.tagName.toLowerCase()==="video-js";if(a){r=this.el_=i.parentNode}else if(!o){r=this.el_=e.prototype.createEl.call(this,"div")}var u=zt(i);if(o){r=this.el_=i;i=this.tag=s.a.createElement("video");while(r.children.length){i.appendChild(r.firstChild)}if(!Ft(r,"video-js")){Ht(r,"video-js")}r.appendChild(i);a=this.playerElIngest_=r;Object.keys(r).forEach((function(e){try{i[e]=r[e]}catch(e){}}))}i.setAttribute("tabindex","-1");u.tabindex="-1";if(pr||hr&&mr){i.setAttribute("role","application");u.role="application"}i.removeAttribute("width");i.removeAttribute("height");if("width"in u){delete u.width}if("height"in u){delete u.height}Object.getOwnPropertyNames(u).forEach((function(e){if(!(o&&e==="class")){r.setAttribute(e,u[e])}if(o){i.setAttribute(e,u[e])}}));i.playerId=i.id;i.id+="_html5_api";i.className="vjs-tech";i.player=r.player=this;this.addClass("vjs-paused");if(n.a.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=pi("vjs-styles-dimensions");var l=si(".vjs-styles-defaults");var c=si("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);var f=i.getElementsByTagName("a");for(var h=0;h<f.length;h++){var d=f.item(h);Ht(d,"vjs-hidden");d.setAttribute("hidden","hidden")}i.initNetworkState_=i.networkState;if(i.parentNode&&!a){i.parentNode.insertBefore(r,i)}jt(i,r);this.children_.unshift(i);this.el_.setAttribute("lang",this.language_);this.el_=r;return r};i.crossOrigin=function e(t){if(!t){return this.techGet_("crossOrigin")}if(t!=="anonymous"&&t!=="use-credentials"){bt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"');return}this.techCall_("setCrossOrigin",t);return};i.width=function e(t){return this.dimension("width",t)};i.height=function e(t){return this.dimension("height",t)};i.dimension=function e(t,i){var r=t+"_";if(i===undefined){return this[r]||0}if(i===""||i==="auto"){this[r]=undefined;this.updateStyleEl_();return}var n=parseFloat(i);if(isNaN(n)){bt.error('Improper value "'+i+'" supplied for for '+t);return}this[r]=n;this.updateStyleEl_()};i.fluid=function e(t){if(t===undefined){return!!this.fluid_}this.fluid_=!!t;if(ji(this)){this.off("playerreset",this.updateStyleEl_)}if(t){this.addClass("vjs-fluid");this.fill(false);Fi((function(){this.on("playerreset",this.updateStyleEl_)}))}else{this.removeClass("vjs-fluid")}this.updateStyleEl_()};i.fill=function e(t){if(t===undefined){return!!this.fill_}this.fill_=!!t;if(t){this.addClass("vjs-fill");this.fluid(false)}else{this.removeClass("vjs-fill")}};i.aspectRatio=function e(t){if(t===undefined){return this.aspectRatio_}if(!/^\d+\:\d+$/.test(t)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.")}this.aspectRatio_=t;this.fluid(true);this.updateStyleEl_()};i.updateStyleEl_=function e(){if(n.a.VIDEOJS_NO_DYNAMIC_STYLE===true){var t=typeof this.width_==="number"?this.width_:this.options_.width;var i=typeof this.height_==="number"?this.height_:this.options_.height;var r=this.tech_&&this.tech_.el();if(r){if(t>=0){r.width=t}if(i>=0){r.height=i}}return}var a;var s;var o;var u;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){o=this.aspectRatio_}else if(this.videoWidth()>0){o=this.videoWidth()+":"+this.videoHeight()}else{o="16:9"}var l=o.split(":");var c=l[1]/l[0];if(this.width_!==undefined){a=this.width_}else if(this.height_!==undefined){a=this.height_/c}else{a=this.videoWidth()||300}if(this.height_!==undefined){s=this.height_}else{s=a*c}if(/^[^a-zA-Z]/.test(this.id())){u="dimensions-"+this.id()}else{u=this.id()+"-dimensions"}this.addClass(u);vi(this.styleEl_,"\n      ."+u+" {\n        width: "+a+"px;\n        height: "+s+"px;\n      }\n\n      ."+u+".vjs-fluid {\n        padding-top: "+c*100+"%;\n      }\n    ")};i.loadTech_=function e(t,i){var r=this;if(this.tech_){this.unloadTech_()}var n=Ji(t);var a=t.charAt(0).toLowerCase()+t.slice(1);if(n!=="Html5"&&this.tag){wn.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null}this.techName_=n;this.isReady_=false;var s=typeof this.autoplay()==="string"?false:this.autoplay();var o={source:i,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Sn.names.forEach((function(e){var t=Sn[e];o[t.getterName]=r[t.privateName]}));Et(o,this.options_[n]);Et(o,this.options_[a]);Et(o,this.options_[t.toLowerCase()]);if(this.tag){o.tag=this.tag}if(i&&i.src===this.cache_.src&&this.cache_.currentTime>0){o.startTime=this.cache_.currentTime}var u=wn.getTech(t);if(!u){throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'")}this.tech_=new u(o);this.tech_.ready(Ni(this,this.handleTechReady_),true);Hr.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Fs.forEach((function(e){r.on(r.tech_,e,r["handleTech"+Ji(e)+"_"])}));Object.keys(Hs).forEach((function(e){r.on(r.tech_,e,(function(t){if(r.tech_.playbackRate()===0&&r.tech_.seeking()){r.queuedCallbacks_.push({callback:r["handleTech"+Hs[e]+"_"].bind(r),event:t});return}r["handleTech"+Hs[e]+"_"](t)}))}));this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_()}if(this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)){jt(this.tech_.el(),this.el())}if(this.tag){this.tag.player=null;this.tag=null}};i.unloadTech_=function e(){var t=this;Sn.names.forEach((function(e){var i=Sn[e];t[i.privateName]=t[i.getterName]()}));this.textTracksJson_=Hr.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange")}this.isPosterFromTech_=false};i.tech=function e(t){if(t===undefined){bt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\n"+"See https://github.com/videojs/video.js/issues/2617 for more info.\n")}return this.tech_};i.addTechControlsListeners_=function e(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};i.removeTechControlsListeners_=function e(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};i.handleTechReady_=function e(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume)}this.handleTechPosterChange_();this.handleTechDurationChange_()};i.handleTechLoadStart_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay")}else{this.hasStarted(false);this.trigger("loadstart")}this.manualAutoplay_(this.autoplay())};i.manualAutoplay_=function e(t){var i=this;if(!this.tech_||typeof t!=="string"){return}var r=function e(){var t=i.muted();i.muted(true);var r=function e(){i.muted(t)};i.playTerminatedQueue_.push(r);var n=i.play();if(!Ur(n)){return}return n["catch"](r)};var n;if(t==="any"&&this.muted()!==true){n=this.play();if(Ur(n)){n=n["catch"](r)}}else if(t==="muted"&&this.muted()!==true){n=r()}else{n=this.play()}if(!Ur(n)){return}return n.then((function(){i.trigger({type:"autoplay-success",autoplay:t})}))["catch"]((function(e){i.trigger({type:"autoplay-failure",autoplay:t})}))};i.updateSourceCaches_=function e(t){if(t===void 0){t=""}var i=t;var r="";if(typeof i!=="string"){i=t.src;r=t.type}this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(i&&!r){r=Wn(this,i)}this.cache_.source=er({},t,{src:i,type:r});var n=this.cache_.sources.filter((function(e){return e.src&&e.src===i}));var a=[];var s=this.$$("source");var o=[];for(var u=0;u<s.length;u++){var l=zt(s[u]);a.push(l);if(l.src&&l.src===i){o.push(l.src)}}if(o.length&&!n.length){this.cache_.sources=a}else if(!n.length){this.cache_.sources=[this.cache_.source]}this.cache_.src=i};i.handleTechSourceset_=function e(t){var i=this;if(!this.changingSrc_){var r=function e(t){return i.updateSourceCaches_(t)};var n=this.currentSource().src;var a=t.src;if(n&&!/^blob:/.test(n)&&/^blob:/.test(a)){if(!this.lastSource_||this.lastSource_.tech!==a&&this.lastSource_.player!==n){r=function e(){}}}r(a);if(!t.src){this.tech_.any(["sourceset","loadstart"],(function(e){if(e.type==="sourceset"){return}var t=i.techGet("currentSrc");i.lastSource_.tech=t;i.updateSourceCaches_(t)}))}}this.lastSource_={player:this.currentSource().src,tech:t.src};this.trigger({src:t.src,type:"sourceset"})};i.hasStarted=function e(t){if(t===undefined){return this.hasStarted_}if(t===this.hasStarted_){return}this.hasStarted_=t;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay")}else{this.removeClass("vjs-has-started")}};i.handleTechPlay_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play")};i.handleTechRateChange_=function e(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)}));this.queuedCallbacks_=[]}this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};i.handleTechWaiting_=function e(){var t=this;this.addClass("vjs-waiting");this.trigger("waiting");var i=this.currentTime();var r=function e(){if(i!==t.currentTime()){t.removeClass("vjs-waiting");t.off("timeupdate",e)}};this.on("timeupdate",r)};i.handleTechCanPlay_=function e(){this.removeClass("vjs-waiting");this.trigger("canplay")};i.handleTechCanPlayThrough_=function e(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};i.handleTechPlaying_=function e(){this.removeClass("vjs-waiting");this.trigger("playing")};i.handleTechSeeking_=function e(){this.addClass("vjs-seeking");this.trigger("seeking")};i.handleTechSeeked_=function e(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};i.handleTechFirstPlay_=function e(){if(this.options_.starttime){bt.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started");this.trigger("firstplay")};i.handleTechPause_=function e(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};i.handleTechEnded_=function e(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play()}else if(!this.paused()){this.pause()}this.trigger("ended")};i.handleTechDurationChange_=function e(){this.duration(this.techGet_("duration"))};i.handleTechClick_=function e(t){if(!ai(t)){return}if(!this.controls_){return}if(this.paused()){Mr(this.play())}else{this.pause()}};i.handleTechDoubleClick_=function e(t){if(!this.controls_){return}var i=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(e){return e.contains(t.target)}));if(!i){if(this.options_===undefined||this.options_.userActions===undefined||this.options_.userActions.doubleClick===undefined||this.options_.userActions.doubleClick!==false){if(this.options_!==undefined&&this.options_.userActions!==undefined&&typeof this.options_.userActions.doubleClick==="function"){this.options_.userActions.doubleClick.call(this,t)}else if(this.isFullscreen()){this.exitFullscreen()}else{this.requestFullscreen()}}}};i.handleTechTap_=function e(){this.userActive(!this.userActive())};i.handleTechTouchStart_=function e(){this.userWasActive=this.userActive()};i.handleTechTouchMove_=function e(){if(this.userWasActive){this.reportUserActivity()}};i.handleTechTouchEnd_=function e(t){t.preventDefault()};i.handleStageClick_=function e(){this.reportUserActivity()};i.toggleFullscreenClass_=function e(){if(this.isFullscreen()){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};i.documentFullscreenChange_=function e(t){var i=t.target.player;if(i&&i!==this){return}var r=this.el();var n=s.a[this.fsApi_.fullscreenElement]===r;if(!n&&r.matches){n=r.matches(":"+this.fsApi_.fullscreen)}else if(!n&&r.msMatchesSelector){n=r.msMatchesSelector(":"+this.fsApi_.fullscreen)}this.isFullscreen(n)};i.handleTechFullscreenChange_=function e(t,i){if(i){if(i.nativeIOSFullscreen){this.toggleClass("vjs-ios-native-fs")}this.isFullscreen(i.isFullscreen)}};i.handleTechFullscreenError_=function e(t,i){this.trigger("fullscreenerror",i)};i.togglePictureInPictureClass_=function e(){if(this.isInPictureInPicture()){this.addClass("vjs-picture-in-picture")}else{this.removeClass("vjs-picture-in-picture")}};i.handleTechEnterPictureInPicture_=function e(t){this.isInPictureInPicture(true)};i.handleTechLeavePictureInPicture_=function e(t){this.isInPictureInPicture(false)};i.handleTechError_=function e(){var t=this.tech_.error();this.error(t)};i.handleTechTextData_=function e(){var t=null;if(arguments.length>1){t=arguments[1]}this.trigger("textdata",t)};i.getCache=function e(){return this.cache_};i.resetCache_=function e(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};i.techCall_=function e(t,i){this.ready((function(){if(t in Rn){return Dn(this.middleware_,this.tech_,t,i)}else if(t in Un){return On(this.middleware_,this.tech_,t,i)}try{if(this.tech_){this.tech_[t](i)}}catch(e){bt(e);throw e}}),true)};i.techGet_=function e(t){if(!this.tech_||!this.tech_.isReady_){return}if(t in Nn){return Ln(this.middleware_,this.tech_,t)}else if(t in Un){return On(this.middleware_,this.tech_,t)}try{return this.tech_[t]()}catch(e){if(this.tech_[t]===undefined){bt("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e);throw e}if(e.name==="TypeError"){bt("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;throw e}bt(e);throw e}};i.play=function e(){var t=this;var i=this.options_.Promise||n.a.Promise;if(i){return new i((function(e){t.play_(e)}))}return this.play_()};i.play_=function e(t){var i=this;if(t===void 0){t=Mr}this.playCallbacks_.push(t);var r=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_){this.off(["ready","loadstart"],this.waitToPlay_);this.waitToPlay_=null}if(!this.isReady_||!r){this.waitToPlay_=function(e){i.play_()};this.one(["ready","loadstart"],this.waitToPlay_);if(!r&&(Tr||br)){this.load()}return}var n=this.techGet_("play");if(n===null){this.runPlayTerminatedQueue_()}else{this.runPlayCallbacks_(n)}};i.runPlayTerminatedQueue_=function e(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];t.forEach((function(e){e()}))};i.runPlayCallbacks_=function e(t){var i=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];i.forEach((function(e){e(t)}))};i.pause=function e(){this.techCall_("pause")};i.paused=function e(){return this.techGet_("paused")===false?false:true};i.played=function e(){return this.techGet_("played")||Er(0,0)};i.scrubbing=function e(t){if(typeof t==="undefined"){return this.scrubbing_}this.scrubbing_=!!t;if(t){this.addClass("vjs-scrubbing")}else{this.removeClass("vjs-scrubbing")}};i.currentTime=function e(t){if(typeof t!=="undefined"){if(t<0){t=0}if(!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=t;this.off("canplay",this.applyInitTime_);this.one("canplay",this.applyInitTime_);return}this.techCall_("setCurrentTime",t);this.cache_.initTime=0;return}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime};i.applyInitTime_=function e(){this.currentTime(this.cache_.initTime)};i.duration=function e(t){if(t===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN}t=parseFloat(t);if(t<0){t=Infinity}if(t!==this.cache_.duration){this.cache_.duration=t;if(t===Infinity){this.addClass("vjs-live")}else{this.removeClass("vjs-live")}if(!isNaN(t)){this.trigger("durationchange")}}};i.remainingTime=function e(){return this.duration()-this.currentTime()};i.remainingTimeDisplay=function e(){return Math.floor(this.duration())-Math.floor(this.currentTime())};i.buffered=function e(){var e=this.techGet_("buffered");if(!e||!e.length){e=Er(0,0)}return e};i.bufferedPercent=function e(){return Ir(this.buffered(),this.duration())};i.bufferedEnd=function e(){var t=this.buffered();var i=this.duration();var r=t.end(t.length-1);if(r>i){r=i}return r};i.volume=function e(t){var i;if(t!==undefined){i=Math.max(0,Math.min(1,parseFloat(t)));this.cache_.volume=i;this.techCall_("setVolume",i);if(i>0){this.lastVolume_(i)}return}i=parseFloat(this.techGet_("volume"));return isNaN(i)?1:i};i.muted=function e(t){if(t!==undefined){this.techCall_("setMuted",t);return}return this.techGet_("muted")||false};i.defaultMuted=function e(t){if(t!==undefined){return this.techCall_("setDefaultMuted",t)}return this.techGet_("defaultMuted")||false};i.lastVolume_=function e(t){if(t!==undefined&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume};i.supportsFullScreen=function e(){return this.techGet_("supportsFullScreen")||false};i.isFullscreen=function e(t){if(t!==undefined){var i=this.isFullscreen_;this.isFullscreen_=Boolean(t);if(this.isFullscreen_!==i&&this.fsApi_.prefixed){this.trigger("fullscreenchange")}this.toggleFullscreenClass_();return}return this.isFullscreen_};i.requestFullscreen=function e(t){var i=this.options_.Promise||n.a.Promise;if(i){var r=this;return new i((function(e,i){function n(){r.off("fullscreenerror",s);r.off("fullscreenchange",a)}function a(){n();e()}function s(e,t){n();i(t)}r.one("fullscreenchange",a);r.one("fullscreenerror",s);var o=r.requestFullscreenHelper_(t);if(o){o.then(n,n);return o}}))}return this.requestFullscreenHelper_()};i.requestFullscreenHelper_=function e(t){var i=this;var r;if(!this.fsApi_.prefixed){r=this.options_.fullscreen&&this.options_.fullscreen.options||{};if(t!==undefined){r=t}}if(this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](r);if(n){n.then((function(){return i.isFullscreen(true)}),(function(){return i.isFullscreen(false)}))}return n}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen")}else{this.enterFullWindow()}};i.exitFullscreen=function e(){var t=this.options_.Promise||n.a.Promise;if(t){var i=this;return new t((function(e,t){function r(){i.off("fullscreenerror",a);i.off("fullscreenchange",n)}function n(){r();e()}function a(e,i){r();t(i)}i.one("fullscreenchange",n);i.one("fullscreenerror",a);var s=i.exitFullscreenHelper_();if(s){s.then(r,r);return s}}))}return this.exitFullscreenHelper_()};i.exitFullscreenHelper_=function e(){var t=this;if(this.fsApi_.requestFullscreen){var i=s.a[this.fsApi_.exitFullscreen]();if(i){i.then((function(){return t.isFullscreen(false)}))}return i}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen")}else{this.exitFullWindow()}};i.enterFullWindow=function e(){this.isFullscreen(true);this.isFullWindow=true;this.docOrigOverflow=s.a.documentElement.style.overflow;Ii(s.a,"keydown",this.boundFullWindowOnEscKey_);s.a.documentElement.style.overflow="hidden";Ht(s.a.body,"vjs-full-window");this.trigger("enterFullWindow")};i.fullWindowOnEscKey=function e(t){if(y.a.isEventKey(t,"Esc")){if(this.isFullscreen()===true){this.exitFullscreen()}else{this.exitFullWindow()}}};i.exitFullWindow=function e(){this.isFullscreen(false);this.isFullWindow=false;Ai(s.a,"keydown",this.boundFullWindowOnEscKey_);s.a.documentElement.style.overflow=this.docOrigOverflow;Vt(s.a.body,"vjs-full-window");this.trigger("exitFullWindow")};i.isInPictureInPicture=function e(t){if(t!==undefined){this.isInPictureInPicture_=!!t;this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_};i.requestPictureInPicture=function e(){if("pictureInPictureEnabled"in s.a){return this.techGet_("requestPictureInPicture")}};i.exitPictureInPicture=function e(){if("pictureInPictureEnabled"in s.a){return s.a.exitPictureInPicture()}};i.handleKeyDown=function e(t){var i=this.options_.userActions;if(!i||!i.hotkeys){return}var r=function e(t){var i=t.tagName.toLowerCase();if(t.isContentEditable){return true}var r=["button","checkbox","hidden","radio","reset","submit"];if(i==="input"){return r.indexOf(t.type)===-1}var n=["textarea"];return n.indexOf(i)!==-1};if(r(this.el_.ownerDocument.activeElement)){return}if(typeof i.hotkeys==="function"){i.hotkeys.call(this,t)}else{this.handleHotkeys(t)}};i.handleHotkeys=function e(t){var i=this.options_.userActions?this.options_.userActions.hotkeys:{};var r=i.fullscreenKey,n=r===void 0?function(e){return y.a.isEventKey(e,"f")}:r,a=i.muteKey,o=a===void 0?function(e){return y.a.isEventKey(e,"m")}:a,u=i.playPauseKey,l=u===void 0?function(e){return y.a.isEventKey(e,"k")||y.a.isEventKey(e,"Space")}:u;if(n.call(this,t)){t.preventDefault();t.stopPropagation();var c=tr.getComponent("FullscreenToggle");if(s.a[this.fsApi_.fullscreenEnabled]!==false){c.prototype.handleClick.call(this,t)}}else if(o.call(this,t)){t.preventDefault();t.stopPropagation();var f=tr.getComponent("MuteToggle");f.prototype.handleClick.call(this,t)}else if(l.call(this,t)){t.preventDefault();t.stopPropagation();var h=tr.getComponent("PlayToggle");h.prototype.handleClick.call(this,t)}};i.canPlayType=function e(t){var i;for(var r=0,n=this.options_.techOrder;r<n.length;r++){var a=n[r];var s=wn.getTech(a);if(!s){s=tr.getComponent(a)}if(!s){bt.error('The "'+a+'" tech is undefined. Skipped browser support check for that tech.');continue}if(s.isSupported()){i=s.canPlayType(t);if(i){return i}}}return""};i.selectSource=function e(t){var i=this;var r=this.options_.techOrder.map((function(e){return[e,wn.getTech(e)]})).filter((function(e){var t=e[0],i=e[1];if(i){return i.isSupported()}bt.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.');return false}));var n=function e(t,i,r){var n;t.some((function(e){return i.some((function(t){n=r(e,t);if(n){return true}}))}));return n};var a;var s=function e(t){return function(e,i){return t(i,e)}};var o=function e(t,r){var n=t[0],a=t[1];if(a.canPlaySource(r,i.options_[n.toLowerCase()])){return{source:r,tech:n}}};if(this.options_.sourceOrder){a=n(t,r,s(o))}else{a=n(r,t,o)}return a||false};i.src=function e(t){var i=this;if(typeof t==="undefined"){return this.cache_.src||""}var r=zn(t);if(!r.length){this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0);return}this.changingSrc_=true;this.cache_.sources=r;this.updateSourceCaches_(r[0]);xn(this,r[0],(function(e,t){i.middleware_=t;i.cache_.sources=r;i.updateSourceCaches_(e);var n=i.src_(e);if(n){if(r.length>1){return i.src(r.slice(1))}i.changingSrc_=false;i.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0);i.triggerReady();return}Pn(t,i.tech_)}))};i.src_=function e(t){var i=this;var r=this.selectSource([t]);if(!r){return true}if(!Zi(r.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(r.tech,r.source);this.tech_.ready((function(){i.changingSrc_=false}));return false}this.ready((function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",t)}else{this.techCall_("src",t.src)}this.changingSrc_=false}),true);return false};i.load=function e(){this.techCall_("load")};i.reset=function e(){var t=this;var i=this.options_.Promise||n.a.Promise;if(this.paused()||!i){this.doReset_()}else{var r=this.play();Mr(r.then((function(){return t.doReset_()})))}};i.doReset_=function e(){if(this.tech_){this.tech_.clearTracks("text")}this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();if(ji(this)){this.trigger("playerreset")}};i.resetControlBarUI_=function e(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};i.resetProgressBar_=function e(){this.currentTime(0);var t=this.controlBar,i=t.durationDisplay,r=t.remainingTimeDisplay;if(i){i.updateContent()}if(r){r.updateContent()}};i.resetPlaybackRate_=function e(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};i.resetVolumeBar_=function e(){this.volume(1);this.trigger("volumechange")};i.currentSources=function e(){var t=this.currentSource();var i=[];if(Object.keys(t).length!==0){i.push(t)}return this.cache_.sources||i};i.currentSource=function e(){return this.cache_.source||{}};i.currentSrc=function e(){return this.currentSource()&&this.currentSource().src||""};i.currentType=function e(){return this.currentSource()&&this.currentSource().type||""};i.preload=function e(t){if(t!==undefined){this.techCall_("setPreload",t);this.options_.preload=t;return}return this.techGet_("preload")};i.autoplay=function e(t){if(t===undefined){return this.options_.autoplay||false}var i;if(typeof t==="string"&&/(any|play|muted)/.test(t)){this.options_.autoplay=t;this.manualAutoplay_(t);i=false}else if(!t){this.options_.autoplay=false}else{this.options_.autoplay=true}i=typeof i==="undefined"?this.options_.autoplay:i;if(this.tech_){this.techCall_("setAutoplay",i)}};i.playsinline=function e(t){if(t!==undefined){this.techCall_("setPlaysinline",t);this.options_.playsinline=t;return this}return this.techGet_("playsinline")};i.loop=function e(t){if(t!==undefined){this.techCall_("setLoop",t);this.options_.loop=t;return}return this.techGet_("loop")};i.poster=function e(t){if(t===undefined){return this.poster_}if(!t){t=""}if(t===this.poster_){return}this.poster_=t;this.techCall_("setPoster",t);this.isPosterFromTech_=false;this.trigger("posterchange")};i.handleTechPosterChange_=function e(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";if(t!==this.poster_){this.poster_=t;this.isPosterFromTech_=true;this.trigger("posterchange")}}};i.controls=function e(t){if(t===undefined){return!!this.controls_}t=!!t;if(this.controls_===t){return}this.controls_=t;if(this.usingNativeControls()){this.techCall_("setControls",t)}if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_()}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_()}}};i.usingNativeControls=function e(t){if(t===undefined){return!!this.usingNativeControls_}t=!!t;if(this.usingNativeControls_===t){return}this.usingNativeControls_=t;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}};i.error=function e(t){if(t===undefined){return this.error_||null}if(this.options_.suppressNotSupportedError&&t&&t.code===4){var i=function e(){this.error(t)};this.options_.suppressNotSupportedError=false;this.any(["click","touchstart"],i);this.one("loadstart",(function(){this.off(["click","touchstart"],i)}));return}if(t===null){this.error_=t;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close()}return}this.error_=new Nr(t);this.addClass("vjs-error");bt.error("(CODE:"+this.error_.code+" "+Nr.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return};i.reportUserActivity=function e(t){this.userActivity_=true};i.userActive=function e(t){if(t===undefined){return this.userActive_}t=!!t;if(t===this.userActive_){return}this.userActive_=t;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return}if(this.tech_){this.tech_.one("mousemove",(function(e){e.stopPropagation();e.preventDefault()}))}this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")};i.listenForUserActivity_=function e(){var t;var i;var r;var n=Ni(this,this.reportUserActivity);var a=function e(t){if(t.screenX!==i||t.screenY!==r){i=t.screenX;r=t.screenY;n()}};var s=function e(){n();this.clearInterval(t);t=this.setInterval(n,250)};var o=function e(i){n();this.clearInterval(t)};this.on("mousedown",s);this.on("mousemove",a);this.on("mouseup",o);this.on("mouseleave",o);var u=this.getChild("controlBar");if(u&&!br&&!or){u.on("mouseenter",(function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}));u.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))}this.on("keydown",n);this.on("keyup",n);var l;this.setInterval((function(){if(!this.userActivity_){return}this.userActivity_=false;this.userActive(true);this.clearTimeout(l);var e=this.options_.inactivityTimeout;if(e<=0){return}l=this.setTimeout((function(){if(!this.userActivity_){this.userActive(false)}}),e)}),250)};i.playbackRate=function e(t){if(t!==undefined){this.techCall_("setPlaybackRate",t);return}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate")}return 1};i.defaultPlaybackRate=function e(t){if(t!==undefined){return this.techCall_("setDefaultPlaybackRate",t)}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate")}return 1};i.isAudio=function e(t){if(t!==undefined){this.isAudio_=!!t;return}return!!this.isAudio_};i.addTextTrack=function e(t,i,r){if(this.tech_){return this.tech_.addTextTrack(t,i,r)}};i.addRemoteTextTrack=function e(t,i){if(this.tech_){return this.tech_.addRemoteTextTrack(t,i)}};i.removeRemoteTextTrack=function e(t){if(t===void 0){t={}}var i=t,r=i.track;if(!r){r=t}if(this.tech_){return this.tech_.removeRemoteTextTrack(r)}};i.getVideoPlaybackQuality=function e(){return this.techGet_("getVideoPlaybackQuality")};i.videoWidth=function e(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};i.videoHeight=function e(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};i.language=function e(t){if(t===undefined){return this.language_}this.language_=String(t).toLowerCase()};i.languages=function e(){return er(t.prototype.options_.languages,this.languages_)};i.toJSON=function e(){var t=er(this.options_);var i=t.tracks;t.tracks=[];for(var r=0;r<i.length;r++){var n=i[r];n=er(n);n.player=undefined;t.tracks[r]=n}return t};i.createModal=function e(t,i){var r=this;i=i||{};i.content=t||"";var n=new qr(this,i);this.addChild(n);n.on("dispose",(function(){r.removeChild(n)}));n.open();return n};i.updateCurrentBreakpoint_=function e(){if(!this.responsive()){return}var t=this.currentBreakpoint();var i=this.currentWidth();for(var r=0;r<Vs.length;r++){var n=Vs[r];var a=this.breakpoints_[n];if(i<=a){if(t===n){return}if(t){this.removeClass(qs[t])}this.addClass(qs[n]);this.breakpoint_=n;break}}};i.removeCurrentBreakpoint_=function e(){var t=this.currentBreakpointClass();this.breakpoint_="";if(t){this.removeClass(t)}};i.breakpoints=function e(t){if(t===undefined){return Et(this.breakpoints_)}this.breakpoint_="";this.breakpoints_=Et({},Ws,t);this.updateCurrentBreakpoint_();return Et(this.breakpoints_)};i.responsive=function e(t){if(t===undefined){return this.responsive_}t=Boolean(t);var i=this.responsive_;if(t===i){return}this.responsive_=t;if(t){this.on("playerresize",this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_()}else{this.off("playerresize",this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_()}return t};i.currentBreakpoint=function e(){return this.breakpoint_};i.currentBreakpointClass=function e(){return qs[this.breakpoint_]||""};i.loadMedia=function e(t,i){var r=this;if(!t||typeof t!=="object"){return}this.reset();this.cache_.media=er(t);var n=this.cache_.media,a=n.artwork,s=n.poster,o=n.src,u=n.textTracks;if(!a&&s){this.cache_.media.artwork=[{src:s,type:qn(s)}]}if(o){this.src(o)}if(s){this.poster(s)}if(Array.isArray(u)){u.forEach((function(e){return r.addRemoteTextTrack(e,false)}))}this.ready(i)};i.getMedia=function e(){if(!this.cache_.media){var t=this.poster();var i=this.currentSources();var r=Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}));var n={src:i,textTracks:r};if(t){n.poster=t;n.artwork=[{src:n.poster,type:qn(n.poster)}]}return n}return er(this.cache_.media)};t.getTagSettings=function e(t){var i={sources:[],tracks:[]};var r=zt(t);var n=r["data-setup"];if(Ft(t,"vjs-fill")){r.fill=true}if(Ft(t,"vjs-fluid")){r.fluid=true}if(n!==null){var a=m()(n||"{}"),s=a[0],o=a[1];if(s){bt.error(s)}Et(r,o)}Et(i,r);if(t.hasChildNodes()){var u=t.childNodes;for(var l=0,c=u.length;l<c;l++){var f=u[l];var h=f.nodeName.toLowerCase();if(h==="source"){i.sources.push(zt(f))}else if(h==="track"){i.tracks.push(zt(f))}}}return i};i.flexNotSupported_=function e(){var t=s.a.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)};return t}(tr);Sn.names.forEach((function(e){var t=Sn[e];zs.prototype[t.getterName]=function(){if(this.tech_){return this.tech_[t.getterName]()}this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}}));zs.prototype.crossorigin=zs.prototype.crossOrigin;zs.players={};var Gs=n.a.navigator;zs.prototype.options_={techOrder:wn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:false,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Gs&&(Gs.languages&&Gs.languages[0]||Gs.userLanguage||Gs.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:false};["ended","seeking","seekable","networkState","readyState"].forEach((function(e){zs.prototype[e]=function(){return this.techGet_(e)}}));Fs.forEach((function(e){zs.prototype["handleTech"+Ji(e)+"_"]=function(){return this.trigger(e)}}));tr.registerComponent("Player",zs);var Xs="plugin";var Ks="activePlugins_";var Ys={};var $s=function e(t){return Ys.hasOwnProperty(t)};var Qs=function e(t){return $s(t)?Ys[t]:undefined};var Js=function e(t,i){t[Ks]=t[Ks]||{};t[Ks][i]=true};var Zs=function e(t,i,r){var n=(r?"before":"")+"pluginsetup";t.trigger(n,i);t.trigger(n+":"+i.name,i)};var eo=function e(t,i){var r=function e(){Zs(this,{name:t,plugin:i,instance:null},true);var r=i.apply(this,arguments);Js(this,t);Zs(this,{name:t,plugin:i,instance:r});return r};Object.keys(i).forEach((function(e){r[e]=i[e]}));return r};var to=function e(t,i){i.prototype.name=t;return function(){Zs(this,{name:t,plugin:i,instance:null},true);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++){r[n]=arguments[n]}var a=w()(i,[this].concat(r));this[t]=function(){return a};Zs(this,a.getEventHash());return a}};var io=function(){function e(t){if(this.constructor===e){throw new Error("Plugin must be sub-classed; not directly instantiated.")}this.player=t;Ki(this);delete this.trigger;$i(this,this.constructor.defaultState);Js(t,this.name);this.dispose=Ni(this,this.dispose);t.on("dispose",this.dispose)}var t=e.prototype;t.version=function e(){return this.constructor.VERSION};t.getEventHash=function e(t){if(t===void 0){t={}}t.name=this.name;t.plugin=this.constructor;t.instance=this;return t};t.trigger=function e(t,i){if(i===void 0){i={}}return xi(this.eventBusEl_,t,this.getEventHash(i))};t.handleStateChanged=function e(t){};t.dispose=function e(){var t=this.name,i=this.player;this.trigger("dispose");this.off();i.off("dispose",this.dispose);i[Ks][t]=false;this.player=this.state=null;i[t]=to(t,Ys[t])};e.isBasic=function t(i){var r=typeof i==="string"?Qs(i):i;return typeof r==="function"&&!e.prototype.isPrototypeOf(r.prototype)};e.registerPlugin=function t(i,r){if(typeof i!=="string"){throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".")}if($s(i)){bt.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!')}else if(zs.prototype.hasOwnProperty(i)){throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!')}if(typeof r!=="function"){throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof r+".")}Ys[i]=r;if(i!==Xs){if(e.isBasic(r)){zs.prototype[i]=eo(i,r)}else{zs.prototype[i]=to(i,r)}}return r};e.deregisterPlugin=function e(t){if(t===Xs){throw new Error("Cannot de-register base plugin.")}if($s(t)){delete Ys[t];delete zs.prototype[t]}};e.getPlugins=function e(t){if(t===void 0){t=Object.keys(Ys)}var i;t.forEach((function(e){var t=Qs(e);if(t){i=i||{};i[e]=t}}));return i};e.getPluginVersion=function e(t){var i=Qs(t);return i&&i.VERSION||""};return e}();io.getPlugin=Qs;io.BASE_PLUGIN_NAME=Xs;io.registerPlugin(Xs,io);zs.prototype.usingPlugin=function(e){return!!this[Ks]&&this[Ks][e]===true};zs.prototype.hasPlugin=function(e){return!!$s(e)};var ro=function e(t,i){if(i===void 0){i={}}var r=function e(){t.apply(this,arguments)};var n={};if(typeof i==="object"){if(i.constructor!==Object.prototype.constructor){r=i.constructor}n=i}else if(typeof i==="function"){r=i}E()(r,t);if(t){r.super_=t}for(var a in n){if(n.hasOwnProperty(a)){r.prototype[a]=n[a]}}return r};var no=function e(t){return t.indexOf("#")===0?t.slice(1):t};function ao(e,t,i){var r=ao.getPlayer(e);if(r){if(t){bt.warn('Player "'+e+'" is already initialised. Options will not be applied.')}if(i){r.ready(i)}return r}var n=typeof e==="string"?si("#"+no(e)):e;if(!Nt(n)){throw new TypeError("The element or ID supplied is not valid. (videojs)")}if(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n)){bt.warn("The element supplied is not included in the DOM")}t=t||{};ao.hooks("beforesetup").forEach((function(e){var i=e(n,er(t));if(!It(i)||Array.isArray(i)){bt.error("please return an object in beforesetup hooks");return}t=er(t,i)}));var a=tr.getComponent("Player");r=new a(n,t,i);ao.hooks("setup").forEach((function(e){return e(r)}));return r}ao.hooks_={};ao.hooks=function(e,t){ao.hooks_[e]=ao.hooks_[e]||[];if(t){ao.hooks_[e]=ao.hooks_[e].concat(t)}return ao.hooks_[e]};ao.hook=function(e,t){ao.hooks(e,t)};ao.hookOnce=function(e,t){ao.hooks(e,[].concat(t).map((function(t){var i=function i(){ao.removeHook(e,i);return t.apply(void 0,arguments)};return i})))};ao.removeHook=function(e,t){var i=ao.hooks(e).indexOf(t);if(i<=-1){return false}ao.hooks_[e]=ao.hooks_[e].slice();ao.hooks_[e].splice(i,1);return true};if(n.a.VIDEOJS_NO_DYNAMIC_STYLE!==true&&Ot()){var so=si(".vjs-styles-defaults");if(!so){so=pi("vjs-styles-defaults");var oo=si("head");if(oo){oo.insertBefore(so,oo.firstChild)}vi(so,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}hi(1,ao);ao.VERSION=mt;ao.options=zs.prototype.options_;ao.getPlayers=function(){return zs.players};ao.getPlayer=function(e){var t=zs.players;var i;if(typeof e==="string"){var r=no(e);var n=t[r];if(n){return n}i=si("#"+r)}else{i=e}if(Nt(i)){var a=i,s=a.player,o=a.playerId;if(s||t[o]){return s||t[o]}}};ao.getAllPlayers=function(){return Object.keys(zs.players).map((function(e){return zs.players[e]})).filter(Boolean)};ao.players=zs.players;ao.getComponent=tr.getComponent;ao.registerComponent=function(e,t){if(wn.isTech(t)){bt.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")}tr.registerComponent.call(tr,e,t)};ao.getTech=wn.getTech;ao.registerTech=wn.registerTech;ao.use=An;Object.defineProperty(ao,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(ao.middleware,"TERMINATOR",{value:In,writeable:false,enumerable:true});ao.browser=Sr;ao.TOUCH_ENABLED=gr;ao.extend=ro;ao.mergeOptions=er;ao.bind=Ni;ao.registerPlugin=io.registerPlugin;ao.deregisterPlugin=io.deregisterPlugin;ao.plugin=function(e,t){bt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return io.registerPlugin(e,t)};ao.getPlugins=io.getPlugins;ao.getPlugin=io.getPlugin;ao.getPluginVersion=io.getPluginVersion;ao.addLanguage=function(e,t){var i;e=(""+e).toLowerCase();ao.options.languages=er(ao.options.languages,(i={},i[e]=t,i));return ao.options.languages[e]};ao.log=bt;ao.createLogger=Tt;ao.createTimeRange=ao.createTimeRanges=Er;ao.formatTime=fa;ao.setFormatTime=la;ao.resetFormatTime=ca;ao.parseUrl=an;ao.isCrossOrigin=un;ao.EventTarget=Mi;ao.on=Ii;ao.one=Pi;ao.off=Ai;ao.trigger=xi;ao.xhr=b.a;ao.TextTrack=hn;ao.AudioTrack=dn;ao.VideoTrack=pn;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){ao[e]=function(){bt.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead");return ui[e].apply(null,arguments)}}));ao.computedStyle=xt;ao.dom=ui;ao.url=ln;ao.defineLazyProperty=Ms;var uo=function e(t,i){if(/^[a-z]+:/i.test(i)){return i}if(!/\/\//i.test(t)){t=A.a.buildAbsoluteURL(n.a.location.href,t)}return A.a.buildAbsoluteURL(t,i)};var lo=function e(t,i,r){if(t&&r.responseURL&&i!==r.responseURL){return r.responseURL}return i};var co=function e(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}};var fo=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var ho=function e(t,i,r){if(t===null)t=Function.prototype;var n=Object.getOwnPropertyDescriptor(t,i);if(n===undefined){var a=Object.getPrototypeOf(t);if(a===null){return undefined}else{return e(a,i,r)}}else if("value"in n){return n.value}else{var s=n.get;if(s===undefined){return undefined}return s.call(r)}};var po=function e(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i)Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i};var vo=function e(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t};var mo=function(){function e(e,t){var i=[];var r=true;var n=false;var a=undefined;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done);r=true){i.push(o.value);if(t&&i.length===t)break}}catch(e){n=true;a=e}finally{try{if(!r&&s["return"])s["return"]()}finally{if(n)throw a}}return i}return function(t,i){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var go=ao.mergeOptions,yo=ao.EventTarget,_o=ao.log;var bo=function e(t,i){["AUDIO","SUBTITLES"].forEach((function(e){for(var r in t.mediaGroups[e]){for(var n in t.mediaGroups[e][r]){var a=t.mediaGroups[e][r][n];i(a,e,r,n)}}}))};var To=function e(t,i,r){var n=i.slice();r=r||0;var a=Math.min(t.length,i.length+r);for(var s=r;s<a;s++){n[s-r]=go(t[s],n[s-r])}return n};var So=function e(t,i){if(!t.resolvedUri){t.resolvedUri=uo(i,t.uri)}if(t.key&&!t.key.resolvedUri){t.key.resolvedUri=uo(i,t.key.uri)}if(t.map&&!t.map.resolvedUri){t.map.resolvedUri=uo(i,t.map.uri)}};var ko=function e(t,i){var r=go(t,{});var n=r.playlists[i.id];if(!n){return null}if(n.segments&&i.segments&&n.segments.length===i.segments.length&&n.endList===i.endList&&n.mediaSequence===i.mediaSequence){return null}var a=go(n,i);if(n.segments){a.segments=To(n.segments,i.segments,i.mediaSequence-n.mediaSequence)}a.segments.forEach((function(e){So(e,a.resolvedUri)}));for(var s=0;s<r.playlists.length;s++){if(r.playlists[s].id===i.id){r.playlists[s]=a}}r.playlists[i.id]=a;r.playlists[i.uri]=a;return r};var wo=function e(t,i){return t+"-"+i};var Co=function e(t){var i=t.playlists.length;while(i--){var r=t.playlists[i];r.resolvedUri=uo(t.uri,r.uri);r.id=wo(i,r.uri);t.playlists[r.id]=r;t.playlists[r.uri]=r;if(!r.attributes){r.attributes={};_o.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}};var Eo=function e(t){bo(t,(function(e){if(e.uri){e.resolvedUri=uo(t.uri,e.uri)}}))};var Io=function e(t,i){var r=t.segments[t.segments.length-1];var n=void 0;if(i&&r&&r.duration){n=r.duration*1e3}else{n=(t.targetDuration||10)*500}return n};var Ao=function(e){po(t,e);function t(e,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};co(this,t);var n=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var a=r.withCredentials,s=a===undefined?false:a,o=r.handleManifestRedirects,u=o===undefined?false:o;n.srcUrl=e;n.hls_=i;n.withCredentials=s;n.handleManifestRedirects=u;var l=i.options_;n.customTagParsers=l&&l.customTagParsers||[];n.customTagMappers=l&&l.customTagMappers||[];if(!n.srcUrl){throw new Error("A non-empty playlist URL is required")}n.state="HAVE_NOTHING";n.on("mediaupdatetimeout",(function(){if(n.state!=="HAVE_METADATA"){return}n.state="HAVE_CURRENT_METADATA";n.request=n.hls_.xhr({uri:uo(n.master.uri,n.media().uri),withCredentials:n.withCredentials},(function(e,t){if(!n.request){return}if(e){return n.playlistRequestError(n.request,n.media(),"HAVE_METADATA")}n.haveMetadata(n.request,n.media().uri,n.media().id)}))}));return n}fo(t,[{key:"playlistRequestError",value:function e(t,i,r){var n=i.uri,a=i.id;this.request=null;if(r){this.state=r}this.error={playlist:this.master.playlists[a],status:t.status,message:"HLS playlist request error at URL: "+n+".",responseText:t.responseText,code:t.status>=500?4:2};this.trigger("error")}},{key:"haveMetadata",value:function e(t,i,r){var a=this;this.request=null;this.state="HAVE_METADATA";var s=new F;this.customTagParsers.forEach((function(e){return s.addParser(e)}));this.customTagMappers.forEach((function(e){return s.addTagMapper(e)}));s.push(t.responseText);s.end();s.manifest.uri=i;s.manifest.id=r;s.manifest.attributes=s.manifest.attributes||{};var o=ko(this.master,s.manifest);this.targetDuration=s.manifest.targetDuration;if(o){this.master=o;this.media_=this.master.playlists[r]}else{this.trigger("playlistunchanged")}if(!this.media().endList){n.a.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=n.a.setTimeout((function(){a.trigger("mediaupdatetimeout")}),Io(this.media(),!!o))}this.trigger("loadedplaylist")}},{key:"dispose",value:function e(){this.trigger("dispose");this.stopRequest();n.a.clearTimeout(this.mediaUpdateTimeout);n.a.clearTimeout(this.finalRenditionTimeout);this.off()}},{key:"stopRequest",value:function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}}},{key:"media",value:function e(t,i){var r=this;if(!t){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}if(typeof t==="string"){if(!this.master.playlists[t]){throw new Error("Unknown playlist URI: "+t)}t=this.master.playlists[t]}n.a.clearTimeout(this.finalRenditionTimeout);if(i){var a=t.targetDuration/2*1e3||5*1e3;this.finalRenditionTimeout=n.a.setTimeout(this.media.bind(this,t,false),a);return}var s=this.state;var o=!this.media_||t.id!==this.media_.id;if(this.master.playlists[t.id].endList){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null}this.state="HAVE_METADATA";this.media_=t;if(o){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!o){return}this.state="SWITCHING_MEDIA";if(this.request){if(t.resolvedUri===this.request.url){return}this.request.onreadystatechange=null;this.request.abort();this.request=null}if(this.media_){this.trigger("mediachanging")}this.request=this.hls_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(function(e,i){if(!r.request){return}t.resolvedUri=lo(r.handleManifestRedirects,t.resolvedUri,i);if(e){return r.playlistRequestError(r.request,t,s)}r.haveMetadata(i,t.uri,t.id);if(s==="HAVE_MASTER"){r.trigger("loadedmetadata")}else{r.trigger("mediachange")}}))}},{key:"pause",value:function e(){this.stopRequest();n.a.clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA"}else{this.state="HAVE_MASTER"}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA"}}},{key:"load",value:function e(t){var i=this;n.a.clearTimeout(this.mediaUpdateTimeout);var r=this.media();if(t){var a=r?r.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=n.a.setTimeout((function(){return i.load()}),a);return}if(!this.started){this.start();return}if(r&&!r.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"start",value:function e(){var t=this;this.started=true;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(e,i){if(!t.request){return}t.request=null;if(e){t.error={status:i.status,message:"HLS playlist request error at URL: "+t.srcUrl+".",responseText:i.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}var r=new F;t.customTagParsers.forEach((function(e){return r.addParser(e)}));t.customTagMappers.forEach((function(e){return r.addTagMapper(e)}));r.push(i.responseText);r.end();t.state="HAVE_MASTER";t.srcUrl=lo(t.handleManifestRedirects,t.srcUrl,i);r.manifest.uri=t.srcUrl;if(r.manifest.playlists){t.master=r.manifest;Co(t.master);Eo(t.master);t.trigger("loadedplaylist");if(!t.request){t.media(r.manifest.playlists[0])}return}var a=wo(0,t.srcUrl);t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:n.a.location.href,playlists:[{uri:t.srcUrl,id:a,resolvedUri:t.srcUrl,attributes:{}}]};t.master.playlists[a]=t.master.playlists[0];t.master.playlists[t.srcUrl]=t.master.playlists[0];t.haveMetadata(i,t.srcUrl,a);return t.trigger("loadedmetadata")}))}}]);return t}(yo);var xo=ao.createTimeRange;var Po=function e(t,i){var r=0;var n=i-t.mediaSequence;var a=t.segments[n];if(a){if(typeof a.start!=="undefined"){return{result:a.start,precise:true}}if(typeof a.end!=="undefined"){return{result:a.end-a.duration,precise:true}}}while(n--){a=t.segments[n];if(typeof a.end!=="undefined"){return{result:r+a.end,precise:true}}r+=a.duration;if(typeof a.start!=="undefined"){return{result:r+a.start,precise:true}}}return{result:r,precise:false}};var Lo=function e(t,i){var r=0;var n=void 0;var a=i-t.mediaSequence;for(;a<t.segments.length;a++){n=t.segments[a];if(typeof n.start!=="undefined"){return{result:n.start-r,precise:true}}r+=n.duration;if(typeof n.end!=="undefined"){return{result:n.end-r,precise:true}}}return{result:-1,precise:false}};var Do=function e(t,i,r){var n=void 0;var a=void 0;if(typeof i==="undefined"){i=t.mediaSequence+t.segments.length}if(i<t.mediaSequence){return 0}n=Po(t,i);if(n.precise){return n.result}a=Lo(t,i);if(a.precise){return a.result}return n.result+r};var Oo=function e(t,i,r){if(!t){return 0}if(typeof r!=="number"){r=0}if(typeof i==="undefined"){if(t.totalDuration){return t.totalDuration}if(!t.endList){return n.a.Infinity}}return Do(t,i,r)};var No=function e(t,i,r){var n=0;if(i>r){var a=[r,i];i=a[0];r=a[1]}if(i<0){for(var s=i;s<Math.min(0,r);s++){n+=t.targetDuration}i=0}for(var o=i;o<r;o++){n+=t.segments[o].duration}return n};var Ro=function e(t,i){if(!t.segments.length){return 0}var r=t.segments.length;var n=t.segments[r-1].duration||t.targetDuration;var a=typeof i==="number"?i:n+t.targetDuration*2;if(a===0){return r}var s=0;while(r--){s+=t.segments[r].duration;if(s>=a){break}}return Math.max(0,r)};var Uo=function e(t,i,r,n){if(!t||!t.segments){return null}if(t.endList){return Oo(t)}if(i===null){return null}i=i||0;var a=r?Ro(t,n):t.segments.length;return Do(t,t.mediaSequence+a,i)};var Mo=function e(t,i,r){var n=true;var a=i||0;var s=Uo(t,i,n,r);if(s===null){return xo()}return xo(a,s)};var Bo=function e(t){return t-Math.floor(t)===0};var jo=function e(t,i){if(Bo(i)){return i+t*.1}var r=i.toString().split(".")[1].length;for(var n=1;n<=r;n++){var a=Math.pow(10,n);var s=i*a;if(Bo(s)||n===r){return(s+t)/a}}};var Fo=jo.bind(null,1);var Ho=jo.bind(null,-1);var Vo=function e(t,i,r,n){var a=void 0;var s=void 0;var o=t.segments.length;var u=i-n;if(u<0){if(r>0){for(a=r-1;a>=0;a--){s=t.segments[a];u+=Ho(s.duration);if(u>0){return{mediaIndex:a,startTime:n-No(t,r,a)}}}}return{mediaIndex:0,startTime:i}}if(r<0){for(a=r;a<0;a++){u-=t.targetDuration;if(u<0){return{mediaIndex:0,startTime:i}}}r=0}for(a=r;a<o;a++){s=t.segments[a];u-=Fo(s.duration);if(u<0){return{mediaIndex:a,startTime:n+No(t,r,a)}}}return{mediaIndex:o-1,startTime:i}};var qo=function e(t){return t.excludeUntil&&t.excludeUntil>Date.now()};var Wo=function e(t){return t.excludeUntil&&t.excludeUntil===Infinity};var zo=function e(t){var i=qo(t);return!t.disabled&&!i};var Go=function e(t){return t.disabled};var Xo=function e(t){for(var i=0;i<t.segments.length;i++){if(t.segments[i].key){return true}}return false};var Ko=function e(t){for(var i=0;i<t.segments.length;i++){if(t.segments[i].map){return true}}return false};var Yo=function e(t,i){return i.attributes&&i.attributes[t]};var $o=function e(t,i,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(!Yo("BANDWIDTH",r)){return NaN}var a=t*r.attributes.BANDWIDTH;return(a-n*8)/i};var Qo=function e(t,i){if(t.playlists.length===1){return true}var r=i.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter((function(e){if(!zo(e)){return false}return(e.attributes.BANDWIDTH||0)<r})).length===0};var Jo={duration:Oo,seekable:Mo,safeLiveIndex:Ro,getMediaInfoForTime:Vo,isEnabled:zo,isDisabled:Go,isBlacklisted:qo,isIncompatible:Wo,playlistEnd:Uo,isAes:Xo,isFmp4:Ko,hasAttribute:Yo,estimateSegmentRequestTime:$o,isLowestEnabledRendition:Qo};var Zo=ao.xhr,eu=ao.mergeOptions;var tu=function e(){var t=function e(t,i){t=eu({timeout:45e3},t);var r=e.beforeRequest||ao.Hls.xhr.beforeRequest;if(r&&typeof r==="function"){var n=r(t);if(n){t=n}}var a=Zo(t,(function(e,t){var r=a.response;if(!e&&r){a.responseTime=Date.now();a.roundTripTime=a.responseTime-a.requestTime;a.bytesReceived=r.byteLength||r.length;if(!a.bandwidth){a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3)}}if(t.headers){a.responseHeaders=t.headers}if(e&&e.code==="ETIMEDOUT"){a.timedout=true}if(!e&&!a.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0){e=new Error("XHR Failed with a response of: "+(a&&(r||a.responseText)))}i(e,a)}));var s=a.abort;a.abort=function(){a.aborted=true;return s.apply(a,arguments)};a.uri=t.uri;a.requestTime=Date.now();return a};return t};var iu=function e(t){var i=void 0;var r=void 0;r=t.offset+t.length-1;i=t.offset;return"bytes="+i+"-"+r};var ru=function e(t){var i={};if(t.byterange){i.Range=iu(t.byterange)}return i};var nu=function e(t,i){return t.start(i)+"-"+t.end(i)};var au=function e(t,i){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(i%2?" ":"")};var su=function e(t){if(t>=32&&t<126){return String.fromCharCode(t)}return"."};var ou=function e(t){var i={};Object.keys(t).forEach((function(e){var r=t[e];if(ArrayBuffer.isView(r)){i[e]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}}else{i[e]=r}}));return i};var uu=function e(t){var i=t.byterange||{length:Infinity,offset:0};return[i.length,i.offset,t.resolvedUri].join(",")};var lu=function e(t){return t.resolvedUri};var cu=function e(t){var i=Array.prototype.slice.call(t);var r=16;var n="";var a=void 0;var s=void 0;for(var o=0;o<i.length/r;o++){a=i.slice(o*r,o*r+r).map(au).join("");s=i.slice(o*r,o*r+r).map(su).join("");n+=a+" "+s+"\n"}return n};var fu=function e(t){var i=t.bytes;return cu(i)};var hu=function e(t){var i="";var r=void 0;for(r=0;r<t.length;r++){i+=nu(t,r)+" "}return i};var du=Object.freeze({createTransferableMessage:ou,initSegmentId:uu,segmentKeyId:lu,hexDump:cu,tagDump:fu,textRanges:hu});var pu=.25;var vu=function e(t,i){if(!i.dateTimeObject){return null}var r=i.videoTimingInfo.transmuxerPrependedSeconds;var n=i.videoTimingInfo.transmuxedPresentationStart;var a=n+r;var s=t-a;return new Date(i.dateTimeObject.getTime()+s*1e3)};var mu=function e(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds};var gu=function e(t,i){var r=void 0;try{r=new Date(t)}catch(e){return null}if(!i||!i.segments||i.segments.length===0){return null}var n=i.segments[0];if(r<n.dateTimeObject){return null}for(var a=0;a<i.segments.length-1;a++){n=i.segments[a];var s=i.segments[a+1].dateTimeObject;if(r<s){break}}var o=i.segments[i.segments.length-1];var u=o.dateTimeObject;var l=o.videoTimingInfo?mu(o.videoTimingInfo):o.duration+o.duration*pu;var c=new Date(u.getTime()+l*1e3);if(r>c){return null}if(r>u){n=o}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Jo.duration(i,i.mediaSequence+i.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"}};var yu=function e(t,i){if(!i||!i.segments||i.segments.length===0){return null}var r=0;var n=void 0;for(var a=0;a<i.segments.length;a++){n=i.segments[a];r=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration;if(t<=r){break}}var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t){return null}if(t>r){if(t>r+s.duration*pu){return null}n=s}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}};var _u=function e(t,i){var r=void 0;var n=void 0;try{r=new Date(t);n=new Date(i)}catch(e){}var a=r.getTime();var s=n.getTime();return(s-a)/1e3};var bu=function e(t){if(!t.segments||t.segments.length===0){return false}for(var i=0;i<t.segments.length;i++){var r=t.segments[i];if(!r.dateTimeObject){return false}}return true};var Tu=function e(t){var i=t.playlist,r=t.time,n=r===undefined?undefined:r,a=t.callback;if(!a){throw new Error("getProgramTime: callback must be provided")}if(!i||n===undefined){return a({message:"getProgramTime: playlist and time must be provided"})}var s=yu(n,i);if(!s){return a({message:"valid programTime was not found"})}if(s.type==="estimate"){return a({message:"Accurate programTime could not be determined."+" Please seek to e.seekTime and try again",seekTime:s.estimatedStart})}var o={mediaSeconds:n};var u=vu(n,s.segment);if(u){o.programDateTime=u.toISOString()}return a(null,o)};var Su=function e(t){var i=t.programTime,r=t.playlist,n=t.retryCount,a=n===undefined?2:n,s=t.seekTo,o=t.pauseAfterSeek,u=o===undefined?true:o,l=t.tech,c=t.callback;if(!c){throw new Error("seekToProgramTime: callback must be provided")}if(typeof i==="undefined"||!r||!s){return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}if(!r.endList&&!l.hasStarted_){return c({message:"player must be playing a live stream to start buffering"})}if(!bu(r)){return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri})}var f=gu(i,r);if(!f){return c({message:i+" was not found in the stream"})}var h=f.segment;var d=_u(h.dateTimeObject,i);if(f.type==="estimate"){if(a===0){return c({message:i+" is not buffered yet. Try again"})}s(f.estimatedStart+d);l.one("seeked",(function(){e({programTime:i,playlist:r,retryCount:a-1,seekTo:s,pauseAfterSeek:u,tech:l,callback:c})}));return}var p=h.start+d;var v=function e(){return c(null,l.currentTime())};l.one("seeked",v);if(u){l.pause()}s(p)};var ku=1/30;var wu=ku*3;var Cu=function e(t,i){var r=[];var n=void 0;if(t&&t.length){for(n=0;n<t.length;n++){if(i(t.start(n),t.end(n))){r.push([t.start(n),t.end(n)])}}}return ao.createTimeRanges(r)};var Eu=function e(t,i){return Cu(t,(function(e,t){return e-wu<=i&&t+wu>=i}))};var Iu=function e(t,i){return Cu(t,(function(e){return e-ku>=i}))};var Au=function e(t){if(t.length<2){return ao.createTimeRanges()}var i=[];for(var r=1;r<t.length;r++){var n=t.end(r-1);var a=t.start(r);i.push([n,a])}return ao.createTimeRanges(i)};var xu=function e(t){var i=[];if(!t||!t.length){return""}for(var r=0;r<t.length;r++){i.push(t.start(r)+" => "+t.end(r))}return i.join(", ")};var Pu=function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var n=t.length?t.end(t.length-1):0;return(n-i)/r};var Lu=function e(t){var i=[];for(var r=0;r<t.length;r++){i.push({start:t.start(r),end:t.end(r)})}return i};var Du=function e(t,i,r){var n=i.player_;if(r.captions&&r.captions.length){if(!t.inbandTextTracks_){t.inbandTextTracks_={}}for(var a in r.captionStreams){if(!t.inbandTextTracks_[a]){n.tech_.trigger({type:"usage",name:"hls-608"});var s=n.textTracks().getTrackById(a);if(s){t.inbandTextTracks_[a]=s}else{t.inbandTextTracks_[a]=n.addRemoteTextTrack({kind:"captions",id:a,label:a},false).track}}}}if(r.metadata&&r.metadata.length&&!t.metadataTrack_){t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;t.metadataTrack_.inBandMetadataTrackDispatchType=r.metadata.dispatchType}};var Ou=function e(t,i,r){var n=void 0;var a=void 0;if(!r){return}if(!r.cues){return}n=r.cues.length;while(n--){a=r.cues[n];if(a.startTime<=i&&a.endTime>=t){r.removeCue(a)}}};var Nu=function e(t){Object.defineProperties(t.frame,{id:{get:function e(){ao.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return t.value.key}},value:{get:function e(){ao.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return t.value.data}},privateData:{get:function e(){ao.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return t.value.data}}})};var Ru=function e(t){var i=void 0;if(isNaN(t)||Math.abs(t)===Infinity){i=Number.MAX_VALUE}else{i=t}return i};var Uu=function e(t,i,r){var a=n.a.WebKitDataCue||n.a.VTTCue;if(i){i.forEach((function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new a(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))}),t)}if(r){var s=Ru(t.mediaSource_.duration);r.forEach((function(e){var t=e.cueTime+this.timestampOffset;if(typeof t!=="number"||n.a.isNaN(t)||t<0||!(t<Infinity)){return}e.frames.forEach((function(e){var i=new a(t,t,e.value||e.url||e.data||"");i.frame=e;i.value=e;Nu(i);this.metadataTrack_.addCue(i)}),this)}),t);if(t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){var o=t.metadataTrack_.cues;var u=[];for(var l=0;l<o.length;l++){if(o[l]){u.push(o[l])}}var c=u.reduce((function(e,t){var i=e[t.startTime]||[];i.push(t);e[t.startTime]=i;return e}),{});var f=Object.keys(c).sort((function(e,t){return Number(e)-Number(t)}));f.forEach((function(e,t){var i=c[e];var r=Number(f[t+1])||s;i.forEach((function(e){e.endTime=r}))}))}}};var Mu=typeof window!=="undefined"?window:{},Bu=typeof Symbol==="undefined"?"__target":Symbol(),ju="application/javascript",Fu=Mu.BlobBuilder||Mu.WebKitBlobBuilder||Mu.MozBlobBuilder||Mu.MSBlobBuilder,Hu=Mu.URL||Mu.webkitURL||Hu&&Hu.msURL,Vu=Mu.Worker;function qu(e,t){return function i(r){var n=this;if(!t){return new Vu(e)}else if(Vu&&!r){var a=t.toString().replace(/^function.+?{/,"").slice(0,-1),s=Xu(a);this[Bu]=new Vu(s);Ku(this[Bu],s);return this[Bu]}else{var o={postMessage:function e(t){if(n.onmessage){setTimeout((function(){n.onmessage({data:t,target:o})}))}}};t.call(o);this.postMessage=function(e){setTimeout((function(){o.onmessage({data:e,target:n})}))};this.isThisThread=true}}}if(Vu){var Wu,zu=Xu("self.onmessage = function () {}"),Gu=new Uint8Array(1);try{Wu=new Vu(zu);Wu.postMessage(Gu,[Gu.buffer])}catch(e){Vu=null}finally{Hu.revokeObjectURL(zu);if(Wu){Wu.terminate()}}}function Xu(e){try{return Hu.createObjectURL(new Blob([e],{type:ju}))}catch(i){var t=new Fu;t.append(e);return Hu.createObjectURL(t.getBlob(type))}}function Ku(e,t){if(!e||!t)return;var i=e.terminate;e.objURL=t;e.terminate=function(){if(e.objURL)Hu.revokeObjectURL(e.objURL);i.call(e)}}var Yu=new qu("./transmuxer-worker.worker.js",(function(e,t){var i=this;var r=function(){var e=function e(){this.init=function(){var e={};this.on=function(t,i){if(!e[t]){e[t]=[]}e[t]=e[t].concat(i)};this.off=function(t,i){var r;if(!e[t]){return false}r=e[t].indexOf(i);e[t]=e[t].slice();e[t].splice(r,1);return r>-1};this.trigger=function(t){var i,r,n,a;i=e[t];if(!i){return}if(arguments.length===2){n=i.length;for(r=0;r<n;++r){i[r].call(this,arguments[1])}}else{a=[];r=arguments.length;for(r=1;r<arguments.length;++r){a.push(arguments[r])}n=i.length;for(r=0;r<n;++r){i[r].apply(this,a)}}};this.dispose=function(){e={}}}};e.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}));this.on("done",(function(t){e.flush(t)}));this.on("partialdone",(function(t){e.partialFlush(t)}));this.on("endedtimeline",(function(t){e.endTimeline(t)}));this.on("reset",(function(t){e.reset(t)}));return e};e.prototype.push=function(e){this.trigger("data",e)};e.prototype.flush=function(e){this.trigger("done",e)};e.prototype.partialFlush=function(e){this.trigger("partialdone",e)};e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)};e.prototype.reset=function(e){this.trigger("reset",e)};var t=e;var r=Math.pow(2,32)-1;var n,a,s,o,u,l,c,f,h,d,p,v,m,g,y,_,b,T,S,k,w,C,E,I,A,x,P,L,D,O,N,R,U,M,B,j;(function(){var e;E={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(e in E){if(E.hasOwnProperty(e)){E[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]}}I=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);A=new Uint8Array([0,0,0,1]);P=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);D={video:P,audio:L};R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);N=new Uint8Array([0,0,0,0,0,0,0,0]);U=new Uint8Array([0,0,0,0,0,0,0,0]);M=U;B=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);j=U;O=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();n=function e(t){var i=[],r=0,n,a,s;for(n=1;n<arguments.length;n++){i.push(arguments[n])}n=i.length;while(n--){r+=i[n].byteLength}a=new Uint8Array(r+8);s=new DataView(a.buffer,a.byteOffset,a.byteLength);s.setUint32(0,a.byteLength);a.set(t,4);for(n=0,r=8;n<i.length;n++){a.set(i[n],r);r+=i[n].byteLength}return a};a=function e(){return n(E.dinf,n(E.dref,R))};s=function e(t){return n(E.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))};o=function e(){return n(E.ftyp,I,A,I,x)};_=function e(t){return n(E.hdlr,D[t])};u=function e(t){return n(E.mdat,t)};y=function e(t){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,t.duration&255,85,196,0,0]);if(t.samplerate){i[12]=t.samplerate>>>24&255;i[13]=t.samplerate>>>16&255;i[14]=t.samplerate>>>8&255;i[15]=t.samplerate&255}return n(E.mdhd,i)};g=function e(t){return n(E.mdia,y(t),_(t.type),c(t))};l=function e(t){return n(E.mfhd,new Uint8Array([0,0,0,0,(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255]))};c=function e(t){return n(E.minf,t.type==="video"?n(E.vmhd,O):n(E.smhd,N),a(),T(t))};f=function e(t,i){var r=[],a=i.length;while(a--){r[a]=k(i[a])}return n.apply(null,[E.moof,l(t)].concat(r))};h=function e(t){var i=t.length,r=[];while(i--){r[i]=v(t[i])}return n.apply(null,[E.moov,p(4294967295)].concat(r).concat(d(t)))};d=function e(t){var i=t.length,r=[];while(i--){r[i]=w(t[i])}return n.apply(null,[E.mvex].concat(r))};p=function e(t){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(E.mvhd,i)};b=function e(t){var i=t.samples||[],r=new Uint8Array(4+i.length),a,s;for(s=0;s<i.length;s++){a=i[s].flags;r[s+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return n(E.sdtp,r)};T=function e(t){return n(E.stbl,S(t),n(E.stts,j),n(E.stsc,M),n(E.stsz,B),n(E.stco,U))};(function(){var e,t;S=function i(r){return n(E.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),r.type==="video"?e(r):t(r))};e=function e(t){var i=t.sps||[],r=t.pps||[],a=[],s=[],o,u;for(o=0;o<i.length;o++){a.push((i[o].byteLength&65280)>>>8);a.push(i[o].byteLength&255);a=a.concat(Array.prototype.slice.call(i[o]))}for(o=0;o<r.length;o++){s.push((r[o].byteLength&65280)>>>8);s.push(r[o].byteLength&255);s=s.concat(Array.prototype.slice.call(r[o]))}u=[E.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t.width&65280)>>8,t.width&255,(t.height&65280)>>8,t.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(E.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([i.length],a,[r.length],s))),n(E.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];if(t.sarRatio){var l=t.sarRatio[0],c=t.sarRatio[1];u.push(n(E.pasp,new Uint8Array([(l&4278190080)>>24,(l&16711680)>>16,(l&65280)>>8,l&255,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255])))}return n.apply(null,u)};t=function e(t){return n(E.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(t.channelcount&65280)>>8,t.channelcount&255,(t.samplesize&65280)>>8,t.samplesize&255,0,0,0,0,(t.samplerate&65280)>>8,t.samplerate&255,0,0]),s(t))}})();m=function e(t){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,0,(t.duration&4278190080)>>24,(t.duration&16711680)>>16,(t.duration&65280)>>8,t.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(t.width&65280)>>8,t.width&255,0,0,(t.height&65280)>>8,t.height&255,0,0]);return n(E.tkhd,i)};k=function e(t){var i,a,s,o,u,l,c;i=n(E.tfhd,new Uint8Array([0,0,0,58,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));l=Math.floor(t.baseMediaDecodeTime/(r+1));c=Math.floor(t.baseMediaDecodeTime%(r+1));a=n(E.tfdt,new Uint8Array([1,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,l&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255]));u=32+20+8+16+8+8;if(t.type==="audio"){s=C(t,u);return n(E.traf,i,a,s)}o=b(t);s=C(t,o.length+u);return n(E.traf,i,a,s,o)};v=function e(t){t.duration=t.duration||4294967295;return n(E.trak,m(t),g(t))};w=function e(t){var i=new Uint8Array([0,0,0,0,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(t.type!=="video"){i[i.length-1]=0}return n(E.trex,i)};(function(){var e,t,i;i=function e(t,i){var r=0,n=0,a=0,s=0;if(t.length){if(t[0].duration!==undefined){r=1}if(t[0].size!==undefined){n=2}if(t[0].flags!==undefined){a=4}if(t[0].compositionTimeOffset!==undefined){s=8}}return[0,0,r|n|a|s,1,(t.length&4278190080)>>>24,(t.length&16711680)>>>16,(t.length&65280)>>>8,t.length&255,(i&4278190080)>>>24,(i&16711680)>>>16,(i&65280)>>>8,i&255]};t=function e(t,r){var a,s,o,u;s=t.samples||[];r+=8+12+16*s.length;a=i(s,r);for(u=0;u<s.length;u++){o=s[u];a=a.concat([(o.duration&4278190080)>>>24,(o.duration&16711680)>>>16,(o.duration&65280)>>>8,o.duration&255,(o.size&4278190080)>>>24,(o.size&16711680)>>>16,(o.size&65280)>>>8,o.size&255,o.flags.isLeading<<2|o.flags.dependsOn,o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,o.flags.degradationPriority&240<<8,o.flags.degradationPriority&15,(o.compositionTimeOffset&4278190080)>>>24,(o.compositionTimeOffset&16711680)>>>16,(o.compositionTimeOffset&65280)>>>8,o.compositionTimeOffset&255])}return n(E.trun,new Uint8Array(a))};e=function e(t,r){var a,s,o,u;s=t.samples||[];r+=8+12+8*s.length;a=i(s,r);for(u=0;u<s.length;u++){o=s[u];a=a.concat([(o.duration&4278190080)>>>24,(o.duration&16711680)>>>16,(o.duration&65280)>>>8,o.duration&255,(o.size&4278190080)>>>24,(o.size&16711680)>>>16,(o.size&65280)>>>8,o.size&255])}return n(E.trun,new Uint8Array(a))};C=function i(r,n){if(r.type==="audio"){return e(r,n)}return t(r,n)}})();var F={ftyp:o,mdat:u,moof:f,moov:h,initSegment:function e(t){var i=o(),r=h(t),n;n=new Uint8Array(i.byteLength+r.byteLength);n.set(i);n.set(r,i.byteLength);return n}};var H=function e(t){var i,r,n=[],a=[];a.byteLength=0;a.nalCount=0;a.duration=0;n.byteLength=0;for(i=0;i<t.length;i++){r=t[i];if(r.nalUnitType==="access_unit_delimiter_rbsp"){if(n.length){n.duration=r.dts-n.dts;a.byteLength+=n.byteLength;a.nalCount+=n.length;a.duration+=n.duration;a.push(n)}n=[r];n.byteLength=r.data.byteLength;n.pts=r.pts;n.dts=r.dts}else{if(r.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){n.keyFrame=true}n.duration=r.dts-n.dts;n.byteLength+=r.data.byteLength;n.push(r)}}if(a.length&&(!n.duration||n.duration<=0)){n.duration=a[a.length-1].duration}a.byteLength+=n.byteLength;a.nalCount+=n.length;a.duration+=n.duration;a.push(n);return a};var V=function e(t){var i,r,n=[],a=[];n.byteLength=0;n.nalCount=0;n.duration=0;n.pts=t[0].pts;n.dts=t[0].dts;a.byteLength=0;a.nalCount=0;a.duration=0;a.pts=t[0].pts;a.dts=t[0].dts;for(i=0;i<t.length;i++){r=t[i];if(r.keyFrame){if(n.length){a.push(n);a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration}n=[r];n.nalCount=r.length;n.byteLength=r.byteLength;n.pts=r.pts;n.dts=r.dts;n.duration=r.duration}else{n.duration+=r.duration;n.nalCount+=r.length;n.byteLength+=r.byteLength;n.push(r)}}if(a.length&&n.duration<=0){n.duration=a[a.length-1].duration}a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration;a.push(n);return a};var q=function e(t){var i;if(!t[0][0].keyFrame&&t.length>1){i=t.shift();t.byteLength-=i.byteLength;t.nalCount-=i.nalCount;t[0][0].dts=i.dts;t[0][0].pts=i.pts;t[0][0].duration+=i.duration}return t};var W=function e(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var z=function e(t,i){var r=W();r.dataOffset=i;r.compositionTimeOffset=t.pts-t.dts;r.duration=t.duration;r.size=4*t.length;r.size+=t.byteLength;if(t.keyFrame){r.flags.dependsOn=2;r.flags.isNonSyncSample=0}return r};var G=function e(t,i){var r,n,a,s,o,u=i||0,l=[];for(r=0;r<t.length;r++){s=t[r];for(n=0;n<s.length;n++){o=s[n];a=z(o,u);u+=a.size;l.push(a)}}return l};var X=function e(t){var i,r,n,a,s,o,u=0,l=t.byteLength,c=t.nalCount,f=l+4*c,h=new Uint8Array(f),d=new DataView(h.buffer);for(i=0;i<t.length;i++){a=t[i];for(r=0;r<a.length;r++){s=a[r];for(n=0;n<s.length;n++){o=s[n];d.setUint32(u,o.data.byteLength);u+=4;h.set(o.data,u);u+=o.data.byteLength}}}return h};var K=function e(t,i){var r,n=i||0,a=[];r=z(t,n);a.push(r);return a};var Y=function e(t){var i,r,n=0,a=t.byteLength,s=t.length,o=a+4*s,u=new Uint8Array(o),l=new DataView(u.buffer);for(i=0;i<t.length;i++){r=t[i];l.setUint32(n,r.data.byteLength);n+=4;u.set(r.data,n);n+=r.data.byteLength}return u};var $={groupNalsIntoFrames:H,groupFramesIntoGops:V,extendFirstKeyFrame:q,generateSampleTable:G,concatenateNalData:X,generateSampleTableForFrame:K,concatenateNalDataForFrame:Y};var Q=[33,16,5,32,164,27];var J=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var Z=function e(t){var i=[];while(t--){i.push(0)}return i};var ee=function e(t){return Object.keys(t).reduce((function(e,i){e[i]=new Uint8Array(t[i].reduce((function(e,t){return e.concat(t)}),[]));return e}),{})};var te={96e3:[Q,[227,64],Z(154),[56]],88200:[Q,[231],Z(170),[56]],64e3:[Q,[248,192],Z(240),[56]],48e3:[Q,[255,192],Z(268),[55,148,128],Z(54),[112]],44100:[Q,[255,192],Z(268),[55,163,128],Z(84),[112]],32e3:[Q,[255,192],Z(268),[55,234],Z(226),[112]],24e3:[Q,[255,192],Z(268),[55,255,128],Z(268),[111,112],Z(126),[224]],16e3:[Q,[255,192],Z(268),[55,255,128],Z(268),[111,255],Z(269),[223,108],Z(195),[1,192]],12e3:[J,Z(268),[3,127,248],Z(268),[6,255,240],Z(268),[13,255,224],Z(268),[27,253,128],Z(259),[56]],11025:[J,Z(268),[3,127,248],Z(268),[6,255,240],Z(268),[13,255,224],Z(268),[27,255,192],Z(268),[55,175,128],Z(108),[112]],8e3:[J,Z(268),[3,121,16],Z(47),[7]]};var ie=ee(te);var re=9e4,ne,ae,se,oe,ue,le,ce;ne=function e(t){return t*re};ae=function e(t,i){return t*i};se=function e(t){return t/re};oe=function e(t,i){return t/i};ue=function e(t,i){return ne(oe(t,i))};le=function e(t,i){return ae(se(t),i)};ce=function e(t,i,r){return se(r?t:t-i)};var fe={ONE_SECOND_IN_TS:re,secondsToVideoTs:ne,secondsToAudioTs:ae,videoTsToSeconds:se,audioTsToSeconds:oe,audioTsToVideoTs:ue,videoTsToAudioTs:le,metadataTsToSeconds:ce};var he=function e(t){var i,r,n=0;for(i=0;i<t.length;i++){r=t[i];n+=r.data.byteLength}return n};var de=function e(t,i,r,n){var a,s=0,o=0,u=0,l=0,c,f,h;if(!i.length){return}a=fe.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate);s=Math.ceil(fe.ONE_SECOND_IN_TS/(t.samplerate/1024));if(r&&n){o=a-Math.max(r,n);u=Math.floor(o/s);l=u*s}if(u<1||l>fe.ONE_SECOND_IN_TS/2){return}c=ie[t.samplerate];if(!c){c=i[0].data}for(f=0;f<u;f++){h=i[0];i.splice(0,0,{data:c,dts:h.dts-s,pts:h.pts-s})}t.baseMediaDecodeTime-=Math.floor(fe.videoTsToAudioTs(l,t.samplerate))};var pe=function e(t,i,r){if(i.minSegmentDts>=r){return t}i.minSegmentDts=Infinity;return t.filter((function(e){if(e.dts>=r){i.minSegmentDts=Math.min(i.minSegmentDts,e.dts);i.minSegmentPts=i.minSegmentDts;return true}return false}))};var ve=function e(t){var i,r,n=[];for(i=0;i<t.length;i++){r=t[i];n.push({size:r.data.byteLength,duration:1024})}return n};var me=function e(t){var i,r,n=0,a=new Uint8Array(he(t));for(i=0;i<t.length;i++){r=t[i];a.set(r.data,n);n+=r.data.byteLength}return a};var ge={prefixWithSilence:de,trimAdtsFramesByEarliestDts:pe,generateSampleTable:ve,concatenateFrameData:me};var ye=fe.ONE_SECOND_IN_TS;var _e=function e(t,i){if(typeof i.pts==="number"){if(t.timelineStartInfo.pts===undefined){t.timelineStartInfo.pts=i.pts}if(t.minSegmentPts===undefined){t.minSegmentPts=i.pts}else{t.minSegmentPts=Math.min(t.minSegmentPts,i.pts)}if(t.maxSegmentPts===undefined){t.maxSegmentPts=i.pts}else{t.maxSegmentPts=Math.max(t.maxSegmentPts,i.pts)}}if(typeof i.dts==="number"){if(t.timelineStartInfo.dts===undefined){t.timelineStartInfo.dts=i.dts}if(t.minSegmentDts===undefined){t.minSegmentDts=i.dts}else{t.minSegmentDts=Math.min(t.minSegmentDts,i.dts)}if(t.maxSegmentDts===undefined){t.maxSegmentDts=i.dts}else{t.maxSegmentDts=Math.max(t.maxSegmentDts,i.dts)}}};var be=function e(t){delete t.minSegmentDts;delete t.maxSegmentDts;delete t.minSegmentPts;delete t.maxSegmentPts};var Te=function e(t,i){var r,n,a=t.minSegmentDts;if(!i){a-=t.timelineStartInfo.dts}r=t.timelineStartInfo.baseMediaDecodeTime;r+=a;r=Math.max(0,r);if(t.type==="audio"){n=t.samplerate/ye;r*=n;r=Math.floor(r)}return r};var Se={clearDtsInfo:be,calculateTrackBaseMediaDecodeTime:Te,collectDtsInfo:_e};var ke=4,we=128;var Ce=function e(t){var i=0,r={payloadType:-1,payloadSize:0},n=0,a=0;while(i<t.byteLength){if(t[i]===we){break}while(t[i]===255){n+=255;i++}n+=t[i++];while(t[i]===255){a+=255;i++}a+=t[i++];if(!r.payload&&n===ke){r.payloadType=n;r.payloadSize=a;r.payload=t.subarray(i,i+a);break}i+=a;n=0;a=0}return r};var Ee=function e(t){if(t.payload[0]!==181){return null}if((t.payload[1]<<8|t.payload[2])!==49){return null}if(String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])!=="GA94"){return null}if(t.payload[7]!==3){return null}return t.payload.subarray(8,t.payload.length-1)};var Ie=function e(t,i){var r=[],n,a,s,o;if(!(i[0]&64)){return r}a=i[0]&31;for(n=0;n<a;n++){s=n*3;o={type:i[s+2]&3,pts:t};if(i[s+2]&4){o.ccData=i[s+3]<<8|i[s+4];r.push(o)}}return r};var Ae=function e(t){var i=t.byteLength,r=[],n=1,a,s;while(n<i-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return t}a=i-r.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===r[0]){o++;r.shift()}s[n]=t[o]}return s};var xe={parseSei:Ce,parseUserData:Ee,parseCaptionPackets:Ie,discardEmulationPreventionBytes:Ae,USER_DATA_REGISTERED_ITU_T_T35:ke};var Pe=function e(){e.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Ue(0,0),new Ue(0,1),new Ue(1,0),new Ue(1,1)];this.reset();this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data"));e.on("partialdone",this.trigger.bind(this,"partialdone"));e.on("done",this.trigger.bind(this,"done"))}),this)};Pe.prototype=new t;Pe.prototype.push=function(e){var t,i,r;if(e.nalUnitType!=="sei_rbsp"){return}t=xe.parseSei(e.escapedRBSP);if(t.payloadType!==xe.USER_DATA_REGISTERED_ITU_T_T35){return}i=xe.parseUserData(t);if(!i){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}r=xe.parseCaptionPackets(e.pts,i);this.captionPackets_=this.captionPackets_.concat(r);if(this.latestDts_!==e.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=e.dts};Pe.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return e==="flush"?t.flush():t.partialFlush()}),this)};Pe.prototype.flushStream=function(e){if(!this.captionPackets_.length){this.flushCCStreams(e);return}this.captionPackets_.forEach((function(e,t){e.presortIndex=t}));this.captionPackets_.sort((function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts}));this.captionPackets_.forEach((function(e){if(e.type<2){this.dispatchCea608Packet(e)}}),this);this.captionPackets_.length=0;this.flushCCStreams(e)};Pe.prototype.flush=function(){return this.flushStream("flush")};Pe.prototype.partialFlush=function(){return this.flushStream("partialFlush")};Pe.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach((function(e){e.reset()}))};Pe.prototype.dispatchCea608Packet=function(e){if(this.setsTextOrXDSActive(e)){this.activeCea608Channel_[e.type]=null}else if(this.setsChannel1Active(e)){this.activeCea608Channel_[e.type]=0}else if(this.setsChannel2Active(e)){this.activeCea608Channel_[e.type]=1}if(this.activeCea608Channel_[e.type]===null){return}this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};Pe.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};Pe.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};Pe.prototype.setsTextOrXDSActive=function(e){return(e.ccData&28928)===256||(e.ccData&30974)===4138||(e.ccData&30974)===6186};var Le={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var De=function e(t){if(t===null){return""}t=Le[t]||t;return String.fromCharCode(t)};var Oe=14;var Ne=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var Re=function e(){var t=[],i=Oe+1;while(i--){t.push("")}return t};var Ue=function e(t,i){e.prototype.init.call(this);this.field_=t||0;this.dataChannel_=i||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,i,r,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}r=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(e.pts);this.flushDisplayed(e.pts);i=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=i;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(e.pts)}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=Re()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=Re()}else if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(e.pts);this.displayed_=Re()}this.mode_="paintOn";this.startPts_=e.pts}else if(this.isSpecialCharacter(r,n)){r=(r&3)<<8;a=De(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(r,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}r=(r&3)<<8;a=De(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(r,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(r,n)){this.column_+=n&3}else if(this.isPAC(r,n)){var s=Ne.indexOf(t&7968);if(this.mode_==="rollUp"){if(s-this.rollUpRows_+1<0){s=this.rollUpRows_-1}this.setRollUp(e.pts,s)}if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(r)){if(n===0){n=null}a=De(r);a+=De(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};Ue.prototype=new t;Ue.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){console.error("Skipping malformed caption.");return""}})).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};Ue.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=Re();this.nonDisplayed_=Re();this.lastControlCode_=null;this.column_=0;this.row_=Oe;this.rollUpRows_=2;this.formatting_=[]};Ue.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Ue.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};Ue.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63};Ue.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47};Ue.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35};Ue.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127};Ue.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};Ue.prototype.isNormalChar=function(e){return e>=32&&e<=127};Ue.prototype.setRollUp=function(e,t){if(this.mode_!=="rollUp"){this.row_=Oe;this.mode_="rollUp";this.flushDisplayed(e);this.nonDisplayed_=Re();this.displayed_=Re()}if(t!==undefined&&t!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[t-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]=""}}if(t===undefined){t=this.row_}this.topRow_=t-this.rollUpRows_+1};Ue.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,i)};Ue.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[];this[this.mode_](e,t)};Ue.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t;this.nonDisplayed_[this.row_]=i};Ue.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};Ue.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.row_+1;e<Oe+1;e++){this.displayed_[e]=""}for(e=this.topRow_;e<this.row_;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[this.row_]=""};Ue.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};var Me={CaptionStream:Pe,Cea608Stream:Ue};var Be={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var je=8589934592;var Fe=4294967296;var He="shared";var Ve=function e(t,i){var r=1;if(t>i){r=-1}while(Math.abs(i-t)>Fe){t+=r*je}return t};var qe=function e(t){var i,r;e.prototype.init.call(this);this.type_=t||He;this.push=function(e){if(this.type_!==He&&e.type!==this.type_){return}if(r===undefined){r=e.dts}e.dts=Ve(e.dts,r);e.pts=Ve(e.pts,r);i=e.dts;this.trigger("data",e)};this.flush=function(){r=i;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){r=void 0;i=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};qe.prototype=new t;var We={TimestampRolloverStream:qe,handleRollover:Ve};var ze=function e(t,i,r){var n,a="";for(n=i;n<r;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a},Ge=function e(t,i,r){return decodeURIComponent(ze(t,i,r))},Xe=function e(t,i,r){return unescape(ze(t,i,r))},Ke=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},Ye={TXXX:function e(t){var i;if(t.data[0]!==3){return}for(i=1;i<t.data.length;i++){if(t.data[i]===0){t.description=Ge(t.data,1,i);t.value=Ge(t.data,i+1,t.data.length).replace(/\0*$/,"");break}}t.data=t.value},WXXX:function e(t){var i;if(t.data[0]!==3){return}for(i=1;i<t.data.length;i++){if(t.data[i]===0){t.description=Ge(t.data,1,i);t.url=Ge(t.data,i+1,t.data.length);break}}},PRIV:function e(t){var i;for(i=0;i<t.data.length;i++){if(t.data[i]===0){t.owner=Xe(t.data,0,i);break}}t.privateData=t.data.subarray(i+1);t.data=t.privateData}},$e;$e=function e(t){var i={debug:!!(t&&t.debug),descriptor:t&&t.descriptor},r=0,n=[],a=0,s;$e.prototype.init.call(this);this.dispatchType=Be.METADATA_STREAM_TYPE.toString(16);if(i.descriptor){for(s=0;s<i.descriptor.length;s++){this.dispatchType+=("00"+i.descriptor[s].toString(16)).slice(-2)}}this.push=function(e){var t,s,o,u,l,c;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){a=0;n.length=0}if(n.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(i.debug){console.log("Skipping unrecognized metadata packet")}return}n.push(e);a+=e.data.byteLength;if(n.length===1){r=Ke(e.data.subarray(6,10));r+=10}if(a<r){return}t={data:new Uint8Array(r),frames:[],pts:n[0].pts,dts:n[0].dts};for(l=0;l<r;){t.data.set(n[0].data.subarray(0,r-l),l);l+=n[0].data.byteLength;a-=n[0].data.byteLength;n.shift()}s=10;if(t.data[5]&64){s+=4;s+=Ke(t.data.subarray(10,14));r-=Ke(t.data.subarray(16,20))}do{o=Ke(t.data.subarray(s+4,s+8));if(o<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}c=String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]);u={id:c,data:t.data.subarray(s+10,s+o+10)};u.key=u.id;if(Ye[u.id]){Ye[u.id](u);if(u.owner==="com.apple.streaming.transportStreamTimestamp"){var f=u.data,h=(f[3]&1)<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2;h*=4;h+=f[7]&3;u.timeStamp=h;if(t.pts===undefined&&t.dts===undefined){t.pts=u.timeStamp;t.dts=u.timeStamp}this.trigger("timestamp",u)}}t.frames.push(u);s+=10;s+=o}while(s<r);this.trigger("data",t)}};$e.prototype=new t;var Qe=$e;var Je=We.TimestampRolloverStream;var Ze,et,tt;var it=188,rt=71;Ze=function e(){var t=new Uint8Array(it),i=0;Ze.prototype.init.call(this);this.push=function(e){var r=0,n=it,a;if(i){a=new Uint8Array(e.byteLength+i);a.set(t.subarray(0,i));a.set(e,i);i=0}else{a=e}while(n<a.byteLength){if(a[r]===rt&&a[n]===rt){this.trigger("data",a.subarray(r,n));r+=it;n+=it;continue}r++;n++}if(r<a.byteLength){t.set(a.subarray(r),0);i=a.byteLength-r}};this.flush=function(){if(i===it&&t[0]===rt){this.trigger("data",t);i=0}this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.reset=function(){i=0;this.trigger("reset")}};Ze.prototype=new t;et=function e(){var t,i,r,n;et.prototype.init.call(this);n=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;t=function e(t,n){var a=0;if(n.payloadUnitStartIndicator){a+=t[a]+1}if(n.type==="pat"){i(t.subarray(a),n)}else{r(t.subarray(a),n)}};i=function e(t,i){i.section_number=t[7];i.last_section_number=t[8];n.pmtPid=(t[10]&31)<<8|t[11];i.pmtPid=n.pmtPid};r=function e(t,i){var r,a,s,o;if(!(t[5]&1)){return}n.programMapTable={video:null,audio:null,"timed-metadata":{}};r=(t[1]&15)<<8|t[2];a=3+r-4;s=(t[10]&15)<<8|t[11];o=12+s;while(o<a){var u=t[o];var l=(t[o+1]&31)<<8|t[o+2];if(u===Be.H264_STREAM_TYPE&&n.programMapTable.video===null){n.programMapTable.video=l}else if(u===Be.ADTS_STREAM_TYPE&&n.programMapTable.audio===null){n.programMapTable.audio=l}else if(u===Be.METADATA_STREAM_TYPE){n.programMapTable["timed-metadata"][l]=u}o+=((t[o+3]&15)<<8|t[o+4])+5}i.programMapTable=n.programMapTable};this.push=function(e){var i={},r=4;i.payloadUnitStartIndicator=!!(e[1]&64);i.pid=e[1]&31;i.pid<<=8;i.pid|=e[2];if((e[3]&48)>>>4>1){r+=e[r]+1}if(i.pid===0){i.type="pat";t(e.subarray(r),i);this.trigger("data",i)}else if(i.pid===this.pmtPid){i.type="pmt";t(e.subarray(r),i);this.trigger("data",i);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([e,r,i])}else{this.processPes_(e,r,i)}};this.processPes_=function(e,t,i){if(i.pid===this.programMapTable.video){i.streamType=Be.H264_STREAM_TYPE}else if(i.pid===this.programMapTable.audio){i.streamType=Be.ADTS_STREAM_TYPE}else{i.streamType=this.programMapTable["timed-metadata"][i.pid]}i.type="pes";i.data=e.subarray(t);this.trigger("data",i)}};et.prototype=new t;et.STREAM_TYPES={h264:27,adts:15};tt=function e(){var t=this,i={data:[],size:0},r={data:[],size:0},n={data:[],size:0},a,s=function e(t,i){var r;i.packetLength=6+(t[4]<<8|t[5]);i.dataAlignmentIndicator=(t[6]&4)!==0;r=t[7];if(r&192){i.pts=(t[9]&14)<<27|(t[10]&255)<<20|(t[11]&254)<<12|(t[12]&255)<<5|(t[13]&254)>>>3;i.pts*=4;i.pts+=(t[13]&6)>>>1;i.dts=i.pts;if(r&64){i.dts=(t[14]&14)<<27|(t[15]&255)<<20|(t[16]&254)<<12|(t[17]&255)<<5|(t[18]&254)>>>3;i.dts*=4;i.dts+=(t[18]&6)>>>1}}i.data=t.subarray(9+t[8])},o=function e(i,r,n){var a=new Uint8Array(i.size),o={type:r},u=0,l=0,c=false,f;if(!i.data.length||i.size<9){return}o.trackId=i.data[0].pid;for(u=0;u<i.data.length;u++){f=i.data[u];a.set(f.data,l);l+=f.data.byteLength}s(a,o);c=r==="video"||o.packetLength<=i.size;if(n||c){i.size=0;i.data.length=0}if(c){t.trigger("data",o)}};tt.prototype.init.call(this);this.push=function(e){({pat:function e(){},pes:function t(){var a,s;switch(e.streamType){case Be.H264_STREAM_TYPE:case Be.H264_STREAM_TYPE:a=i;s="video";break;case Be.ADTS_STREAM_TYPE:a=r;s="audio";break;case Be.METADATA_STREAM_TYPE:a=n;s="timed-metadata";break;default:return}if(e.payloadUnitStartIndicator){o(a,s,true)}a.data.push(e);a.size+=e.data.byteLength},pmt:function i(){var r={type:"metadata",tracks:[]};a=e.programMapTable;if(a.video!==null){r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"})}if(a.audio!==null){r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"})}t.trigger("data",r)}})[e.type]()};this.reset=function(){i.size=0;i.data.length=0;r.size=0;r.data.length=0;this.trigger("reset")};this.flushStreams_=function(){o(i,"video");o(r,"audio");o(n,"timed-metadata")};this.flush=function(){this.flushStreams_();this.trigger("done")}};tt.prototype=new t;var nt={PAT_PID:0,MP2T_PACKET_LENGTH:it,TransportPacketStream:Ze,TransportParseStream:et,ElementaryStream:tt,TimestampRolloverStream:Je,CaptionStream:Me.CaptionStream,Cea608Stream:Me.Cea608Stream,MetadataStream:Qe};for(var at in Be){if(Be.hasOwnProperty(at)){nt[at]=Be[at]}}var st=nt;var ot=fe.ONE_SECOND_IN_TS;var ut;var lt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ut=function e(t){var i,r=0;ut.prototype.init.call(this);this.push=function(e){var n=0,a,s,o,u,l,c;if(!t){r=0}if(e.type!=="audio"){return}if(i){u=i;i=new Uint8Array(u.byteLength+e.data.byteLength);i.set(u);i.set(e.data,u.byteLength)}else{i=e.data}while(n+5<i.length){if(i[n]!==255||(i[n+1]&246)!==240){n++;continue}s=(~i[n+1]&1)*2;a=(i[n+3]&3)<<11|i[n+4]<<3|(i[n+5]&224)>>5;l=((i[n+6]&3)+1)*1024;c=l*ot/lt[(i[n+2]&60)>>>2];o=n+a;if(i.byteLength<o){return}this.trigger("data",{pts:e.pts+r*c,dts:e.dts+r*c,sampleCount:l,audioobjecttype:(i[n+2]>>>6&3)+1,channelcount:(i[n+2]&1)<<2|(i[n+3]&192)>>>6,samplerate:lt[(i[n+2]&60)>>>2],samplingfrequencyindex:(i[n+2]&60)>>>2,samplesize:16,data:i.subarray(n+7+s,o)});r++;if(i.byteLength===o){i=undefined;return}i=i.subarray(o)}};this.flush=function(){r=0;this.trigger("done")};this.reset=function(){i=void 0;this.trigger("reset")};this.endTimeline=function(){i=void 0;this.trigger("endedtimeline")}};ut.prototype=new t;var ct=ut;var ft;ft=function e(t){var i=t.byteLength,r=0,n=0;this.length=function(){return 8*i};this.bitsAvailable=function(){return 8*i+n};this.loadWord=function(){var e=t.byteLength-i,a=new Uint8Array(4),s=Math.min(4,i);if(s===0){throw new Error("no bytes available")}a.set(t.subarray(e,e+s));r=new DataView(a.buffer).getUint32(0);n=s*8;i-=s};this.skipBits=function(e){var t;if(n>e){r<<=e;n-=e}else{e-=n;t=Math.floor(e/8);e-=t*8;i-=t;this.loadWord();r<<=e;n-=e}};this.readBits=function(e){var t=Math.min(n,e),a=r>>>32-t;n-=t;if(n>0){r<<=t}else if(i>0){this.loadWord()}t=e-t;if(t>0){return a<<t|this.readBits(t)}return a};this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e){if((r&2147483648>>>e)!==0){r<<=e;n-=e;return e}}this.loadWord();return e+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1};this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();if(1&e){return 1+e>>>1}return-1*(e>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var ht=ft;var dt,pt;var vt;pt=function e(){var t=0,i,r;pt.prototype.init.call(this);this.push=function(e){var n;if(!r){r=e.data}else{n=new Uint8Array(r.byteLength+e.data.byteLength);n.set(r);n.set(e.data,r.byteLength);r=n}var a=r.byteLength;for(;t<a-3;t++){if(r[t+2]===1){i=t+5;break}}while(i<a){switch(r[i]){case 0:if(r[i-1]!==0){i+=2;break}else if(r[i-2]!==0){i++;break}if(t+3!==i-2){this.trigger("data",r.subarray(t+3,i-2))}do{i++}while(r[i]!==1&&i<a);t=i-2;i+=3;break;case 1:if(r[i-1]!==0||r[i-2]!==0){i+=3;break}this.trigger("data",r.subarray(t+3,i-2));t=i-2;i+=3;break;default:i+=3;break}}r=r.subarray(t);i-=t;t=0};this.reset=function(){r=null;t=0;this.trigger("reset")};this.flush=function(){if(r&&r.byteLength>3){this.trigger("data",r.subarray(t+3))}r=null;t=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};pt.prototype=new t;vt={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};dt=function e(){var t=new pt,i,r,n,a,s,o,u;dt.prototype.init.call(this);i=this;this.push=function(e){if(e.type!=="video"){return}r=e.trackId;n=e.pts;a=e.dts;t.push(e)};t.on("data",(function(e){var t={trackId:r,pts:n,dts:a,data:e};switch(e[0]&31){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp";t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp";t.escapedRBSP=s(e.subarray(1));t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp";break}i.trigger("data",t)}));t.on("done",(function(){i.trigger("done")}));t.on("partialdone",(function(){i.trigger("partialdone")}));t.on("reset",(function(){i.trigger("reset")}));t.on("endedtimeline",(function(){i.trigger("endedtimeline")}));this.flush=function(){t.flush()};this.partialFlush=function(){t.partialFlush()};this.reset=function(){t.reset()};this.endTimeline=function(){t.endTimeline()};u=function e(t,i){var r=8,n=8,a,s;for(a=0;a<t;a++){if(n!==0){s=i.readExpGolomb();n=(r+s+256)%256}r=n===0?r:n}};s=function e(t){var i=t.byteLength,r=[],n=1,a,s;while(n<i-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return t}a=i-r.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===r[0]){o++;r.shift()}s[n]=t[o]}return s};o=function e(t){var i=0,r=0,n=0,a=0,s=1,o,l,c,f,h,d,p,v,m,g,y,_,b,T;o=new ht(t);l=o.readUnsignedByte();f=o.readUnsignedByte();c=o.readUnsignedByte();o.skipUnsignedExpGolomb();if(vt[l]){h=o.readUnsignedExpGolomb();if(h===3){o.skipBits(1)}o.skipUnsignedExpGolomb();o.skipUnsignedExpGolomb();o.skipBits(1);if(o.readBoolean()){y=h!==3?8:12;for(T=0;T<y;T++){if(o.readBoolean()){if(T<6){u(16,o)}else{u(64,o)}}}}}o.skipUnsignedExpGolomb();d=o.readUnsignedExpGolomb();if(d===0){o.readUnsignedExpGolomb()}else if(d===1){o.skipBits(1);o.skipExpGolomb();o.skipExpGolomb();p=o.readUnsignedExpGolomb();for(T=0;T<p;T++){o.skipExpGolomb()}}o.skipUnsignedExpGolomb();o.skipBits(1);v=o.readUnsignedExpGolomb();m=o.readUnsignedExpGolomb();g=o.readBits(1);if(g===0){o.skipBits(1)}o.skipBits(1);if(o.readBoolean()){i=o.readUnsignedExpGolomb();r=o.readUnsignedExpGolomb();n=o.readUnsignedExpGolomb();a=o.readUnsignedExpGolomb()}if(o.readBoolean()){if(o.readBoolean()){b=o.readUnsignedByte();switch(b){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:{_=[o.readUnsignedByte()<<8|o.readUnsignedByte(),o.readUnsignedByte()<<8|o.readUnsignedByte()];break}}if(_){s=_[0]/_[1]}}}return{profileIdc:l,levelIdc:c,profileCompatibility:f,width:Math.ceil(((v+1)*16-i*2-r*2)*s),height:(2-g)*(m+1)*16-n*2-a*2,sarRatio:_}}};dt.prototype=new t;var mt={H264Stream:dt,NalByteStream:pt};var gt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var yt=function e(t){if(t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)){return true}return false};var _t=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]};var bt=function e(t,i,r){var n,a="";for(n=i;n<r;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a};var Tt=function e(t,i,r){return unescape(bt(t,i,r))};var St=function e(t,i){var r=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9],n=t[i+5],a=(n&16)>>4;if(a){return r+20}return r+10};var kt=function e(t,i){var r=(t[i+5]&224)>>5,n=t[i+4]<<3,a=t[i+3]&3<<11;return a|n|r};var wt=function e(t,i){if(t[i]==="I".charCodeAt(0)&&t[i+1]==="D".charCodeAt(0)&&t[i+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(t[i]&255===255&&(t[i+1]&240)===240){return"audio"}return null};var Ct=function e(t){var i=0;while(i+5<t.length){if(t[i]!==255||(t[i+1]&246)!==240){i++;continue}return gt[(t[i+2]&60)>>>2]}return null};var Et=function e(t){var i,r,n,a;i=10;if(t[5]&64){i+=4;i+=_t(t.subarray(10,14))}do{r=_t(t.subarray(i+4,i+8));if(r<1){return null}a=String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3]);if(a==="PRIV"){n=t.subarray(i+10,i+r+10);for(var s=0;s<n.byteLength;s++){if(n[s]===0){var o=Tt(n,0,s);if(o==="com.apple.streaming.transportStreamTimestamp"){var u=n.subarray(s+1);var l=(u[3]&1)<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;l*=4;l+=u[7]&3;return l}break}}}i+=10;i+=r}while(i<t.byteLength);return null};var It={isLikelyAacData:yt,parseId3TagSize:St,parseAdtsSize:kt,parseType:wt,parseSampleRate:Ct,parseAacTimestamp:Et};var At;At=function e(){var t=new Uint8Array,i=0;At.prototype.init.call(this);this.setTimestamp=function(e){i=e};this.push=function(e){var r=0,n=0,a,s,o,u;if(t.length){u=t.length;t=new Uint8Array(e.byteLength+u);t.set(t.subarray(0,u));t.set(e,u)}else{t=e}while(t.length-n>=3){if(t[n]==="I".charCodeAt(0)&&t[n+1]==="D".charCodeAt(0)&&t[n+2]==="3".charCodeAt(0)){if(t.length-n<10){break}r=It.parseId3TagSize(t,n);if(n+r>t.length){break}s={type:"timed-metadata",data:t.subarray(n,n+r)};this.trigger("data",s);n+=r;continue}else if((t[n]&255)===255&&(t[n+1]&240)===240){if(t.length-n<7){break}r=It.parseAdtsSize(t,n);if(n+r>t.length){break}o={type:"audio",data:t.subarray(n,n+r),pts:i,dts:i};this.trigger("data",o);n+=r;continue}n++}a=t.length-n;if(a>0){t=t.subarray(n)}else{t=new Uint8Array}};this.reset=function(){t=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){t=new Uint8Array;this.trigger("endedtimeline")}};At.prototype=new t;var xt=At;var Pt=mt.H264Stream;var Lt=It.isLikelyAacData;var Dt=fe.ONE_SECOND_IN_TS;var Ot=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var Nt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];var Rt,Ut,Mt,Bt;var jt=function e(t,i){var r;if(t.length!==i.length){return false}for(r=0;r<t.length;r++){if(t[r]!==i[r]){return false}}return true};var Ft=function e(t,i,r,n,a,s){var o=r-i,u=n-i,l=a-r;return{start:{dts:t,pts:t+o},end:{dts:t+u,pts:t+l},prependedContentDuration:s,baseMediaDecodeTime:t}};Ut=function e(t,i){var r=[],n=0,a=0,s=0,o=Infinity;i=i||{};Ut.prototype.init.call(this);this.push=function(e){Se.collectDtsInfo(t,e);if(t){Ot.forEach((function(i){t[i]=e[i]}))}r.push(e)};this.setEarliestDts=function(e){a=e-t.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(e){o=e};this.setAudioAppendStart=function(e){s=e};this.flush=function(){var e,u,l,c,f;if(r.length===0){this.trigger("done","AudioSegmentStream");return}e=ge.trimAdtsFramesByEarliestDts(r,t,a);t.baseMediaDecodeTime=Se.calculateTrackBaseMediaDecodeTime(t,i.keepOriginalTimestamps);ge.prefixWithSilence(t,e,s,o);t.samples=ge.generateSampleTable(e);l=F.mdat(ge.concatenateFrameData(e));r=[];u=F.moof(n,[t]);c=new Uint8Array(u.byteLength+l.byteLength);n++;c.set(u);c.set(l,u.byteLength);Se.clearDtsInfo(t);f=Math.ceil(Dt*1024/t.samplerate);if(e.length){this.trigger("timingInfo",{start:e[0].pts,end:e[0].pts+e.length*f})}this.trigger("data",{track:t,boxes:c});this.trigger("done","AudioSegmentStream")};this.reset=function(){Se.clearDtsInfo(t);r=[];this.trigger("reset")}};Ut.prototype=new t;Rt=function e(t,i){var r=0,n=[],a=[],s,o;i=i||{};Rt.prototype.init.call(this);delete t.minPTS;this.gopCache_=[];this.push=function(e){Se.collectDtsInfo(t,e);if(e.nalUnitType==="seq_parameter_set_rbsp"&&!s){s=e.config;t.sps=[e.data];Nt.forEach((function(e){t[e]=s[e]}),this)}if(e.nalUnitType==="pic_parameter_set_rbsp"&&!o){o=e.data;t.pps=[e.data]}n.push(e)};this.flush=function(){var e,s,o,u,l,c,f=0,h,d;while(n.length){if(n[0].nalUnitType==="access_unit_delimiter_rbsp"){break}n.shift()}if(n.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}e=$.groupNalsIntoFrames(n);o=$.groupFramesIntoGops(e);if(!o[0][0].keyFrame){s=this.getGopForFusion_(n[0],t);if(s){f=s.duration;o.unshift(s);o.byteLength+=s.byteLength;o.nalCount+=s.nalCount;o.pts=s.pts;o.dts=s.dts;o.duration+=s.duration}else{o=$.extendFirstKeyFrame(o)}}if(a.length){var p;if(i.alignGopsAtEnd){p=this.alignGopsAtEnd_(o)}else{p=this.alignGopsAtStart_(o)}if(!p){this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);n=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}Se.clearDtsInfo(t);o=p}Se.collectDtsInfo(t,o);t.samples=$.generateSampleTable(o);l=F.mdat($.concatenateNalData(o));t.baseMediaDecodeTime=Se.calculateTrackBaseMediaDecodeTime(t,i.keepOriginalTimestamps);this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})));h=o[0];d=o[o.length-1];this.trigger("segmentTimingInfo",Ft(t.baseMediaDecodeTime,h.dts,h.pts,d.dts+d.duration,d.pts+d.duration,f));this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration});this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);n=[];this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime);this.trigger("timelineStartInfo",t.timelineStartInfo);u=F.moof(r,[t]);c=new Uint8Array(u.byteLength+l.byteLength);r++;c.set(u);c.set(l,u.byteLength);this.trigger("data",{track:t,boxes:c});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();n=[];this.gopCache_.length=0;a.length=0;this.trigger("reset")};this.resetStream_=function(){Se.clearDtsInfo(t);s=undefined;o=undefined};this.getGopForFusion_=function(e){var i=45e3,r=1e4,n=Infinity,a,s,o,u,l;for(l=0;l<this.gopCache_.length;l++){u=this.gopCache_[l];o=u.gop;if(!(t.pps&&jt(t.pps[0],u.pps[0]))||!(t.sps&&jt(t.sps[0],u.sps[0]))){continue}if(o.dts<t.timelineStartInfo.dts){continue}a=e.dts-o.dts-o.duration;if(a>=-r&&a<=i){if(!s||n>a){s=u;n=a}}}if(s){return s.gop}return null};this.alignGopsAtStart_=function(e){var t,i,r,n,s,o,u,l;s=e.byteLength;o=e.nalCount;u=e.duration;t=i=0;while(t<a.length&&i<e.length){r=a[t];n=e[i];if(r.pts===n.pts){break}if(n.pts>r.pts){t++;continue}i++;s-=n.byteLength;o-=n.nalCount;u-=n.duration}if(i===0){return e}if(i===e.length){return null}l=e.slice(i);l.byteLength=s;l.duration=u;l.nalCount=o;l.pts=l[0].pts;l.dts=l[0].dts;return l};this.alignGopsAtEnd_=function(e){var t,i,r,n,s,o;t=a.length-1;i=e.length-1;s=null;o=false;while(t>=0&&i>=0){r=a[t];n=e[i];if(r.pts===n.pts){o=true;break}if(r.pts>n.pts){t--;continue}if(t===a.length-1){s=i}i--}if(!o&&s===null){return null}var u;if(o){u=i}else{u=s}if(u===0){return e}var l=e.slice(u);var c=l.reduce((function(e,t){e.byteLength+=t.byteLength;e.duration+=t.duration;e.nalCount+=t.nalCount;return e}),{byteLength:0,duration:0,nalCount:0});l.byteLength=c.byteLength;l.duration=c.duration;l.nalCount=c.nalCount;l.pts=l[0].pts;l.dts=l[0].dts;return l};this.alignGopsWith=function(e){a=e}};Rt.prototype=new t;Bt=function e(t,i){this.numberOfTracks=0;this.metadataStream=i;t=t||{};if(typeof t.remux!=="undefined"){this.remuxTracks=!!t.remux}else{this.remuxTracks=true}if(typeof t.keepOriginalTimestamps==="boolean"){this.keepOriginalTimestamps=t.keepOriginalTimestamps}else{this.keepOriginalTimestamps=false}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;Bt.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}this.pendingTracks.push(e.track);this.pendingBytes+=e.boxes.byteLength;if(e.track.type==="video"){this.videoTrack=e.track;this.pendingBoxes.push(e.boxes)}if(e.track.type==="audio"){this.audioTrack=e.track;this.pendingBoxes.unshift(e.boxes)}}};Bt.prototype=new t;Bt.prototype.flush=function(e){var t=0,i={captions:[],captionStreams:{},metadata:[],info:{}},r,n,a,s=0,o;if(this.pendingTracks.length<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){s=this.videoTrack.timelineStartInfo.pts;Nt.forEach((function(e){i.info[e]=this.videoTrack[e]}),this)}else if(this.audioTrack){s=this.audioTrack.timelineStartInfo.pts;Ot.forEach((function(e){i.info[e]=this.audioTrack[e]}),this)}if(this.videoTrack||this.audioTrack){if(this.pendingTracks.length===1){i.type=this.pendingTracks[0].type}else{i.type="combined"}this.emittedTracks+=this.pendingTracks.length;a=F.initSegment(this.pendingTracks);i.initSegment=new Uint8Array(a.byteLength);i.initSegment.set(a);i.data=new Uint8Array(this.pendingBytes);for(o=0;o<this.pendingBoxes.length;o++){i.data.set(this.pendingBoxes[o],t);t+=this.pendingBoxes[o].byteLength}for(o=0;o<this.pendingCaptions.length;o++){r=this.pendingCaptions[o];r.startTime=fe.metadataTsToSeconds(r.startPts,s,this.keepOriginalTimestamps);r.endTime=fe.metadataTsToSeconds(r.endPts,s,this.keepOriginalTimestamps);i.captionStreams[r.stream]=true;i.captions.push(r)}for(o=0;o<this.pendingMetadata.length;o++){n=this.pendingMetadata[o];n.cueTime=fe.metadataTsToSeconds(n.pts,s,this.keepOriginalTimestamps);i.metadata.push(n)}i.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",i);for(o=0;o<i.captions.length;o++){r=i.captions[o];this.trigger("caption",r)}for(o=0;o<i.metadata.length;o++){n=i.metadata[o];this.trigger("id3Frame",n)}}if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};Bt.prototype.setRemux=function(e){this.remuxTracks=e};Mt=function e(t){var i=this,r=true,n,a;Mt.prototype.init.call(this);t=t||{};this.baseMediaDecodeTime=t.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e;e.type="aac";e.metadataStream=new st.MetadataStream;e.aacStream=new xt;e.audioTimestampRolloverStream=new st.TimestampRolloverStream("audio");e.timedMetadataTimestampRolloverStream=new st.TimestampRolloverStream("timed-metadata");e.adtsStream=new ct;e.coalesceStream=new Bt(t,e.metadataStream);e.headOfPipeline=e.aacStream;e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream);e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream);e.metadataStream.on("timestamp",(function(t){e.aacStream.setTimestamp(t.timeStamp)}));e.aacStream.on("data",(function(r){if(r.type==="timed-metadata"&&!e.audioSegmentStream){a=a||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"};e.coalesceStream.numberOfTracks++;e.audioSegmentStream=new Ut(a,t);e.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo"));e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)}i.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!n})}));e.coalesceStream.on("data",this.trigger.bind(this,"data"));e.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e;e.type="ts";e.metadataStream=new st.MetadataStream;e.packetStream=new st.TransportPacketStream;e.parseStream=new st.TransportParseStream;e.elementaryStream=new st.ElementaryStream;e.timestampRolloverStream=new st.TimestampRolloverStream;e.adtsStream=new ct;e.h264Stream=new Pt;e.captionStream=new st.CaptionStream;e.coalesceStream=new Bt(t,e.metadataStream);e.headOfPipeline=e.packetStream;e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream).pipe(e.timestampRolloverStream);e.timestampRolloverStream.pipe(e.h264Stream);e.timestampRolloverStream.pipe(e.adtsStream);e.timestampRolloverStream.pipe(e.metadataStream).pipe(e.coalesceStream);e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream);e.elementaryStream.on("data",(function(r){var s;if(r.type==="metadata"){s=r.tracks.length;while(s--){if(!n&&r.tracks[s].type==="video"){n=r.tracks[s];n.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime}else if(!a&&r.tracks[s].type==="audio"){a=r.tracks[s];a.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime}}if(n&&!e.videoSegmentStream){e.coalesceStream.numberOfTracks++;e.videoSegmentStream=new Rt(n,t);e.videoSegmentStream.on("timelineStartInfo",(function(t){if(a){a.timelineStartInfo=t;e.audioSegmentStream.setEarliestDts(t.dts)}}));e.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo"));e.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo"));e.videoSegmentStream.on("baseMediaDecodeTime",(function(t){if(a){e.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}}));e.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo"));e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)}if(a&&!e.audioSegmentStream){e.coalesceStream.numberOfTracks++;e.audioSegmentStream=new Ut(a,t);e.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo"));e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)}i.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!n})}}));e.coalesceStream.on("data",this.trigger.bind(this,"data"));e.coalesceStream.on("id3Frame",(function(t){t.dispatchType=e.metadataStream.dispatchType;i.trigger("id3Frame",t)}));e.coalesceStream.on("caption",this.trigger.bind(this,"caption"));e.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(e){var i=this.transmuxPipeline_;if(!t.keepOriginalTimestamps){this.baseMediaDecodeTime=e}if(a){a.timelineStartInfo.dts=undefined;a.timelineStartInfo.pts=undefined;Se.clearDtsInfo(a);if(!t.keepOriginalTimestamps){a.timelineStartInfo.baseMediaDecodeTime=e}if(i.audioTimestampRolloverStream){i.audioTimestampRolloverStream.discontinuity()}}if(n){if(i.videoSegmentStream){i.videoSegmentStream.gopCache_=[]}n.timelineStartInfo.dts=undefined;n.timelineStartInfo.pts=undefined;Se.clearDtsInfo(n);i.captionStream.reset();if(!t.keepOriginalTimestamps){n.timelineStartInfo.baseMediaDecodeTime=e}}if(i.timestampRolloverStream){i.timestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(e){if(a){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)}};this.setRemux=function(e){var i=this.transmuxPipeline_;t.remux=e;if(i&&i.coalesceStream){i.coalesceStream.setRemux(e)}};this.alignGopsWith=function(e){if(n&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)}};this.push=function(e){if(r){var t=Lt(e);if(t&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!t&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}r=false}this.transmuxPipeline_.headOfPipeline.push(e)};this.flush=function(){r=true;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){if(this.transmuxPipeline_.headOfPipeline){this.transmuxPipeline_.headOfPipeline.reset()}};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};Mt.prototype=new t;var Ht={Transmuxer:Mt,VideoSegmentStream:Rt,AudioSegmentStream:Ut,AUDIO_PROPERTIES:Ot,VIDEO_PROPERTIES:Nt,generateVideoSegmentTimingInfo:Ft};var Vt=function e(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}};var qt=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var Wt=function e(t,i){i.on("data",(function(e){var i=e.initSegment;e.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var r=e.data;e.data=r.buffer;t.postMessage({action:"data",segment:e,byteOffset:r.byteOffset,byteLength:r.byteLength},[e.data])}));if(i.captionStream){i.captionStream.on("data",(function(e){t.postMessage({action:"caption",data:e})}))}i.on("done",(function(e){t.postMessage({action:"done"})}));i.on("gopInfo",(function(e){t.postMessage({action:"gopInfo",gopInfo:e})}));i.on("videoSegmentTimingInfo",(function(e){t.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:e})}))};var zt=function(){function e(t,i){Vt(this,e);this.options=i||{};this.self=t;this.init()}qt(e,[{key:"init",value:function e(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new Ht.Transmuxer(this.options);Wt(this.self,this.transmuxer)}},{key:"push",value:function e(t){var i=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(i)}},{key:"reset",value:function e(){this.init()}},{key:"setTimestampOffset",value:function e(t){var i=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(i*9e4))}},{key:"setAudioAppendStart",value:function e(t){this.transmuxer.setAudioAppendStart(Math.ceil(t.appendStart*9e4))}},{key:"flush",value:function e(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function e(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function e(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]);return e}();var Gt=function e(t){t.onmessage=function(e){if(e.data.action==="init"&&e.data.options){this.messageHandlers=new zt(t,e.data.options);return}if(!this.messageHandlers){this.messageHandlers=new zt(t)}if(e.data&&e.data.action&&e.data.action!=="init"){if(this.messageHandlers[e.data.action]){this.messageHandlers[e.data.action](e.data)}}}};var Xt=new Gt(i);return Xt}()}));var $u={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"};var Qu=function e(t){return t.map((function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,i){var r=("00"+Number(t).toString(16)).slice(-2);var n=("00"+Number(i).toString(16)).slice(-2);return"avc1."+r+"00"+n}))}))};var Ju=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var i={codecCount:0};var r=void 0;i.codecCount=t.split(",").length;i.codecCount=i.codecCount||2;r=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t);if(r){i.videoCodec=r[2];i.videoObjectTypeIndicator=r[3]}i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t);i.audioProfile=i.audioProfile&&i.audioProfile[2];return i};var Zu=function e(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return Qu([e])[0]}))};var el=function e(t,i,r){return t+"/"+i+'; codecs="'+r.filter((function(e){return!!e})).join(", ")+'"'};var tl=function e(t){if(t.segments&&t.segments.length&&t.segments[0].map){return"mp4"}return"mp2t"};var il=function e(t){var i=t.attributes||{};if(i.CODECS){return Ju(i.CODECS)}return $u};var rl=function e(t,i){if(!t.mediaGroups.AUDIO||!i){return null}var r=t.mediaGroups.AUDIO[i];if(!r){return null}for(var n in r){var a=r[n];if(a["default"]&&a.playlists){return Ju(a.playlists[0].attributes.CODECS).audioProfile}}return null};var nl=function e(t,i){var r=tl(i);var n=il(i);var a=i.attributes||{};var s=true;var o=false;if(!i){return[]}if(t.mediaGroups.AUDIO&&a.AUDIO){var u=t.mediaGroups.AUDIO[a.AUDIO];if(u){o=true;s=false;for(var l in u){if(!u[l].uri&&!u[l].playlists){s=true;break}}}}if(o&&!n.audioProfile){if(!s){n.audioProfile=rl(t,a.AUDIO)}if(!n.audioProfile){ao.log.warn("Multiple audio tracks present but no audio codec string is specified. "+"Attempting to use the default audio codec (mp4a.40.2)");n.audioProfile=$u.audioProfile}}var c={};if(n.videoCodec){c.video=""+n.videoCodec+n.videoObjectTypeIndicator}if(n.audioProfile){c.audio="mp4a.40."+n.audioProfile}var f=el("audio",r,[c.audio]);var h=el("video",r,[c.video]);var d=el("video",r,[c.video,c.audio]);if(o){if(!s&&c.video){return[h,f]}if(!s&&!c.video){return[f,f]}return[d,f]}if(!c.video){return[f]}return[d]};var al=function e(t){var i={type:"",parameters:{}};var r=t.trim().split(";");i.type=r.shift().trim();r.forEach((function(e){var t=e.trim().split("=");if(t.length>1){var r=t[0].replace(/"/g,"").trim();var n=t[1].replace(/"/g,"").trim();i.parameters[r]=n}}));return i};var sl=function e(t){return/mp4a\.\d+.\d+/i.test(t)};var ol=function e(t){return/avc1\.[\da-f]+/i.test(t)};var ul=function e(t,i,r){if(typeof i==="undefined"||i===null||!t.length){return[]}var n=Math.ceil((i-r+3)*9e4);var a=void 0;for(a=0;a<t.length;a++){if(t[a].pts>n){break}}return t.slice(a)};var ll=function e(t,i,r){if(!i.length){return t}if(r){return i.slice()}var n=i[0].pts;var a=0;for(a;a<t.length;a++){if(t[a].pts>=n){break}}return t.slice(0,a).concat(i)};var cl=function e(t,i,r,n){var a=Math.ceil((i-n)*9e4);var s=Math.ceil((r-n)*9e4);var o=t.slice();var u=t.length;while(u--){if(t[u].pts<=s){break}}if(u===-1){return o}var l=u+1;while(l--){if(t[l].pts<=a){break}}l=Math.max(l,0);o.splice(l,u-l+1);return o};var fl=function e(t,i,r){var n=null;var a=null;var s=0;var o=[];var u=[];if(!t&&!i){return ao.createTimeRange()}if(!t){return i.buffered}if(!i){return t.buffered}if(r){return t.buffered}if(t.buffered.length===0&&i.buffered.length===0){return ao.createTimeRange()}var l=t.buffered;var c=i.buffered;var f=l.length;while(f--){o.push({time:l.start(f),type:"start"});o.push({time:l.end(f),type:"end"})}f=c.length;while(f--){o.push({time:c.start(f),type:"start"});o.push({time:c.end(f),type:"end"})}o.sort((function(e,t){return e.time-t.time}));for(f=0;f<o.length;f++){if(o[f].type==="start"){s++;if(s===2){n=o[f].time}}else if(o[f].type==="end"){s--;if(s===1){a=o[f].time}}if(n!==null&&a!==null){u.push([n,a]);n=null;a=null}}return ao.createTimeRanges(u)};var hl=9e4;var dl=function e(t,i){var r=t.addSourceBuffer(i);var n=Object.create(null);n.updating=false;n.realBuffer_=r;var a=function e(t){if(typeof r[t]==="function"){n[t]=function(){return r[t].apply(r,arguments)}}else if(typeof n[t]==="undefined"){Object.defineProperty(n,t,{get:function e(){return r[t]},set:function e(i){return r[t]=i}})}};for(var s in r){a(s)}return n};var pl=function(e){po(t,e);function t(e,i){co(this,t);var r=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ao.EventTarget));r.timestampOffset_=0;r.pendingBuffers_=[];r.bufferUpdating_=false;r.mediaSource_=e;r.codecs_=i;r.audioCodec_=null;r.videoCodec_=null;r.audioDisabled_=false;r.appendAudioInitSegment_=true;r.gopBuffer_=[];r.timeMapping_=0;r.safeAppend_=ao.browser.IE_VERSION>=11;var n={remux:false,alignGopsAtEnd:r.safeAppend_};r.codecs_.forEach((function(e){if(sl(e)){r.audioCodec_=e}else if(ol(e)){r.videoCodec_=e}}));r.transmuxer_=new Yu;r.transmuxer_.postMessage({action:"init",options:n});r.transmuxer_.onmessage=function(e){if(e.data.action==="data"){return r.data_(e)}if(e.data.action==="done"){return r.done_(e)}if(e.data.action==="gopInfo"){return r.appendGopInfo_(e)}if(e.data.action==="videoSegmentTimingInfo"){return r.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo)}};Object.defineProperty(r,"timestampOffset",{get:function e(){return this.timestampOffset_},set:function e(t){if(typeof t==="number"&&t>=0){this.timestampOffset_=t;this.appendAudioInitSegment_=true;this.gopBuffer_.length=0;this.timeMapping_=0;this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t})}}});Object.defineProperty(r,"appendWindowStart",{get:function e(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function e(t){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=t}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=t}}});Object.defineProperty(r,"updating",{get:function e(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(r,"buffered",{get:function e(){return fl(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return r}fo(t,[{key:"data_",value:function e(t){var i=t.data.segment;i.data=new Uint8Array(i.data,t.data.byteOffset,t.data.byteLength);i.initSegment=new Uint8Array(i.initSegment.data,i.initSegment.byteOffset,i.initSegment.byteLength);Du(this,this.mediaSource_,i);this.pendingBuffers_.push(i);return}},{key:"done_",value:function e(t){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"videoSegmentTimingInfo_",value:function e(t){var i={start:{decode:t.start.dts/hl,presentation:t.start.pts/hl},end:{decode:t.end.dts/hl,presentation:t.end.pts/hl},baseMediaDecodeTime:t.baseMediaDecodeTime/hl};if(t.prependedContentDuration){i.prependedContentDuration=t.prependedContentDuration/hl}this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})}},{key:"createRealSourceBuffers_",value:function e(){var t=this;var i=["audio","video"];i.forEach((function(e){if(!t[e+"Codec_"]){return}if(t[e+"Buffer_"]){return}var r=null;if(t.mediaSource_[e+"Buffer_"]){r=t.mediaSource_[e+"Buffer_"];r.updating=false}else{var n=e+"Codec_";var a=e+'/mp4;codecs="'+t[n]+'"';r=dl(t.mediaSource_.nativeMediaSource_,a);t.mediaSource_[e+"Buffer_"]=r}t[e+"Buffer_"]=r;["update","updatestart","updateend"].forEach((function(n){r.addEventListener(n,(function(){if(e==="audio"&&t.audioDisabled_){return}if(n==="updateend"){t[e+"Buffer_"].updating=false}var r=i.every((function(i){if(i==="audio"&&t.audioDisabled_){return true}if(e!==i&&t[i+"Buffer_"]&&t[i+"Buffer_"].updating){return false}return true}));if(r){return t.trigger(n)}}))}))}))}},{key:"appendBuffer",value:function e(t){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var i=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:i.end(i.length-1)})}if(this.videoBuffer_){this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:ul(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)})}this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function e(t){this.gopBuffer_=ll(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function e(t,i){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(t,i);this.gopBuffer_=cl(this.gopBuffer_,t,i,this.timeMapping_)}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(t,i)}Ou(t,i,this.metadataTrack_);if(this.inbandTextTracks_){for(var r in this.inbandTextTracks_){Ou(t,i,this.inbandTextTracks_[r])}}}},{key:"processPendingSegments_",value:function e(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length){this.trigger("updateend");this.bufferUpdating_=false;return}t=this.pendingBuffers_.reduce((function(e,t){var i=t.type;var r=t.data;var n=t.initSegment;e[i].segments.push(r);e[i].bytes+=r.byteLength;e[i].initSegment=n;if(t.captions){e.captions=e.captions.concat(t.captions)}if(t.info){e[i].info=t.info}if(t.metadata){e.metadata=e.metadata.concat(t.metadata)}return e}),t);if(!this.videoBuffer_&&!this.audioBuffer_){if(t.video.bytes===0){this.videoCodec_=null}if(t.audio.bytes===0){this.audioCodec_=null}this.createRealSourceBuffers_()}if(t.audio.info){this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info})}if(t.video.info){this.mediaSource_.trigger({type:"videoinfo",info:t.video.info})}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){t.audio.segments.unshift(t.audio.initSegment);t.audio.bytes+=t.audio.initSegment.byteLength}this.appendAudioInitSegment_=false}var i=false;if(this.videoBuffer_&&t.video.bytes){t.video.segments.unshift(t.video.initSegment);t.video.bytes+=t.video.initSegment.byteLength;this.concatAndAppendSegments_(t.video,this.videoBuffer_)}else if(this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)){i=true}Uu(this,t.captions,t.metadata);if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(t.audio,this.audioBuffer_)}this.pendingBuffers_.length=0;if(i){this.trigger("updateend")}this.bufferUpdating_=false}},{key:"concatAndAppendSegments_",value:function e(t,i){var r=0;var n=void 0;if(t.bytes){n=new Uint8Array(t.bytes);t.segments.forEach((function(e){n.set(e,r);r+=e.byteLength}));try{i.updating=true;i.appendBuffer(n)}catch(e){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}}},{key:"abort",value:function e(){if(this.videoBuffer_){this.videoBuffer_.abort()}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort()}if(this.transmuxer_){this.transmuxer_.postMessage({action:"reset"})}this.pendingBuffers_.length=0;this.bufferUpdating_=false}},{key:"dispose",value:function e(){if(this.transmuxer_){this.transmuxer_.terminate()}this.trigger("dispose");this.off()}}]);return t}(ao.EventTarget);var vl=function(e){po(t,e);function t(){co(this,t);var e=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var i=void 0;e.nativeMediaSource_=new n.a.MediaSource;for(i in e.nativeMediaSource_){if(!(i in t.prototype)&&typeof e.nativeMediaSource_[i]==="function"){e[i]=e.nativeMediaSource_[i].bind(e.nativeMediaSource_)}}e.duration_=NaN;Object.defineProperty(e,"duration",{get:function e(){if(this.duration_===Infinity){return this.duration_}return this.nativeMediaSource_.duration},set:function e(t){this.duration_=t;if(t!==Infinity){this.nativeMediaSource_.duration=t;return}}});Object.defineProperty(e,"seekable",{get:function e(){if(this.duration_===Infinity){return ao.createTimeRanges([[0,this.nativeMediaSource_.duration]])}return this.nativeMediaSource_.seekable}});Object.defineProperty(e,"readyState",{get:function e(){return this.nativeMediaSource_.readyState}});Object.defineProperty(e,"activeSourceBuffers",{get:function e(){return this.activeSourceBuffers_}});e.sourceBuffers=[];e.activeSourceBuffers_=[];e.updateActiveSourceBuffers_=function(){e.activeSourceBuffers_.length=0;if(e.sourceBuffers.length===1){var t=e.sourceBuffers[0];t.appendAudioInitSegment_=true;t.audioDisabled_=!t.audioCodec_;e.activeSourceBuffers_.push(t);return}var i=false;var r=true;for(var n=0;n<e.player_.audioTracks().length;n++){var a=e.player_.audioTracks()[n];if(a.enabled&&a.kind!=="main"){i=true;r=false;break}}e.sourceBuffers.forEach((function(t,n){t.appendAudioInitSegment_=true;if(t.videoCodec_&&t.audioCodec_){t.audioDisabled_=i}else if(t.videoCodec_&&!t.audioCodec_){t.audioDisabled_=true;r=false}else if(!t.videoCodec_&&t.audioCodec_){t.audioDisabled_=n?r:!r;if(t.audioDisabled_){return}}e.activeSourceBuffers_.push(t)}))};e.onPlayerMediachange_=function(){e.sourceBuffers.forEach((function(e){e.appendAudioInitSegment_=true}))};e.onHlsReset_=function(){e.sourceBuffers.forEach((function(e){if(e.transmuxer_){e.transmuxer_.postMessage({action:"resetCaptions"})}}))};e.onHlsSegmentTimeMapping_=function(t){e.sourceBuffers.forEach((function(e){return e.timeMapping_=t.mapping}))};["sourceopen","sourceclose","sourceended"].forEach((function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))}),e);e.on("sourceopen",(function(t){var i=s.a.querySelector('[src="'+e.url_+'"]');if(!i){return}e.player_=ao(i.parentNode);if(!e.player_){return}e.player_.tech_.on("hls-reset",e.onHlsReset_);e.player_.tech_.on("hls-segment-time-mapping",e.onHlsSegmentTimeMapping_);if(e.player_.audioTracks&&e.player_.audioTracks()){e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_);e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_);e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)}e.player_.on("mediachange",e.onPlayerMediachange_)}));e.on("sourceended",(function(t){var i=Ru(e.duration);for(var r=0;r<e.sourceBuffers.length;r++){var n=e.sourceBuffers[r];var a=n.metadataTrack_&&n.metadataTrack_.cues;if(a&&a.length){a[a.length-1].endTime=i}}}));e.on("sourceclose",(function(e){this.sourceBuffers.forEach((function(e){if(e.transmuxer_){e.transmuxer_.terminate()}}));this.sourceBuffers.length=0;if(!this.player_){return}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)}if(this.player_.el_){this.player_.off("mediachange",this.onPlayerMediachange_)}if(this.player_.tech_&&this.player_.tech_.el_){this.player_.tech_.off("hls-reset",this.onHlsReset_);this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)}}));return e}fo(t,[{key:"addSeekableRange_",value:function e(t,i){var r=void 0;if(this.duration!==Infinity){r=new Error("MediaSource.addSeekableRange() can only be invoked "+"when the duration is Infinity");r.name="InvalidStateError";r.code=11;throw r}if(i>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=i}}},{key:"addSourceBuffer",value:function e(t){var i=void 0;var r=al(t);if(/^(video|audio)\/mp2t$/i.test(r.type)){var n=[];if(r.parameters&&r.parameters.codecs){n=r.parameters.codecs.split(",");n=Qu(n);n=n.filter((function(e){return sl(e)||ol(e)}))}if(n.length===0){n=["avc1.4d400d","mp4a.40.2"]}i=new pl(this,n);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();i.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true}}else{i=this.nativeMediaSource_.addSourceBuffer(t)}this.sourceBuffers.push(i);return i}},{key:"dispose",value:function e(){this.trigger("dispose");this.off();this.sourceBuffers.forEach((function(e){if(e.dispose){e.dispose()}}));this.sourceBuffers.length=0}}]);return t}(ao.EventTarget);var ml=0;ao.mediaSources={};var gl=function e(t,i){var r=ao.mediaSources[t];if(r){r.trigger({type:"sourceopen",swfId:i})}else{throw new Error("Media Source not found (Video.js)")}};var yl=function e(){return!!n.a.MediaSource&&!!n.a.MediaSource.isTypeSupported&&n.a.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};var _l=function e(){this.MediaSource={open:gl,supportsNativeMediaSources:yl};if(yl()){return new vl}throw new Error("Cannot use create a virtual MediaSource for this video")};_l.open=gl;_l.supportsNativeMediaSources=yl;var bl={createObjectURL:function e(t){var i="blob:vjs-media-source/";var r=void 0;if(t instanceof vl){r=n.a.URL.createObjectURL(t.nativeMediaSource_);t.url_=r;return r}if(!(t instanceof vl)){r=n.a.URL.createObjectURL(t);t.url_=r;return r}r=i+ml;ml++;ao.mediaSources[r]=t;return r}};ao.MediaSource=_l;ao.URL=bl;var Tl=ao.EventTarget,Sl=ao.mergeOptions;var kl=function e(t,i){var r=void 0;var n=Sl(t,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod});for(var a=0;a<i.playlists.length;a++){var s=ko(n,i.playlists[a]);if(s){n=s}else{r=true}}bo(i,(function(e,t,i,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id;var o=ko(n,e.playlists[0]);if(o){n=o;n.mediaGroups[t][i][a].playlists[0]=n.playlists[s];r=false}}}));if(r){return null}return n};var wl=function e(t){var i=t.byterange.offset+t.byterange.length-1;return t.uri+"-"+t.byterange.offset+"-"+i};var Cl=function e(t,i){var r=Boolean(!t.map&&!i.map);var n=r||Boolean(t.map&&i.map&&t.map.byterange.offset===i.map.byterange.offset&&t.map.byterange.length===i.map.byterange.length);return n&&t.uri===i.uri&&t.byterange.offset===i.byterange.offset&&t.byterange.length===i.byterange.length};var El=function e(t,i){var r={};for(var n in t){var a=t[n];var s=a.sidx;if(s){var o=wl(s);if(!i[o]){break}var u=i[o].sidxInfo;if(Cl(u,s)){r[o]=i[o]}}}return r};var Il=function e(t,i,r,n){var a=We(t,{manifestUri:i,clientOffset:r});var s=El(a.playlists,n);var o=s;bo(a,(function(e,t,i,r){if(e.playlists&&e.playlists.length){var a=e.playlists;o=Sl(o,El(a,n))}}));return o};var Al=function e(t,i,r,n,a){var s={uri:lo(n.handleManifestRedirects,t.resolvedUri),byterange:t.byterange,playlist:i};var o=ao.mergeOptions(s,{responseType:"arraybuffer",headers:ru(s)});return r(o,a)};var xl=function(e){po(t,e);function t(e,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=arguments[3];co(this,t);var a=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var s=r.withCredentials,o=s===undefined?false:s,u=r.handleManifestRedirects,l=u===undefined?false:u;a.hls_=i;a.withCredentials=o;a.handleManifestRedirects=l;if(!e){throw new Error("A non-empty playlist URL or playlist is required")}a.on("minimumUpdatePeriod",(function(){a.refreshXml_()}));a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)}));a.state="HAVE_NOTHING";a.loadedPlaylists_={};if(typeof e==="string"){a.srcUrl=e;a.sidxMapping_={};return vo(a)}a.setupChildLoader(n,e);return a}fo(t,[{key:"setupChildLoader",value:function e(t,i){this.masterPlaylistLoader_=t;this.childPlaylist_=i}},{key:"dispose",value:function e(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};n.a.clearTimeout(this.minimumUpdatePeriodTimeout_);n.a.clearTimeout(this.mediaRequest_);n.a.clearTimeout(this.mediaUpdateTimeout);this.off()}},{key:"hasPendingRequest",value:function e(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}}},{key:"sidxRequestFinished_",value:function e(t,i,r,n){var a=this;return function(e,s){if(!a.request){return}a.request=null;if(e){a.error={status:s.status,message:"DASH playlist request error at URL: "+t.uri,response:s.response,code:2};if(r){a.state=r}a.trigger("error");return n(i,null)}var o=new Uint8Array(s.response);var u=Xe.a.parseSidx(o.subarray(8));return n(i,u)}}},{key:"media",value:function e(t){var i=this;if(!t){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var r=this.state;if(typeof t==="string"){if(!this.master.playlists[t]){throw new Error("Unknown playlist URI: "+t)}t=this.master.playlists[t]}var a=!this.media_||t.id!==this.media_.id;if(a&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList){this.state="HAVE_METADATA";this.media_=t;if(a){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!a){return}if(this.media_){this.trigger("mediachanging")}if(!t.sidx){this.mediaRequest_=n.a.setTimeout(this.haveMetadata.bind(this,{startingState:r,playlist:t}),0);return}var s=void 0;var o=void 0;if(this.masterPlaylistLoader_){s=this.masterPlaylistLoader_.master;o=this.masterPlaylistLoader_.sidxMapping_}else{s=this.master;o=this.sidxMapping_}var u=wl(t.sidx);o[u]={sidxInfo:t.sidx};this.request=Al(t.sidx,t,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(t,s,r,(function(e,n){if(!e||!n){throw new Error("failed to request sidx")}o[u].sidx=n;i.haveMetadata({startingState:r,playlist:e.playlists[t.id]})})))}},{key:"haveMetadata",value:function e(t){var i=t.startingState,r=t.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[r.id]=r;this.mediaRequest_=null;this.refreshMedia_(r.id);if(i==="HAVE_MASTER"){this.trigger("loadedmetadata")}else{this.trigger("mediachange")}}},{key:"pause",value:function e(){this.stopRequest();n.a.clearTimeout(this.mediaUpdateTimeout);n.a.clearTimeout(this.minimumUpdatePeriodTimeout_);if(this.state==="HAVE_NOTHING"){this.started=false}}},{key:"load",value:function e(t){var i=this;n.a.clearTimeout(this.mediaUpdateTimeout);n.a.clearTimeout(this.minimumUpdatePeriodTimeout_);var r=this.media();if(t){var a=r?r.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=n.a.setTimeout((function(){return i.load()}),a);return}if(!this.started){this.start();return}if(r&&!r.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"parseMasterXml",value:function e(){var t=We(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});t.uri=this.srcUrl;for(var i=0;i<t.playlists.length;i++){var r="placeholder-uri-"+i;t.playlists[i].uri=r}bo(t,(function(e,i,r,n){if(e.playlists&&e.playlists.length){var a="placeholder-uri-"+i+"-"+r+"-"+n;var s=wo(0,a);e.playlists[0].uri=a;e.playlists[0].id=s;t.playlists[s]=e.playlists[0];t.playlists[a]=e.playlists[0]}}));Co(t);Eo(t);return t}},{key:"start",value:function e(){var t=this;this.started=true;if(this.masterPlaylistLoader_){this.mediaRequest_=n.a.setTimeout(this.haveMaster_.bind(this),0);return}this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(e,i){if(!t.request){return}t.request=null;if(e){t.error={status:i.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:i.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}t.masterXml_=i.responseText;if(i.responseHeaders&&i.responseHeaders.date){t.masterLoaded_=Date.parse(i.responseHeaders.date)}else{t.masterLoaded_=Date.now()}t.srcUrl=lo(t.handleManifestRedirects,t.srcUrl,i);t.syncClientServerClock_(t.onClientServerClockSync_.bind(t))}))}},{key:"syncClientServerClock_",value:function e(t){var i=this;var r=ze(this.masterXml_);if(r===null){this.clientOffset_=this.masterLoaded_-Date.now();return t()}if(r.method==="DIRECT"){this.clientOffset_=r.value-Date.now();return t()}this.request=this.hls_.xhr({uri:uo(this.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},(function(e,n){if(!i.request){return}if(e){i.clientOffset_=i.masterLoaded_-Date.now();return t()}var a=void 0;if(r.method==="HEAD"){if(!n.responseHeaders||!n.responseHeaders.date){a=i.masterLoaded_}else{a=Date.parse(n.responseHeaders.date)}}else{a=Date.parse(n.responseText)}i.clientOffset_=a-Date.now();t()}))}},{key:"haveMaster_",value:function e(){this.state="HAVE_MASTER";this.mediaRequest_=null;if(!this.masterPlaylistLoader_){this.master=this.parseMasterXml();this.trigger("loadedplaylist")}else if(!this.media_){this.media(this.childPlaylist_)}}},{key:"onClientServerClockSync_",value:function e(){var t=this;this.haveMaster_();if(!this.hasPendingRequest()&&!this.media_){this.media(this.master.playlists[0])}if(this.master&&this.master.minimumUpdatePeriod){this.minimumUpdatePeriodTimeout_=n.a.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),this.master.minimumUpdatePeriod)}}},{key:"refreshXml_",value:function e(){var t=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(e,i){if(!t.request){return}t.request=null;if(e){t.error={status:i.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:i.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}t.masterXml_=i.responseText;t.sidxMapping_=Il(t.masterXml_,t.srcUrl,t.clientOffset_,t.sidxMapping_);var r=t.parseMasterXml();var a=kl(t.master,r);var s=t.media().sidx;if(a){if(s){var o=wl(s);if(!t.sidxMapping_[o]){var u=t.media();t.request=Al(u.sidx,u,t.hls_.xhr,{handleManifestRedirects:t.handleManifestRedirects},t.sidxRequestFinished_(u,r,t.state,(function(e,i){if(!e||!i){throw new Error("failed to request sidx on minimumUpdatePeriod")}t.sidxMapping_[o].sidx=i;t.minimumUpdatePeriodTimeout_=n.a.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),t.master.minimumUpdatePeriod);t.refreshMedia_(t.media().id);return})))}}else{t.master=a}}t.minimumUpdatePeriodTimeout_=n.a.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),t.master.minimumUpdatePeriod)}))}},{key:"refreshMedia_",value:function e(t){var i=this;if(!t){throw new Error("refreshMedia_ must take a media id")}var r=void 0;var a=void 0;if(this.masterPlaylistLoader_){r=this.masterPlaylistLoader_.master;a=this.masterPlaylistLoader_.parseMasterXml()}else{r=this.master;a=this.parseMasterXml()}var s=kl(r,a);if(s){if(this.masterPlaylistLoader_){this.masterPlaylistLoader_.master=s}else{this.master=s}this.media_=s.playlists[t]}else{this.media_=a.playlists[t];this.trigger("playlistunchanged")}if(!this.media().endList){this.mediaUpdateTimeout=n.a.setTimeout((function(){i.trigger("mediaupdatetimeout")}),Io(this.media(),!!s))}this.trigger("loadedplaylist")}}]);return t}(Tl);var Pl=function e(t){if(ao.log.debug){return ao.log.debug.bind(ao,"VHS:",t+" >")}return function(){}};function Ll(){}var Dl=function(){function e(t,i,r,n){co(this,e);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=t;this.processedAppend_=false;this.type_=r;this.mimeType_=i;this.logger_=Pl("SourceUpdater["+r+"]["+i+"]");if(t.readyState==="closed"){t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,i,n))}else{this.createSourceBuffer_(i,n)}}fo(e,[{key:"createSourceBuffer_",value:function e(t,i){var r=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(t);this.logger_("created SourceBuffer");if(i){i.trigger("sourcebufferadded");if(this.mediaSource.sourceBuffers.length<2){i.on("sourcebufferadded",(function(){r.start_()}));return}}this.start_()}},{key:"start_",value:function e(){var t=this;this.started_=true;this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null;t.sourceBuffer_.removing=false;t.logger_("buffered ["+xu(t.buffered())+"]");if(e){e()}t.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function e(t){var i=this;if(this.processedAppend_){this.queueCallback_((function(){i.sourceBuffer_.abort()}),t)}}},{key:"appendBuffer",value:function e(t,i){var r=this;this.processedAppend_=true;this.queueCallback_((function(){if(t.videoSegmentTimingInfoCallback){r.sourceBuffer_.addEventListener("videoSegmentTimingInfo",t.videoSegmentTimingInfoCallback)}r.sourceBuffer_.appendBuffer(t.bytes)}),(function(){if(t.videoSegmentTimingInfoCallback){r.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",t.videoSegmentTimingInfoCallback)}i()}))}},{key:"buffered",value:function e(){if(!this.sourceBuffer_){return ao.createTimeRanges()}return this.sourceBuffer_.buffered}},{key:"remove",value:function e(t,i){var r=this;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Ll;if(this.processedAppend_){this.queueCallback_((function(){r.logger_("remove ["+t+" => "+i+"]");r.sourceBuffer_.removing=true;r.sourceBuffer_.remove(t,i)}),n)}}},{key:"updating",value:function e(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Ll}},{key:"timestampOffset",value:function e(t){var i=this;if(typeof t!=="undefined"){this.queueCallback_((function(){i.sourceBuffer_.timestampOffset=t;i.runCallback_()}));this.timestampOffset_=t}return this.timestampOffset_}},{key:"queueCallback_",value:function e(t,i){this.callbacks_.push([t.bind(this),i]);this.runCallback_()}},{key:"runCallback_",value:function e(){var t=void 0;if(!this.updating()&&this.callbacks_.length&&this.started_){t=this.callbacks_.shift();this.pendingCallback_=t[1];t[0]()}}},{key:"dispose",value:function e(){var t=this;var i=function e(){if(t.sourceBuffer_&&t.mediaSource.readyState==="open"){t.sourceBuffer_.abort()}t.sourceBuffer_.removeEventListener("updateend",e)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);if(this.sourceBuffer_.removing){this.sourceBuffer_.addEventListener("updateend",i)}else{i()}}}]);return e}();var Ol={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};var Nl={FAILURE:2,TIMEOUT:-101,ABORTED:-102};var Rl=function e(t){t.forEach((function(e){e.abort()}))};var Ul=function e(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}};var Ml=function e(t){var i=t.target;var r=Date.now()-i.requestTime;var n={bandwidth:Infinity,bytesReceived:0,roundTripTime:r||0};n.bytesReceived=t.loaded;n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3);return n};var Bl=function e(t,i){if(i.timedout){return{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:Nl.TIMEOUT,xhr:i}}if(i.aborted){return{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:Nl.ABORTED,xhr:i}}if(t){return{status:i.status,message:"HLS request errored at URL: "+i.uri,code:Nl.FAILURE,xhr:i}}return null};var jl=function e(t,i){return function(e,r){var n=r.response;var a=Bl(e,r);if(a){return i(a,t)}if(n.byteLength!==16){return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Nl.FAILURE,xhr:r},t)}var s=new DataView(n);t.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]);return i(null,t)}};var Fl=function e(t,i,r){return function(e,n){var a=n.response;var s=Bl(e,n);if(s){return r(s,t)}if(a.byteLength===0){return r({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:Nl.FAILURE,xhr:n},t)}t.map.bytes=new Uint8Array(n.response);if(i&&!i.isInitialized()){i.init()}t.map.timescales=Ye.a.timescale(t.map.bytes);t.map.videoTrackIds=Ye.a.videoTrackIds(t.map.bytes);return r(null,t)}};var Hl=function e(t,i,r){return function(e,n){var a=n.response;var s=Bl(e,n);var o=void 0;if(s){return r(s,t)}if(a.byteLength===0){return r({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:Nl.FAILURE,xhr:n},t)}t.stats=Ul(n);if(t.key){t.encryptedBytes=new Uint8Array(n.response)}else{t.bytes=new Uint8Array(n.response)}if(i&&t.map&&t.map.bytes){if(!i.isInitialized()){i.init()}o=i.parse(t.bytes,t.map.videoTrackIds,t.map.timescales);if(o&&o.captions){t.captionStreams=o.captionStreams;t.fmp4Captions=o.captions}}return r(null,t)}};var Vl=function e(t,i,r){var n=function e(n){if(n.data.source===i.requestId){t.removeEventListener("message",e);var a=n.data.decrypted;i.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength);return r(null,i)}};t.addEventListener("message",n);var a=void 0;if(i.key.bytes.slice){a=i.key.bytes.slice()}else{a=new Uint32Array(Array.prototype.slice.call(i.key.bytes))}t.postMessage(ou({source:i.requestId,encrypted:i.encryptedBytes,key:a,iv:i.key.iv}),[i.encryptedBytes.buffer,a.buffer])};var ql=function e(t,i,r){var n=0;var a=false;return function(e,s){if(a){return}if(e){a=true;Rl(t);return r(e,s)}n+=1;if(n===t.length){s.endOfAllRequests=Date.now();if(s.encryptedBytes){return Vl(i,s,r)}return r(null,s)}}};var Wl=function e(t,i){return function(e){t.stats=ao.mergeOptions(t.stats,Ml(e));if(!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived){t.stats.firstBytesReceivedAt=Date.now()}return i(e,t)}};var zl=function e(t,i,r,n,a,s,o){var u=[];var l=ql(u,r,o);if(a.key&&!a.key.bytes){var c=ao.mergeOptions(i,{uri:a.key.resolvedUri,responseType:"arraybuffer"});var f=jl(a,l);var h=t(c,f);u.push(h)}if(a.map&&!a.map.bytes){var d=ao.mergeOptions(i,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:ru(a.map)});var p=Fl(a,n,l);var v=t(d,p);u.push(v)}var m=ao.mergeOptions(i,{uri:a.resolvedUri,responseType:"arraybuffer",headers:ru(a)});var g=Hl(a,n,l);var y=t(m,g);y.addEventListener("progress",Wl(a,s));u.push(y);return function(){return Rl(u)}};var Gl=function e(t,i){var r=void 0;if(!t){return""}r=n.a.getComputedStyle(t);if(!r){return""}return r[i]};var Xl=function e(t,i){var r=t.slice();t.sort((function(e,t){var n=i(e,t);if(n===0){return r.indexOf(e)-r.indexOf(t)}return n}))};var Kl=function e(t,i){var r=void 0;var a=void 0;if(t.attributes.BANDWIDTH){r=t.attributes.BANDWIDTH}r=r||n.a.Number.MAX_VALUE;if(i.attributes.BANDWIDTH){a=i.attributes.BANDWIDTH}a=a||n.a.Number.MAX_VALUE;return r-a};var Yl=function e(t,i){var r=void 0;var a=void 0;if(t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width){r=t.attributes.RESOLUTION.width}r=r||n.a.Number.MAX_VALUE;if(i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width){a=i.attributes.RESOLUTION.width}a=a||n.a.Number.MAX_VALUE;if(r===a&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH){return t.attributes.BANDWIDTH-i.attributes.BANDWIDTH}return r-a};var $l=function e(t,i,r,a,s){var o=t.playlists.map((function(e){var t=void 0;var i=void 0;var r=void 0;t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width;i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;r=e.attributes.BANDWIDTH;r=r||n.a.Number.MAX_VALUE;return{bandwidth:r,width:t,height:i,playlist:e}}));Xl(o,(function(e,t){return e.bandwidth-t.bandwidth}));o=o.filter((function(e){return!Jo.isIncompatible(e.playlist)}));var u=o.filter((function(e){return Jo.isEnabled(e.playlist)}));if(!u.length){u=o.filter((function(e){return!Jo.isDisabled(e.playlist)}))}var l=u.filter((function(e){return e.bandwidth*Ol.BANDWIDTH_VARIANCE<i}));var c=l[l.length-1];var f=l.filter((function(e){return e.bandwidth===c.bandwidth}))[0];if(s===false){var h=f||u[0]||o[0];return h?h.playlist:null}var d=l.filter((function(e){return e.width&&e.height}));Xl(d,(function(e,t){return e.width-t.width}));var p=d.filter((function(e){return e.width===r&&e.height===a}));c=p[p.length-1];var v=p.filter((function(e){return e.bandwidth===c.bandwidth}))[0];var m=void 0;var g=void 0;var y=void 0;if(!v){m=d.filter((function(e){return e.width>r||e.height>a}));g=m.filter((function(e){return e.width===m[0].width&&e.height===m[0].height}));c=g[g.length-1];y=g.filter((function(e){return e.bandwidth===c.bandwidth}))[0]}var _=y||v||f||u[0]||o[0];return _?_.playlist:null};var Ql=function e(){var t=this.useDevicePixelRatio?n.a.devicePixelRatio||1:1;return $l(this.playlists.master,this.systemBandwidth,parseInt(Gl(this.tech_.el(),"width"),10)*t,parseInt(Gl(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions)};var Jl=function e(t){var i=t.master,r=t.currentTime,n=t.bandwidth,a=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,u=t.currentTimeline,l=t.syncController;var c=i.playlists.filter((function(e){return!Jo.isIncompatible(e)}));var f=c.filter(Jo.isEnabled);if(!f.length){f=c.filter((function(e){return!Jo.isDisabled(e)}))}var h=f.filter(Jo.hasAttribute.bind(null,"BANDWIDTH"));var d=h.map((function(e){var t=l.getSyncPoint(e,a,u,r);var i=t?1:2;var c=Jo.estimateSegmentRequestTime(s,n,e);var f=c*i-o;return{playlist:e,rebufferingImpact:f}}));var p=d.filter((function(e){return e.rebufferingImpact<=0}));Xl(p,(function(e,t){return Kl(t.playlist,e.playlist)}));if(p.length){return p[0]}Xl(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact}));return d[0]||null};var Zl=function e(){var t=this.playlists.master.playlists.filter(Jo.isEnabled);Xl(t,(function(e,t){return Kl(e,t)}));var i=t.filter((function(e){return Ju(e.attributes.CODECS).videoCodec}));return i[0]||null};var ec=function e(t,i,r){for(var n in r){if(!t[n]){i.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(n);if(a){t[n]=a}else{t[n]=i.addRemoteTextTrack({kind:"captions",id:n,label:n},false).track}}}};var tc=function e(t){var i=t.inbandTextTracks,r=t.captionArray,n=t.timestampOffset;if(!r){return}var a=window.WebKitDataCue||window.VTTCue;r.forEach((function(e){var t=e.stream;var r=e.startTime;var s=e.endTime;if(!i[t]){return}r+=n;s+=n;i[t].addCue(new a(r,s,e.text))}))};var ic=500;var rc=function e(t,i,r){if(!t||!i){return false}var n=t.segments;var a=r===n.length;return t.endList&&i.readyState==="open"&&a};var nc=function e(t){return typeof t==="number"&&isFinite(t)};var ac=function e(t,i,r){if(t!=="main"||!i||!r){return null}if(!r.containsAudio&&!r.containsVideo){return"Neither audio nor video found in segment."}if(i.containsVideo&&!r.containsVideo){return"Only audio found in segment when we expected video."+" We can't switch to audio only from a stream that had video."+" To get rid of this message, please add codec information to the manifest."}if(!i.containsVideo&&r.containsVideo){return"Video found in segment when we expected only audio."+" We can't switch to a stream with video from an audio only stream."+" To get rid of this message, please add codec information to the manifest."}return null};var sc=function e(t,i,r){var n=i-30;if(t.length){n=Math.max(n,t.start(0))}var a=i-r;return Math.min(a,n)};var oc=function e(t){var i=t.segment,r=i.start,n=i.end,a=t.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=u===undefined?[]:u,c=t.mediaIndex,f=t.timeline;return["appending ["+c+"] of ["+s+", "+(s+l.length)+"] from playlist ["+o+"]","["+r+" => "+n+"] in timeline ["+f+"]"].join(" ")};var uc=function(e){po(t,e);function t(e){co(this,t);var i=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e){throw new TypeError("Initialization settings are required")}if(typeof e.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!e.mediaSource){throw new TypeError("No MediaSource specified")}i.bandwidth=e.bandwidth;i.throughput={rate:0,count:0};i.roundTrip=NaN;i.resetStats_();i.mediaIndex=null;i.hasPlayed_=e.hasPlayed;i.currentTime_=e.currentTime;i.seekable_=e.seekable;i.seeking_=e.seeking;i.duration_=e.duration;i.mediaSource_=e.mediaSource;i.hls_=e.hls;i.loaderType_=e.loaderType;i.startingMedia_=void 0;i.segmentMetadataTrack_=e.segmentMetadataTrack;i.goalBufferLength_=e.goalBufferLength;i.sourceType_=e.sourceType;i.inbandTextTracks_=e.inbandTextTracks;i.state_="INIT";i.checkBufferTimeout_=null;i.error_=void 0;i.currentTimeline_=-1;i.pendingSegment_=null;i.mimeType_=null;i.sourceUpdater_=null;i.xhrOptions_=null;i.activeInitSegmentId_=null;i.initSegments_={};i.cacheEncryptionKeys_=e.cacheEncryptionKeys;i.keyCache_={};if(i.loaderType_==="main"){i.captionParser_=new Qe.a}else{i.captionParser_=null}i.decrypter_=e.decrypter;i.syncController_=e.syncController;i.syncPoint_={segmentIndex:0,time:0};i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")};i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_);i.mediaSource_.addEventListener("sourceopen",(function(){return i.ended_=false}));i.fetchAtBuffer_=false;i.logger_=Pl("SegmentLoader["+i.loaderType_+"]");Object.defineProperty(i,"state",{get:function e(){return this.state_},set:function e(t){if(t!==this.state_){this.logger_(this.state_+" -> "+t);this.state_=t}}});return i}fo(t,[{key:"resetStats_",value:function e(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function e(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose()}this.resetStats_();if(this.captionParser_){this.captionParser_.reset()}if(this.checkBufferTimeout_){n.a.clearTimeout(this.checkBufferTimeout_)}if(this.syncController_&&this.triggerSyncInfoUpdate_){this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_)}this.off()}},{key:"abort",value:function e(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}}},{key:"abort_",value:function e(){if(this.pendingSegment_){this.pendingSegment_.abortRequests()}this.pendingSegment_=null}},{key:"error",value:function e(t){if(typeof t!=="undefined"){this.error_=t}this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function e(){this.ended_=true;this.pause();this.trigger("ended")}},{key:"buffered_",value:function e(){if(!this.sourceUpdater_){return ao.createTimeRanges()}return this.sourceUpdater_.buffered()}},{key:"initSegment",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!t){return null}var r=uu(t);var n=this.initSegments_[r];if(i&&!n&&t.bytes){this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,timescales:t.timescales,videoTrackIds:t.videoTrackIds}}return n||t}},{key:"segmentKey",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!t){return null}var r=lu(t);var n=this.keyCache_[r];if(this.cacheEncryptionKeys_&&i&&!n&&t.bytes){this.keyCache_[r]=n={resolvedUri:t.resolvedUri,bytes:t.bytes}}var a={resolvedUri:(n||t).resolvedUri};if(n){a.bytes=n.bytes}return a}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function e(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"}},{key:"init_",value:function e(){this.state="READY";this.sourceUpdater_=new Dl(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!t){return}var r=this.playlist_;var n=this.pendingSegment_;this.playlist_=t;this.xhrOptions_=i;if(this.state==="INIT"){t.syncInfo={mediaSequence:t.mediaSequence,time:0}}var a=null;if(r){if(r.id){a=r.id}else if(r.uri){a=r.uri}}this.logger_("playlist update ["+a+" => "+(t.id||t.uri)+"]");this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!r||r.uri!==t.uri){if(this.mediaIndex!==null){this.resyncLoader()}return}var s=t.mediaSequence-r.mediaSequence;this.logger_("live window shift ["+s+"]");if(this.mediaIndex!==null){this.mediaIndex-=s}if(n){n.mediaIndex-=s;if(n.mediaIndex>=0){n.segment=t.segments[n.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(r,t)}},{key:"pause",value:function e(){if(this.checkBufferTimeout_){n.a.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}}},{key:"paused",value:function e(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function e(t,i){if(this.mimeType_){return}this.mimeType_=t;this.sourceBufferEmitter_=i;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}}},{key:"resetEverything",value:function e(t){this.ended_=false;this.resetLoader();this.remove(0,Infinity,t);if(this.captionParser_){this.captionParser_.clearAllCaptions()}this.trigger("reseteverything")}},{key:"resetLoader",value:function e(){this.fetchAtBuffer_=false;this.resyncLoader()}},{key:"resyncLoader",value:function e(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function e(t,i,r){if(i===Infinity){i=this.duration_()}if(this.sourceUpdater_){this.sourceUpdater_.remove(t,i,r)}Ou(t,i,this.segmentMetadataTrack_);if(this.inbandTextTracks_){for(var n in this.inbandTextTracks_){Ou(t,i,this.inbandTextTracks_[n])}}}},{key:"monitorBuffer_",value:function e(){if(this.checkBufferTimeout_){n.a.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=n.a.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function e(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){n.a.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=n.a.setTimeout(this.monitorBufferTick_.bind(this),ic)}},{key:"fillBuffer_",value:function e(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!t){return}if(this.isEndOfStream_(t.mediaIndex)){this.endOfStream();return}if(t.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}if(t.timeline!==this.currentTimeline_){this.syncController_.reset();t.timestampOffset=t.startOfSegment;if(this.captionParser_){this.captionParser_.clearAllCaptions()}}this.loadSegment_(t)}},{key:"isEndOfStream_",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.playlist_;return rc(i,this.mediaSource_,t)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function e(t,i,r,n,a,s){var o=0;var u=void 0;if(t.length){o=t.end(t.length-1)}var l=Math.max(0,o-a);if(!i.segments.length){return null}if(l>=this.goalBufferLength_()){return null}if(!n&&l>=1){return null}if(s===null){r=this.getSyncSegmentCandidate_(i);return this.generateSegmentInfo_(i,r,null,true)}if(r!==null){var c=i.segments[r];u=o;return this.generateSegmentInfo_(i,r+1,u,false)}if(this.fetchAtBuffer_){var f=Jo.getMediaInfoForTime(i,o,s.segmentIndex,s.time);r=f.mediaIndex;u=f.startTime}else{var h=Jo.getMediaInfoForTime(i,a,s.segmentIndex,s.time);r=h.mediaIndex;u=h.startTime}return this.generateSegmentInfo_(i,r,u,false)}},{key:"getSyncSegmentCandidate_",value:function e(t){var i=this;if(this.currentTimeline_===-1){return 0}var r=t.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===i.currentTimeline_}));if(r.length){return r[Math.min(r.length-1,1)].segmentIndex}return Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function e(t,i,r,n){if(i<0||i>=t.segments.length){return null}var a=t.segments[i];return{requestId:"segment-loader-"+Math.random(),uri:a.resolvedUri,mediaIndex:i,isSyncRequest:n,startOfSegment:r,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:a.timeline,duration:a.duration,segment:a}}},{key:"abortRequestEarly_",value:function e(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return false}if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3){return false}var i=this.currentTime_();var r=t.bandwidth;var n=this.pendingSegment_.duration;var a=Jo.estimateSegmentRequestTime(n,r,this.playlist_,t.bytesReceived);var s=Pu(this.buffered_(),i,this.hls_.tech_.playbackRate())-1;if(a<=s){return false}var o=Jl({master:this.hls_.playlists.master,currentTime:i,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o){return}var u=a-s;var l=u-o.rebufferingImpact;var c=.5;if(s<=ku){c=1}if(!o.playlist||o.playlist.uri===this.playlist_.uri||l<c){return false}this.bandwidth=o.playlist.attributes.BANDWIDTH*Ol.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return true}},{key:"handleProgress_",value:function e(t,i){if(!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(i.stats)){return}this.trigger("progress")}},{key:"loadSegment_",value:function e(t){this.state="WAITING";this.pendingSegment_=t;this.trimBackBuffer_(t);t.abortRequests=zl(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function e(t){var i=sc(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(i>0){this.remove(0,i)}}},{key:"createSimplifiedSegmentObj_",value:function e(t){var i=t.segment;var r={resolvedUri:i.resolvedUri,byterange:i.byterange,requestId:t.requestId};if(i.key){var n=i.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);r.key=this.segmentKey(i.key);r.key.iv=n}if(i.map){r.map=this.initSegment(i.map)}return r}},{key:"segmentRequestFinished_",value:function e(t,i){this.mediaRequests+=1;if(i.stats){this.mediaBytesTransferred+=i.stats.bytesReceived;this.mediaTransferDuration+=i.stats.roundTripTime}if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(i.requestId!==this.pendingSegment_.requestId){return}if(t){this.pendingSegment_=null;this.state="READY";if(t.code===Nl.ABORTED){this.mediaRequestsAborted+=1;return}this.pause();if(t.code===Nl.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(t);this.trigger("error");return}this.bandwidth=i.stats.bandwidth;this.roundTrip=i.stats.roundTripTime;if(i.map){i.map=this.initSegment(i.map,true)}if(i.key){this.segmentKey(i.key,true)}this.processSegmentResponse_(i)}},{key:"processSegmentResponse_",value:function e(t){var i=this.pendingSegment_;i.bytes=t.bytes;if(t.map){i.segment.map.bytes=t.map.bytes}i.endOfAllRequests=t.endOfAllRequests;if(t.fmp4Captions){ec(this.inbandTextTracks_,this.hls_.tech_,t.captionStreams);tc({inbandTextTracks:this.inbandTextTracks_,captionArray:t.fmp4Captions,timestampOffset:0});if(this.captionParser_){this.captionParser_.clearParsedCaptions()}}this.handleSegment_()}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_){this.state="READY";return}var i=this.pendingSegment_;var r=i.segment;var n=this.syncController_.probeSegmentInfo(i);if(typeof this.startingMedia_==="undefined"&&n&&(n.containsAudio||n.containsVideo)){this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo}}var a=ac(this.loaderType_,this.startingMedia_,n);if(a){this.error({message:a,blacklistDuration:Infinity});this.trigger("error");return}if(i.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}if(i.timestampOffset!==null&&i.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(n&&n.segmentTimestampInfo){var s=n.segmentTimestampInfo[0].ptsTime;var o=n.segmentTimestampInfo[0].dtsTime;i.timestampOffset-=s-o}this.sourceUpdater_.timestampOffset(i.timestampOffset);this.trigger("timestampoffset")}var u=this.syncController_.mappingForTimeline(i.timeline);if(u!==null){this.trigger({type:"segmenttimemapping",mapping:u})}this.state="APPENDING";if(r.map){var l=uu(r.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==l){var c=this.initSegment(r.map);this.sourceUpdater_.appendBuffer({bytes:c.bytes},(function(){t.activeInitSegmentId_=l}))}}i.byteLength=i.bytes.byteLength;if(typeof r.start==="number"&&typeof r.end==="number"){this.mediaSecondsLoaded+=r.end-r.start}else{this.mediaSecondsLoaded+=r.duration}this.logger_(oc(i));this.sourceUpdater_.appendBuffer({bytes:i.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,i.requestId)},this.handleUpdateEnd_.bind(this))}},{key:"handleVideoSegmentTimingInfo_",value:function e(t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId){return}var r=this.pendingSegment_.segment;if(!r.videoTimingInfo){r.videoTimingInfo={}}r.videoTimingInfo.transmuxerPrependedSeconds=i.videoSegmentTimingInfo.prependedContentDuration||0;r.videoTimingInfo.transmuxedPresentationStart=i.videoSegmentTimingInfo.start.presentation;r.videoTimingInfo.transmuxedPresentationEnd=i.videoSegmentTimingInfo.end.presentation;r.videoTimingInfo.baseMediaDecodeTime=i.videoSegmentTimingInfo.baseMediaDecodeTime}},{key:"handleUpdateEnd_",value:function e(){if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var t=this.pendingSegment_;var i=t.segment;var r=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(t);this.addSegmentMetadataCue_(t);this.state="READY";this.mediaIndex=t.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=t.timeline;this.trigger("syncinfoupdate");if(i.end&&this.currentTime_()-i.end>t.playlist.targetDuration*3){this.resetEverything();return}if(r){this.trigger("bandwidthupdate")}this.trigger("progress");if(this.isEndOfStream_(t.mediaIndex+1,t.playlist)){this.endOfStream()}if(!this.paused()){this.monitorBuffer_()}}},{key:"recordThroughput_",value:function e(t){var i=this.throughput.rate;var r=Date.now()-t.endOfAllRequests+1;var n=Math.floor(t.byteLength/r*8*1e3);this.throughput.rate+=(n-i)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function e(t){if(!this.segmentMetadataTrack_){return}var i=t.segment;var r=i.start;var a=i.end;if(!nc(r)||!nc(a)){return}Ou(r,a,this.segmentMetadataTrack_);var s=n.a.WebKitDataCue||n.a.VTTCue;var o={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:r,end:a};var u=JSON.stringify(o);var l=new s(r,a,u);l.value=o;this.segmentMetadataTrack_.addCue(l)}}]);return t}(ao.EventTarget);var lc=function e(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))};var cc=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)})));var fc=function(e){po(t,e);function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};co(this,t);var r=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));r.mediaSource_=null;r.subtitlesTrack_=null;r.featuresNativeTextTracks_=e.featuresNativeTextTracks;return r}fo(t,[{key:"buffered_",value:function e(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return ao.createTimeRanges()}var t=this.subtitlesTrack_.cues;var i=t[0].startTime;var r=t[t.length-1].startTime;return ao.createTimeRanges([[i,r]])}},{key:"initSegment",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!t){return null}var r=uu(t);var n=this.initSegments_[r];if(i&&!n&&t.bytes){var a=cc.byteLength+t.bytes.byteLength;var s=new Uint8Array(a);s.set(t.bytes);s.set(cc,t.bytes.byteLength);this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return n||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function e(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function e(t){if(typeof t==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=t;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_}},{key:"remove",value:function e(t,i){Ou(t,i,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function e(){var t=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var i=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);i=this.skipEmptySegments_(i);if(!i){return}if(this.syncController_.timestampOffsetForTimeline(i.timeline)===null){var r=function e(){t.state="READY";if(!t.paused()){t.monitorBuffer_()}};this.syncController_.one("timestampoffset",r);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(i)}},{key:"skipEmptySegments_",value:function e(t){while(t&&t.segment.empty){t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest)}return t}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var i=this.pendingSegment_;var r=i.segment;if(typeof n.a.WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var a=void 0;var s=function e(){t.subtitlesTrack_.tech_.off("vttjsloaded",a);t.error({message:"Error loading vtt.js"});t.state="READY";t.pause();t.trigger("error")};a=function e(){t.subtitlesTrack_.tech_.off("vttjserror",s);t.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",a);this.subtitlesTrack_.tech_.one("vttjserror",s);return}r.requested=true;try{this.parseVTTCues_(i)}catch(e){this.error({message:e.message});this.state="READY";this.pause();return this.trigger("error")}this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_);if(i.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}i.byteLength=i.bytes.byteLength;this.mediaSecondsLoaded+=r.duration;if(i.cues.length){this.remove(i.cues[0].endTime,i.cues[i.cues.length-1].endTime)}i.cues.forEach((function(e){t.subtitlesTrack_.addCue(t.featuresNativeTextTracks_?new n.a.VTTCue(e.startTime,e.endTime,e.text):e)}));this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function e(t){var i=void 0;var r=false;if(typeof n.a.TextDecoder==="function"){i=new n.a.TextDecoder("utf8")}else{i=n.a.WebVTT.StringDecoder();r=true}var a=new n.a.WebVTT.Parser(n.a,n.a.vttjs,i);t.cues=[];t.timestampmap={MPEGTS:0,LOCAL:0};a.oncue=t.cues.push.bind(t.cues);a.ontimestampmap=function(e){return t.timestampmap=e};a.onparsingerror=function(e){ao.log.warn("Error encountered when parsing cues: "+e.message)};if(t.segment.map){var s=t.segment.map.bytes;if(r){s=lc(s)}a.parse(s)}var o=t.bytes;if(r){o=lc(o)}a.parse(o);a.flush()}},{key:"updateTimeMapping_",value:function e(t,i,r){var n=t.segment;if(!i){return}if(!t.cues.length){n.empty=true;return}var a=t.timestampmap;var s=a.MPEGTS/9e4-a.LOCAL+i.mapping;t.cues.forEach((function(e){e.startTime+=s;e.endTime+=s}));if(!r.syncInfo){var o=t.cues[0].startTime;var u=t.cues[t.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:Math.min(o,u-n.duration)}}}}]);return t}(uc);var hc=function e(t,i){var r=t.cues;for(var n=0;n<r.length;n++){var a=r[n];if(i>=a.adStartTime&&i<=a.adEndTime){return a}}return null};var dc=function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!t.segments){return}var a=r;var s=void 0;for(var o=0;o<t.segments.length;o++){var u=t.segments[o];if(!s){s=hc(i,a+u.duration/2)}if(s){if("cueIn"in u){s.endTime=a;s.adEndTime=a;a+=u.duration;s=null;continue}if(a<s.endTime){a+=u.duration;continue}s.endTime+=u.duration}else{if("cueOut"in u){s=new n.a.VTTCue(a,a+u.duration,u.cueOut);s.adStartTime=a;s.adEndTime=a+parseFloat(u.cueOut);i.addCue(s)}if("cueOutCont"in u){var l=void 0;var c=void 0;var f=u.cueOutCont.split("/").map(parseFloat);var h=mo(f,2);l=h[0];c=h[1];s=new n.a.VTTCue(a,a+u.duration,"");s.adStartTime=a-l;s.adEndTime=s.adStartTime+c;i.addCue(s)}}a+=u.duration}};var pc=Ze.a.inspect;var vc=[{name:"VOD",run:function e(t,i,r,n,a){if(r!==Infinity){var s={time:0,segmentIndex:0};return s}return null}},{name:"ProgramDateTime",run:function e(t,i,r,n,a){if(!t.datetimeToDisplayTime){return null}var s=i.segments||[];var o=null;var u=null;a=a||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.dateTimeObject){var f=c.dateTimeObject.getTime()/1e3;var h=f+t.datetimeToDisplayTime;var d=Math.abs(a-h);if(u!==null&&(d===0||u<d)){break}u=d;o={time:h,segmentIndex:l}}}return o}},{name:"Segment",run:function e(t,i,r,n,a){var s=i.segments||[];var o=null;var u=null;a=a||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.timeline===n&&typeof c.start!=="undefined"){var f=Math.abs(a-c.start);if(u!==null&&u<f){break}if(!o||u===null||u>=f){u=f;o={time:c.start,segmentIndex:l}}}}return o}},{name:"Discontinuity",run:function e(t,i,r,n,a){var s=null;a=a||0;if(i.discontinuityStarts&&i.discontinuityStarts.length){var o=null;for(var u=0;u<i.discontinuityStarts.length;u++){var l=i.discontinuityStarts[u];var c=i.discontinuitySequence+u+1;var f=t.discontinuities[c];if(f){var h=Math.abs(a-f.time);if(o!==null&&o<h){break}if(!s||o===null||o>=h){o=h;s={time:f.time,segmentIndex:l}}}}}return s}},{name:"Playlist",run:function e(t,i,r,n,a){if(i.syncInfo){var s={time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence};return s}return null}}];var mc=function(e){po(t,e);function t(){co(this,t);var e=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.inspectCache_=undefined;e.timelines=[];e.discontinuities=[];e.datetimeToDisplayTime=null;e.logger_=Pl("SyncController");return e}fo(t,[{key:"getSyncPoint",value:function e(t,i,r,n){var a=this.runStrategies_(t,i,r,n);if(!a.length){return null}return this.selectSyncPoint_(a,{key:"time",value:n})}},{key:"getExpiredTime",value:function e(t,i){if(!t||!t.segments){return null}var r=this.runStrategies_(t,i,t.discontinuitySequence,0);if(!r.length){return null}var n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});if(n.segmentIndex>0){n.time*=-1}return Math.abs(n.time+No(t,n.segmentIndex,0))}},{key:"runStrategies_",value:function e(t,i,r,n){var a=[];for(var s=0;s<vc.length;s++){var o=vc[s];var u=o.run(this,t,i,r,n);if(u){u.strategy=o.name;a.push({strategy:o.name,syncPoint:u})}}return a}},{key:"selectSyncPoint_",value:function e(t,i){var r=t[0].syncPoint;var n=Math.abs(t[0].syncPoint[i.key]-i.value);var a=t[0].strategy;for(var s=1;s<t.length;s++){var o=Math.abs(t[s].syncPoint[i.key]-i.value);if(o<n){n=o;r=t[s].syncPoint;a=t[s].strategy}}this.logger_("syncPoint for ["+i.key+": "+i.value+"] chosen with strategy"+(" ["+a+"]: [time:"+r.time+",")+(" segmentIndex:"+r.segmentIndex+"]"));return r}},{key:"saveExpiredSegmentInfo",value:function e(t,i){var r=i.mediaSequence-t.mediaSequence;for(var n=r-1;n>=0;n--){var a=t.segments[n];if(a&&typeof a.start!=="undefined"){i.syncInfo={mediaSequence:t.mediaSequence+n,time:a.start};this.logger_("playlist refresh sync: [time:"+i.syncInfo.time+","+(" mediaSequence: "+i.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function e(t){if(!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var i=t.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-i}}},{key:"reset",value:function e(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function e(t){var i=t.segment;var r=t.playlist;var n=void 0;if(i.map){n=this.probeMp4Segment_(t)}else{n=this.probeTsSegment_(t)}if(n){if(this.calculateSegmentTimeMapping_(t,n)){this.saveDiscontinuitySyncInfo_(t);if(!r.syncInfo){r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:i.start}}}}return n}},{key:"probeMp4Segment_",value:function e(t){var i=t.segment;var r=Ye.a.timescale(i.map.bytes);var n=Ye.a.compositionStartTime(r,t.bytes);if(t.timestampOffset!==null){t.timestampOffset-=n}return{start:n,end:n+i.duration}}},{key:"probeTsSegment_",value:function e(t){var i=pc(t.bytes,this.inspectCache_);var r=void 0;var n=void 0;var a=void 0;if(!i){return null}if(i.video&&i.video.length===2){this.inspectCache_=i.video[1].dts;r=i.video[0].dtsTime;n=i.video[1].dtsTime;a=i.video}else if(i.audio&&i.audio.length===2){this.inspectCache_=i.audio[1].dts;r=i.audio[0].dtsTime;n=i.audio[1].dtsTime;a=i.audio}var s={segmentTimestampInfo:a,start:r,end:n,containsVideo:i.video&&i.video.length===2,containsAudio:i.audio&&i.audio.length===2};return s}},{key:"timestampOffsetForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].time}},{key:"mappingForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function e(t,i){var r=t.segment;var n=this.timelines[t.timeline];if(t.timestampOffset!==null){n={time:t.startOfSegment,mapping:t.startOfSegment-i.start};this.timelines[t.timeline]=n;this.trigger("timestampoffset");this.logger_("time mapping for timeline "+t.timeline+": "+("[time: "+n.time+"] [mapping: "+n.mapping+"]"));r.start=t.startOfSegment;r.end=i.end+n.mapping}else if(n){r.start=i.start+n.mapping;r.end=i.end+n.mapping}else{return false}return true}},{key:"saveDiscontinuitySyncInfo_",value:function e(t){var i=t.playlist;var r=t.segment;if(r.discontinuity){this.discontinuities[r.timeline]={time:r.start,accuracy:0}}else if(i.discontinuityStarts&&i.discontinuityStarts.length){for(var n=0;n<i.discontinuityStarts.length;n++){var a=i.discontinuityStarts[n];var s=i.discontinuitySequence+n+1;var o=a-t.mediaIndex;var u=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>u){var l=void 0;if(o<0){l=r.start-No(i,t.mediaIndex,a)}else{l=r.end+No(i,t.mediaIndex+1,a)}this.discontinuities[s]={time:l,accuracy:u}}}}}},{key:"dispose",value:function e(){this.trigger("dispose");this.off()}}]);return t}(ao.EventTarget);var gc=new qu("./decrypter-worker.worker.js",(function(e,t){var i=this;var r=function(){function e(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var t=function e(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}};var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=function e(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i)Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i};var a=function e(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t};var s=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var i=t[0];var r=t[1];var n=i[4];var a=r[4];var s=void 0;var o=void 0;var u=void 0;var l=[];var c=[];var f=void 0;var h=void 0;var d=void 0;var p=void 0;var v=void 0;var m=void 0;for(s=0;s<256;s++){c[(l[s]=s<<1^(s>>7)*283)^s]=s}for(o=u=0;!n[o];o^=f||1,u=c[u]||1){p=u^u<<1^u<<2^u<<3^u<<4;p=p>>8^p&255^99;n[o]=p;a[p]=o;d=l[h=l[f=l[o]]];m=d*16843009^h*65537^f*257^o*16843008;v=l[p]*257^p*16843008;for(s=0;s<4;s++){i[s][o]=v=v<<24^v>>>8;r[s][p]=m=m<<24^m>>>8}}for(s=0;s<5;s++){i[s]=i[s].slice(0);r[s]=r[s].slice(0)}return t};var o=null;var u=function(){function e(i){t(this,e);if(!o){o=s()}this._tables=[[o[0][0].slice(),o[0][1].slice(),o[0][2].slice(),o[0][3].slice(),o[0][4].slice()],[o[1][0].slice(),o[1][1].slice(),o[1][2].slice(),o[1][3].slice(),o[1][4].slice()]];var r=void 0;var n=void 0;var a=void 0;var u=void 0;var l=void 0;var c=this._tables[0][4];var f=this._tables[1];var h=i.length;var d=1;if(h!==4&&h!==6&&h!==8){throw new Error("Invalid aes key size")}u=i.slice(0);l=[];this._key=[u,l];for(r=h;r<4*h+28;r++){a=u[r-1];if(r%h===0||h===8&&r%h===4){a=c[a>>>24]<<24^c[a>>16&255]<<16^c[a>>8&255]<<8^c[a&255];if(r%h===0){a=a<<8^a>>>24^d<<24;d=d<<1^(d>>7)*283}}u[r]=u[r-h]^a}for(n=0;r;n++,r--){a=u[n&3?r:r-4];if(r<=4||n<4){l[n]=a}else{l[n]=f[0][c[a>>>24]]^f[1][c[a>>16&255]]^f[2][c[a>>8&255]]^f[3][c[a&255]]}}}e.prototype.decrypt=function e(t,i,r,n,a,s){var o=this._key[1];var u=t^o[0];var l=n^o[1];var c=r^o[2];var f=i^o[3];var h=void 0;var d=void 0;var p=void 0;var v=o.length/4-2;var m=void 0;var g=4;var y=this._tables[1];var _=y[0];var b=y[1];var T=y[2];var S=y[3];var k=y[4];for(m=0;m<v;m++){h=_[u>>>24]^b[l>>16&255]^T[c>>8&255]^S[f&255]^o[g];d=_[l>>>24]^b[c>>16&255]^T[f>>8&255]^S[u&255]^o[g+1];p=_[c>>>24]^b[f>>16&255]^T[u>>8&255]^S[l&255]^o[g+2];f=_[f>>>24]^b[u>>16&255]^T[l>>8&255]^S[c&255]^o[g+3];g+=4;u=h;l=d;c=p}for(m=0;m<4;m++){a[(3&-m)+s]=k[u>>>24]<<24^k[l>>16&255]<<16^k[c>>8&255]<<8^k[f&255]^o[g++];h=u;u=l;l=c;c=f;f=h}};return e}();var l=function(){function e(){t(this,e);this.listeners={}}e.prototype.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(i)};e.prototype.off=function e(t,i){if(!this.listeners[t]){return false}var r=this.listeners[t].indexOf(i);this.listeners[t].splice(r,1);return r>-1};e.prototype.trigger=function e(t){var i=this.listeners[t];if(!i){return}if(arguments.length===2){var r=i.length;for(var n=0;n<r;++n){i[n].call(this,arguments[1])}}else{var a=Array.prototype.slice.call(arguments,1);var s=i.length;for(var o=0;o<s;++o){i[o].apply(this,a)}}};e.prototype.dispose=function e(){this.listeners={}};e.prototype.pipe=function e(t){this.on("data",(function(e){t.push(e)}))};return e}();var c=function(e){n(i,e);function i(){t(this,i);var r=a(this,e.call(this,l));r.jobs=[];r.delay=1;r.timeout_=null;return r}i.prototype.processJob_=function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};i.prototype.push=function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return i}(l);var f=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var h=function e(t,i,r){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var a=new u(Array.prototype.slice.call(i));var s=new Uint8Array(t.byteLength);var o=new Int32Array(s.buffer);var l=void 0;var c=void 0;var h=void 0;var d=void 0;var p=void 0;var v=void 0;var m=void 0;var g=void 0;var y=void 0;l=r[0];c=r[1];h=r[2];d=r[3];for(y=0;y<n.length;y+=4){p=f(n[y]);v=f(n[y+1]);m=f(n[y+2]);g=f(n[y+3]);a.decrypt(p,v,m,g,o,y);o[y]=f(o[y]^l);o[y+1]=f(o[y+1]^c);o[y+2]=f(o[y+2]^h);o[y+3]=f(o[y+3]^d);l=p;c=v;h=m;d=g}return s};var d=function(){function i(r,n,a,s){t(this,i);var o=i.STEP;var u=new Int32Array(r.buffer);var l=new Uint8Array(r.byteLength);var h=0;this.asyncStream_=new c;this.asyncStream_.push(this.decryptChunk_(u.subarray(h,h+o),n,a,l));for(h=o;h<u.length;h+=o){a=new Uint32Array([f(u[h-4]),f(u[h-3]),f(u[h-2]),f(u[h-1])]);this.asyncStream_.push(this.decryptChunk_(u.subarray(h,h+o),n,a,l))}this.asyncStream_.push((function(){s(null,e(l))}))}i.prototype.decryptChunk_=function e(t,i,r,n){return function(){var e=h(t,i,r);n.set(e,t.byteOffset)}};r(i,null,[{key:"STEP",get:function e(){return 32e3}}]);return i}();var p=function e(t){var i={};Object.keys(t).forEach((function(e){var r=t[e];if(ArrayBuffer.isView(r)){i[e]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}}else{i[e]=r}}));return i};var v=function e(t){t.onmessage=function(e){var i=e.data;var r=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength);var n=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4);var a=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new d(r,n,a,(function(e,r){t.postMessage(p({source:i.source,decrypted:r}),[r.buffer])}))}};var m=new v(i);return m}()}));var yc=function e(t){var i=t["default"]?"main":"alternative";if(t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0){i="main-desc"}return i};var _c=function e(t,i){t.abort();t.pause();if(i&&i.activePlaylistLoader){i.activePlaylistLoader.pause();i.activePlaylistLoader=null}};var bc=function e(t,i){i.activePlaylistLoader=t;t.load()};var Tc=function e(t,i){return function(){var e=i.segmentLoaders,r=e[t],n=e.main,a=i.mediaTypes[t];var s=a.activeTrack();var o=a.activeGroup(s);var u=a.activePlaylistLoader;_c(r,a);if(!o){return}if(!o.playlistLoader){if(u){n.resetEverything()}return}r.resyncLoader();bc(o.playlistLoader,a)}};var Sc=function e(t,i){return function(){var e=i.segmentLoaders,r=e[t],n=e.main,a=i.mediaTypes[t];var s=a.activeTrack();var o=a.activeGroup(s);var u=a.activePlaylistLoader;_c(r,a);if(!o){return}if(!o.playlistLoader){n.resetEverything();return}if(u===o.playlistLoader){bc(o.playlistLoader,a);return}if(r.track){r.track(s)}r.resetEverything();bc(o.playlistLoader,a)}};var kc={AUDIO:function e(t,i){return function(){var e=i.segmentLoaders[t],r=i.mediaTypes[t],n=i.blacklistCurrentPlaylist;_c(e,r);var a=r.activeTrack();var s=r.activeGroup();var o=(s.filter((function(e){return e["default"]}))[0]||s[0]).id;var u=r.tracks[o];if(a===u){n({message:"Problem encountered loading the default audio track."});return}ao.log.warn("Problem encountered loading the alternate audio track."+"Switching back to default.");for(var l in r.tracks){r.tracks[l].enabled=r.tracks[l]===u}r.onTrackChanged()}},SUBTITLES:function e(t,i){return function(){var e=i.segmentLoaders[t],r=i.mediaTypes[t];ao.log.warn("Problem encountered loading the subtitle track."+"Disabling subtitle track.");_c(e,r);var n=r.activeTrack();if(n){n.mode="disabled"}r.onTrackChanged()}}};var wc={AUDIO:function e(t,i,r){if(!i){return}var n=r.tech,a=r.requestOptions,s=r.segmentLoaders[t];i.on("loadedmetadata",(function(){var e=i.media();s.playlist(e,a);if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}}));i.on("loadedplaylist",(function(){s.playlist(i.media(),a);if(!n.paused()){s.load()}}));i.on("error",kc[t](t,r))},SUBTITLES:function e(t,i,r){var n=r.tech,a=r.requestOptions,s=r.segmentLoaders[t],o=r.mediaTypes[t];i.on("loadedmetadata",(function(){var e=i.media();s.playlist(e,a);s.track(o.activeTrack());if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}}));i.on("loadedplaylist",(function(){s.playlist(i.media(),a);if(!n.paused()){s.load()}}));i.on("error",kc[t](t,r))}};var Cc={AUDIO:function e(t,i){var r=i.hls,n=i.sourceType,a=i.segmentLoaders[t],s=i.requestOptions,o=i.master.mediaGroups,u=i.mediaTypes[t],l=u.groups,c=u.tracks,f=i.masterPlaylistLoader;if(!o[t]||Object.keys(o[t]).length===0){o[t]={main:{default:{default:true}}}}for(var h in o[t]){if(!l[h]){l[h]=[]}for(var d in o[t][h]){var p=o[t][h][d];var v=void 0;if(p.resolvedUri){v=new Ao(p.resolvedUri,r,s)}else if(p.playlists&&n==="dash"){v=new xl(p.playlists[0],r,s,f)}else{v=null}p=ao.mergeOptions({id:d,playlistLoader:v},p);wc[t](t,p.playlistLoader,i);l[h].push(p);if(typeof c[d]==="undefined"){var m=new ao.AudioTrack({id:d,kind:yc(p),enabled:false,language:p.language,default:p["default"],label:d});c[d]=m}}}a.on("error",kc[t](t,i))},SUBTITLES:function e(t,i){var r=i.tech,n=i.hls,a=i.sourceType,s=i.segmentLoaders[t],o=i.requestOptions,u=i.master.mediaGroups,l=i.mediaTypes[t],c=l.groups,f=l.tracks,h=i.masterPlaylistLoader;for(var d in u[t]){if(!c[d]){c[d]=[]}for(var p in u[t][d]){if(u[t][d][p].forced){continue}var v=u[t][d][p];var m=void 0;if(a==="hls"){m=new Ao(v.resolvedUri,n,o)}else if(a==="dash"){m=new xl(v.playlists[0],n,o,h)}v=ao.mergeOptions({id:p,playlistLoader:m},v);wc[t](t,v.playlistLoader,i);c[d].push(v);if(typeof f[p]==="undefined"){var g=r.addRemoteTextTrack({id:p,kind:"subtitles",default:v["default"]&&v.autoselect,language:v.language,label:p},false).track;f[p]=g}}}s.on("error",kc[t](t,i))},"CLOSED-CAPTIONS":function e(t,i){var r=i.tech,n=i.master.mediaGroups,a=i.mediaTypes[t],s=a.groups,o=a.tracks;for(var u in n[t]){if(!s[u]){s[u]=[]}for(var l in n[t][u]){var c=n[t][u][l];if(!c.instreamId.match(/CC\d/)){continue}s[u].push(ao.mergeOptions({id:l},c));if(typeof o[l]==="undefined"){var f=r.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c["default"]&&c.autoselect,language:c.language,label:l},false).track;o[l]=f}}}}};var Ec=function e(t,i){return function(e){var r=i.masterPlaylistLoader,n=i.mediaTypes[t].groups;var a=r.media();if(!a){return null}var s=null;if(a.attributes[t]){s=n[a.attributes[t]]}s=s||n.main;if(typeof e==="undefined"){return s}if(e===null){return null}return s.filter((function(t){return t.id===e.id}))[0]||null}};var Ic={AUDIO:function e(t,i){return function(){var e=i.mediaTypes[t].tracks;for(var r in e){if(e[r].enabled){return e[r]}}return null}},SUBTITLES:function e(t,i){return function(){var e=i.mediaTypes[t].tracks;for(var r in e){if(e[r].mode==="showing"||e[r].mode==="hidden"){return e[r]}}return null}}};var Ac=function e(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){Cc[e](e,t)}));var i=t.mediaTypes,r=t.masterPlaylistLoader,n=t.tech,a=t.hls;["AUDIO","SUBTITLES"].forEach((function(e){i[e].activeGroup=Ec(e,t);i[e].activeTrack=Ic[e](e,t);i[e].onGroupChanged=Tc(e,t);i[e].onTrackChanged=Sc(e,t)}));var s=i.AUDIO.activeGroup();var o=(s.filter((function(e){return e["default"]}))[0]||s[0]).id;i.AUDIO.tracks[o].enabled=true;i.AUDIO.onTrackChanged();r.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return i[e].onGroupChanged()}))}));var u=function e(){i.AUDIO.onTrackChanged();n.trigger({type:"usage",name:"hls-audio-change"})};n.audioTracks().addEventListener("change",u);n.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged);a.on("dispose",(function(){n.audioTracks().removeEventListener("change",u);n.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}));n.clearTracks("audio");for(var l in i.AUDIO.tracks){n.audioTracks().addTrack(i.AUDIO.tracks[l])}};var xc=function e(){var t={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ll,activeTrack:Ll,onGroupChanged:Ll,onTrackChanged:Ll}}));return t};var Pc=60*2;var Lc=void 0;var Dc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var Oc=function e(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]};var Nc=function e(t){var i=t.currentPlaylist,r=t.nextPlaylist,n=t.forwardBuffer,a=t.bufferLowWaterLine,s=t.duration,o=t.log;if(!r){ao.log.warn("We received no playlist to switch to. Please check your stream.");return false}if(!i.endList){return true}if(s<Ol.MAX_BUFFER_LOW_WATER_LINE){return true}if(r.attributes.BANDWIDTH<i.attributes.BANDWIDTH){return true}if(n>=a){return true}return false};var Rc=function(e){po(t,e);function t(e){co(this,t);var i=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var r=e.url,n=e.handleManifestRedirects,a=e.withCredentials,s=e.tech,o=e.bandwidth,u=e.externHls,l=e.useCueTags,c=e.blacklistDuration,f=e.enableLowInitialPlaylist,h=e.cacheEncryptionKeys,d=e.sourceType;if(!r){throw new Error("A non-empty playlist URL is required")}Lc=u;i.withCredentials=a;i.tech_=s;i.hls_=s.hls;i.sourceType_=d;i.useCueTags_=l;i.blacklistDuration=c;i.enableLowInitialPlaylist=f;if(i.useCueTags_){i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues");i.cueTagsTrack_.inBandMetadataTrackDispatchType=""}i.requestOptions_={withCredentials:a,handleManifestRedirects:n,timeout:null};i.mediaTypes_=xc();i.mediaSource=new ao.MediaSource;i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_.bind(i));i.seekable_=ao.createTimeRanges();i.hasPlayed_=false;i.syncController_=new mc(e);i.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;i.decrypter_=new gc;i.inbandTextTracks_={};var p={hls:i.hls_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function e(){return i.seekable()},seeking:function e(){return i.tech_.seeking()},duration:function e(){return i.mediaSource.duration},hasPlayed:function e(){return i.hasPlayed_},goalBufferLength:function e(){return i.goalBufferLength()},bandwidth:o,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:h};i.masterPlaylistLoader_=i.sourceType_==="dash"?new xl(r,i.hls_,i.requestOptions_):new Ao(r,i.hls_,i.requestOptions_);i.setupMasterPlaylistLoaderListeners_();i.mainSegmentLoader_=new uc(ao.mergeOptions(p,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),e);i.audioSegmentLoader_=new uc(ao.mergeOptions(p,{loaderType:"audio"}),e);i.subtitleSegmentLoader_=new fc(ao.mergeOptions(p,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),e);i.setupSegmentLoaderListeners_();Dc.forEach((function(e){i[e+"_"]=Oc.bind(i,e)}));i.logger_=Pl("MPC");i.masterPlaylistLoader_.load();return i}fo(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function e(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var e=t.masterPlaylistLoader_.media();var i=e.targetDuration*1.5*1e3;if(Qo(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=i}if(e.endList&&t.tech_.preload()!=="none"){t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load()}Ac({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)});t.triggerPresenceUsage_(t.master(),e);try{t.setupSourceBuffers_()}catch(e){ao.log.warn("Failed to create SourceBuffers",e);return t.mediaSource.endOfStream("decode")}t.setupFirstPlay();if(!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()){t.trigger("selectedinitialmedia")}else{t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){t.trigger("selectedinitialmedia")}))}}));this.masterPlaylistLoader_.on("loadedplaylist",(function(){var e=t.masterPlaylistLoader_.media();if(!e){t.excludeUnsupportedVariants_();var i=void 0;if(t.enableLowInitialPlaylist){i=t.selectInitialPlaylist()}if(!i){i=t.selectPlaylist()}t.initialMedia_=i;t.masterPlaylistLoader_.media(t.initialMedia_);return}if(t.useCueTags_){t.updateAdCues_(e)}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.updateDuration();if(!t.tech_.paused()){t.mainSegmentLoader_.load();if(t.audioSegmentLoader_){t.audioSegmentLoader_.load()}}if(!e.endList){var r=function e(){var i=t.seekable();if(i.length!==0){t.mediaSource.addSeekableRange_(i.start(0),i.end(0))}};if(t.duration()!==Infinity){var n=function e(){if(t.duration()===Infinity){r()}else{t.tech_.one("durationchange",e)}};t.tech_.one("durationchange",n)}else{r()}}}));this.masterPlaylistLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}));this.masterPlaylistLoader_.on("mediachanging",(function(){t.mainSegmentLoader_.abort();t.mainSegmentLoader_.pause()}));this.masterPlaylistLoader_.on("mediachange",(function(){var e=t.masterPlaylistLoader_.media();var i=e.targetDuration*1.5*1e3;if(Qo(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=i}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load();t.tech_.trigger({type:"mediachange",bubbles:true})}));this.masterPlaylistLoader_.on("playlistunchanged",(function(){var e=t.masterPlaylistLoader_.media();var i=t.stuckAtPlaylistEnd_(e);if(i){t.blacklistCurrentPlaylist({message:"Playlist no longer updating."});t.tech_.trigger("playliststuck")}}));this.masterPlaylistLoader_.on("renditiondisabled",(function(){t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}));this.masterPlaylistLoader_.on("renditionenabled",(function(){t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))}},{key:"triggerPresenceUsage_",value:function e(t,i){var r=t.mediaGroups||{};var n=true;var a=Object.keys(r.AUDIO);for(var s in r.AUDIO){for(var o in r.AUDIO[s]){var u=r.AUDIO[s][o];if(!u.uri){n=false}}}if(n){this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(r.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(Lc.Playlist.isAes(i)){this.tech_.trigger({type:"usage",name:"hls-aes"})}if(Lc.Playlist.isFmp4(i)){this.tech_.trigger({type:"usage",name:"hls-fmp4"})}if(a.length&&Object.keys(r.AUDIO[a[0]]).length>1){this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}}},{key:"setupSegmentLoaderListeners_",value:function e(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var e=t.selectPlaylist();var i=t.masterPlaylistLoader_.media();var r=t.tech_.buffered();var n=r.length?r.end(r.length-1)-t.tech_.currentTime():0;var a=t.bufferLowWaterLine();if(Nc({currentPlaylist:i,nextPlaylist:e,forwardBuffer:n,bufferLowWaterLine:a,duration:t.duration(),log:t.logger_})){t.masterPlaylistLoader_.media(e)}t.tech_.trigger("bandwidthupdate")}));this.mainSegmentLoader_.on("progress",(function(){t.trigger("progress")}));this.mainSegmentLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}));this.mainSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()}));this.mainSegmentLoader_.on("timestampoffset",(function(){t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}));this.audioSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()}));this.mainSegmentLoader_.on("ended",(function(){t.onEndOfStream()}));this.mainSegmentLoader_.on("earlyabort",(function(){t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the "+"request without rebuffering."},Pc)}));this.mainSegmentLoader_.on("reseteverything",(function(){t.tech_.trigger("hls-reset")}));this.mainSegmentLoader_.on("segmenttimemapping",(function(e){t.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}));this.audioSegmentLoader_.on("ended",(function(){t.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function e(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function e(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}}},{key:"smoothQualityChange_",value:function e(){var t=this.selectPlaylist();if(t!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(t);this.mainSegmentLoader_.resetLoader()}}},{key:"fastQualityChange_",value:function e(){var t=this;var i=this.selectPlaylist();if(i===this.masterPlaylistLoader_.media()){return}this.masterPlaylistLoader_.media(i);this.mainSegmentLoader_.resetEverything((function(){if(ao.browser.IE_VERSION||ao.browser.IS_EDGE){t.tech_.setCurrentTime(t.tech_.currentTime()+.04)}else{t.tech_.setCurrentTime(t.tech_.currentTime())}}))}},{key:"play",value:function e(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.tech_.setCurrentTime(0)}if(this.hasPlayed_){this.load()}var t=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<t.start(0)){return this.tech_.setCurrentTime(t.end(t.length-1))}}}},{key:"setupFirstPlay",value:function e(){var t=this;var i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_){return false}if(!i.endList){var r=this.seekable();if(!r.length){return false}if(ao.browser.IE_VERSION&&this.tech_.readyState()===0){this.tech_.one("loadedmetadata",(function(){t.trigger("firstplay");t.tech_.setCurrentTime(r.end(0));t.hasPlayed_=true}));return false}this.trigger("firstplay");this.tech_.setCurrentTime(r.end(0))}this.hasPlayed_=true;this.load();return true}},{key:"handleSourceOpen_",value:function e(){try{this.setupSourceBuffers_()}catch(e){ao.log.warn("Failed to create Source Buffers",e);return this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var t=this.tech_.play();if(typeof t!=="undefined"&&typeof t.then==="function"){t.then(null,(function(e){}))}}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function e(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo){t=t&&this.audioSegmentLoader_.ended_}else{t=this.audioSegmentLoader_.ended_}}if(!t){return}this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){ao.log.warn("Failed to call media source endOfStream",e)}}},{key:"stuckAtPlaylistEnd_",value:function e(t){var i=this.seekable();if(!i.length){return false}var r=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(r===null){return false}var n=Lc.Playlist.playlistEnd(t,r);var a=this.tech_.currentTime();var s=this.tech_.buffered();if(!s.length){return n-a<=wu}var o=s.end(s.length-1);return o-a<=wu&&n-o<=wu}},{key:"blacklistCurrentPlaylist",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=arguments[1];var r=void 0;var n=void 0;r=t.playlist||this.masterPlaylistLoader_.media();i=i||t.blacklistDuration||this.blacklistDuration;if(!r){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var a=this.masterPlaylistLoader_.master.playlists.filter(zo).length===1;var s=this.masterPlaylistLoader_.master.playlists;if(s.length===1){ao.log.warn("Problem encountered with the current "+"HLS playlist. Trying again since it is the only playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(a)}if(a){ao.log.warn("Removing all playlists from the blacklist because the last "+"rendition is about to be blacklisted.");s.forEach((function(e){if(e.excludeUntil!==Infinity){delete e.excludeUntil}}));this.tech_.trigger("retryplaylist")}r.excludeUntil=Date.now()+i*1e3;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});n=this.selectPlaylist();ao.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(n,a)}},{key:"pauseLoading",value:function e(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause()}}},{key:"setCurrentTime",value:function e(t){var i=Eu(this.tech_.buffered(),t);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}if(i&&i.length){return t}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()}},{key:"duration",value:function e(){if(!this.masterPlaylistLoader_){return 0}if(this.mediaSource){return this.mediaSource.duration}return Lc.Playlist.duration(this.masterPlaylistLoader_.media())}},{key:"seekable",value:function e(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function e(){var t=void 0;if(!this.masterPlaylistLoader_){return}var i=this.masterPlaylistLoader_.media();if(!i){return}var r=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(r===null){return}var n=this.masterPlaylistLoader_.master.suggestedPresentationDelay;var a=Lc.Playlist.seekable(i,r,n);if(a.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){i=this.mediaTypes_.AUDIO.activePlaylistLoader.media();r=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(r===null){return}t=Lc.Playlist.seekable(i,r,n);if(t.length===0){return}}var s=void 0;var o=void 0;if(this.seekable_&&this.seekable_.length){s=this.seekable_.end(0);o=this.seekable_.start(0)}if(!t){this.seekable_=a}else if(t.start(0)>a.end(0)||a.start(0)>t.end(0)){this.seekable_=a}else{this.seekable_=ao.createTimeRanges([[t.start(0)>a.start(0)?t.start(0):a.start(0),t.end(0)<a.end(0)?t.end(0):a.end(0)]])}if(this.seekable_&&this.seekable_.length){if(this.seekable_.end(0)===s&&this.seekable_.start(0)===o){return}}this.logger_("seekable updated ["+xu(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}},{key:"updateDuration",value:function e(){var t=this;var i=this.mediaSource.duration;var r=Lc.Playlist.duration(this.masterPlaylistLoader_.media());var n=this.tech_.buffered();var a=function e(){t.logger_("Setting duration from "+t.mediaSource.duration+" => "+r);try{t.mediaSource.duration=r}catch(e){ao.log.warn("Failed to set media source duration",e)}t.tech_.trigger("durationchange");t.mediaSource.removeEventListener("sourceopen",e)};if(n.length>0){r=Math.max(r,n.end(n.length-1))}if(i!==r){if(this.mediaSource.readyState!=="open"){this.mediaSource.addEventListener("sourceopen",a)}else{a()}}}},{key:"dispose",value:function e(){var t=this;this.trigger("dispose");if(this.decrypter_){this.decrypter_.terminate()}this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach((function(e){var i=t.mediaTypes_[e].groups;for(var r in i){i[r].forEach((function(e){if(e.playlistLoader){e.playlistLoader.dispose()}}))}}));this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();this.off();if(this.mediaSource.dispose){this.mediaSource.dispose()}}},{key:"master",value:function e(){return this.masterPlaylistLoader_.master}},{key:"media",value:function e(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function e(){var t=this.masterPlaylistLoader_.media();var i=void 0;if(!t||this.mediaSource.readyState!=="open"){return}i=nl(this.masterPlaylistLoader_.master,t);if(i.length<1){this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri;return this.mediaSource.endOfStream("decode")}this.configureLoaderMimeTypes_(i);this.excludeIncompatibleVariants_(t)}},{key:"configureLoaderMimeTypes_",value:function e(t){var i=t.length>1&&t[0].indexOf(",")===-1&&t[0]!==t[1]?new ao.EventTarget:null;this.mainSegmentLoader_.mimeType(t[0],i);if(t[1]){this.audioSegmentLoader_.mimeType(t[1],i)}}},{key:"excludeUnsupportedVariants_",value:function e(){this.master().playlists.forEach((function(e){if(e.attributes.CODECS&&n.a.MediaSource&&n.a.MediaSource.isTypeSupported&&!n.a.MediaSource.isTypeSupported('video/mp4; codecs="'+Zu(e.attributes.CODECS)+'"')){e.excludeUntil=Infinity}}))}},{key:"excludeIncompatibleVariants_",value:function e(t){var i=2;var r=null;var n=void 0;if(t.attributes.CODECS){n=Ju(t.attributes.CODECS);r=n.videoCodec;i=n.codecCount}this.master().playlists.forEach((function(e){var t={codecCount:2,videoCodec:null};if(e.attributes.CODECS){t=Ju(e.attributes.CODECS)}if(t.codecCount!==i){e.excludeUntil=Infinity}if(t.videoCodec!==r){e.excludeUntil=Infinity}}))}},{key:"updateAdCues_",value:function e(t){var i=0;var r=this.seekable();if(r.length){i=r.start(0)}dc(t,this.cueTagsTrack_,i)}},{key:"goalBufferLength",value:function e(){var t=this.tech_.currentTime();var i=Ol.GOAL_BUFFER_LENGTH;var r=Ol.GOAL_BUFFER_LENGTH_RATE;var n=Math.max(i,Ol.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+t*r,n)}},{key:"bufferLowWaterLine",value:function e(){var t=this.tech_.currentTime();var i=Ol.BUFFER_LOW_WATER_LINE;var r=Ol.BUFFER_LOW_WATER_LINE_RATE;var n=Math.max(i,Ol.MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+t*r,n)}}]);return t}(ao.EventTarget);var Uc=function e(t,i,r){return function(e){var n=t.master.playlists[i];var a=Wo(n);var s=zo(n);if(typeof e==="undefined"){return s}if(e){delete n.disabled}else{n.disabled=true}if(e!==s&&!a){r();if(e){t.trigger("renditionenabled")}else{t.trigger("renditiondisabled")}}return e}};var Mc=function e(t,i,r){co(this,e);var n=t.masterPlaylistController_,a=t.options_.smoothQualityChange;var s=a?"smooth":"fast";var o=n[s+"QualityChange_"].bind(n);if(i.attributes.RESOLUTION){var u=i.attributes.RESOLUTION;this.width=u.width;this.height=u.height}this.bandwidth=i.attributes.BANDWIDTH;this.id=r;this.enabled=Uc(t.playlists,i.id,o)};var Bc=function e(t){var i=t.playlists;t.representations=function(){if(!i||!i.master||!i.master.playlists){return[]}return i.master.playlists.filter((function(e){return!Wo(e)})).map((function(e,i){return new Mc(t,e,e.id)}))}};var jc=["seeking","seeked","pause","playing","error"];var Fc=function(){function e(t){var i=this;co(this,e);this.tech_=t.tech;this.seekable=t.seekable;this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow;this.media=t.media;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=Pl("PlaybackWatcher");this.logger_("initialize");var r=function e(){return i.monitorCurrentTime_()};var a=function e(){return i.techWaiting_()};var s=function e(){return i.cancelTimer_()};var o=function e(){return i.fixesBadSeeks_()};this.tech_.on("seekablechanged",o);this.tech_.on("waiting",a);this.tech_.on(jc,s);this.tech_.on("canplay",r);this.dispose=function(){i.logger_("dispose");i.tech_.off("seekablechanged",o);i.tech_.off("waiting",a);i.tech_.off(jc,s);i.tech_.off("canplay",r);if(i.checkCurrentTimeTimeout_){n.a.clearTimeout(i.checkCurrentTimeTimeout_)}i.cancelTimer_()}}fo(e,[{key:"monitorCurrentTime_",value:function e(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){n.a.clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=n.a.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function e(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var t=this.tech_.currentTime();var i=this.tech_.buffered();if(this.lastRecordedTime===t&&(!i.length||t+wu>=i.end(i.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else if(t===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=t}}},{key:"cancelTimer_",value:function e(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null}},{key:"fixesBadSeeks_",value:function e(){var t=this.tech_.seeking();if(!t){return false}var i=this.seekable();var r=this.tech_.currentTime();var n=this.afterSeekableWindow_(i,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow);var a=void 0;if(n){var s=i.end(i.length-1);a=s}if(this.beforeSeekableWindow_(i,r)){var o=i.start(0);a=o+wu}if(typeof a!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+r+" with "+("seekable range "+xu(i)+". Seeking to ")+(a+"."));this.tech_.setCurrentTime(a);return true}return false}},{key:"waiting_",value:function e(){if(this.techWaiting_()){return}var t=this.tech_.currentTime();var i=this.tech_.buffered();var r=Eu(i,t);if(r.length&&t+3<=r.end(0)){this.cancelTimer_();this.tech_.setCurrentTime(t);this.logger_("Stopped at "+t+" while inside a buffered region "+("["+r.start(0)+" -> "+r.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},{key:"techWaiting_",value:function e(){var t=this.seekable();var i=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(t,i)){var r=t.end(t.length-1);this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+r));this.cancelTimer_();this.tech_.setCurrentTime(r);this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var n=this.tech_.buffered();var a=Iu(n,i);if(this.videoUnderflow_(a,n,i)){this.cancelTimer_();this.tech_.setCurrentTime(i);this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}if(a.length>0){var s=a.start(0)-i;this.logger_("Stopped at "+i+", setting timer for "+s+", seeking "+("to "+a.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),s*1e3,i);return true}return false}},{key:"afterSeekableWindow_",value:function e(t,i,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!t.length){return false}var a=t.end(t.length-1)+wu;var s=!r.endList;if(s&&n){a=t.end(t.length-1)+r.targetDuration*3}if(i>a){return true}return false}},{key:"beforeSeekableWindow_",value:function e(t,i){if(t.length&&t.start(0)>0&&i<t.start(0)-wu){return true}return false}},{key:"videoUnderflow_",value:function e(t,i,r){if(t.length===0){var n=this.gapFromVideoUnderflow_(i,r);if(n){this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". "+("Seeking to current time "+r));return true}}return false}},{key:"skipTheGap_",value:function e(t){var i=this.tech_.buffered();var r=this.tech_.currentTime();var n=Iu(i,r);this.cancelTimer_();if(n.length===0||r!==t){return}this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",t,"nextRange start:",n.start(0));this.tech_.setCurrentTime(n.start(0)+ku);this.tech_.trigger({type:"usage",name:"hls-gap-skip"})}},{key:"gapFromVideoUnderflow_",value:function e(t,i){var r=Au(t);for(var n=0;n<r.length;n++){var a=r.start(n);var s=r.end(n);if(i-a<4&&i-a>2){return{start:a,end:s}}}return null}}]);return e}();var Hc={errorInterval:30,getSource:function e(t){var i=this.tech({IWillNotUseThisInPlugins:true});var r=i.currentSource_;return t(r)}};var Vc=function e(t,i){var r=0;var n=0;var a=ao.mergeOptions(Hc,i);t.ready((function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var s=function e(){if(n){t.currentTime(n)}};var o=function e(i){if(i===null||i===undefined){return}n=t.duration()!==Infinity&&t.currentTime()||0;t.one("loadedmetadata",s);t.src(i);t.trigger({type:"usage",name:"hls-error-reload"});t.play()};var u=function e(){if(Date.now()-r<a.errorInterval*1e3){t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!=="function"){ao.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}r=Date.now();return a.getSource.call(t,o)};var l=function e(){t.off("loadedmetadata",s);t.off("error",u);t.off("dispose",e)};var c=function i(r){l();e(t,r)};t.on("error",u);t.on("dispose",l);t.reloadSourceOnError=c};var qc=function e(t){Vc(this,t)};var Wc="1.13.2";var zc={PlaylistLoader:Ao,Playlist:Jo,Decrypter:vt,AsyncStream:ht,decrypt:pt,utils:du,STANDARD_PLAYLIST_SELECTOR:Ql,INITIAL_PLAYLIST_SELECTOR:Zl,comparePlaylistBandwidth:Kl,comparePlaylistResolution:Yl,xhr:tu()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(zc,e,{get:function t(){ao.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");return Ol[e]},set:function t(i){ao.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");if(typeof i!=="number"||i<0){ao.log.warn("value of Hls."+e+" must be greater than or equal to 0");return}Ol[e]=i}})}));var Gc="videojs-vhs";var Xc=function e(t){var i=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(i.test(t)){return"hls"}var r=/^application\/dash\+xml/i;if(r.test(t)){return"dash"}return null};var Kc=function e(t,i){var r=i.media();var n=-1;for(var a=0;a<t.length;a++){if(t[a].id===r.id){n=a;break}}t.selectedIndex_=n;t.trigger({selectedIndex:n,type:"change"})};var Yc=function e(t,i){i.representations().forEach((function(e){t.addQualityLevel(e)}));Kc(t,i.playlists)};zc.canPlaySource=function(){return ao.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var $c=function e(t,i,r){if(!t){return t}var n=void 0;var a=void 0;if(r.mimeType_){n=i.mimeType_;a=r.mimeType_}else{var s=al(i.mimeType_);var o=s.parameters.codecs.split(",");var u=void 0;var l=void 0;o.forEach((function(e){e=e.trim();if(sl(e)){u=e}else if(ol(e)){l=e}}));n=s.type+'; codecs="'+l+'"';a=s.type.replace("video","audio")+'; codecs="'+u+'"'}var c={};var f=i.playlist_;for(var h in t){c[h]={audioContentType:a,videoContentType:n};if(f.contentProtection&&f.contentProtection[h]&&f.contentProtection[h].pssh){c[h].pssh=f.contentProtection[h].pssh}if(typeof t[h]==="string"){c[h].url=t[h]}}return ao.mergeOptions(t,c)};var Qc=function e(t){var i=t.masterPlaylistController_.mainSegmentLoader_;var r=t.masterPlaylistController_.audioSegmentLoader_;var n=ao.players[t.tech_.options_.playerId];if(n.eme){var a=$c(t.source_.keySystems,i,r);if(a){n.currentSource().keySystems=a;if(!(ao.browser.IE_VERSION===11)&&n.eme.initializeMediaKeys){n.eme.initializeMediaKeys()}}}};var Jc=function e(){if(!window.localStorage){return null}var t=window.localStorage.getItem(Gc);if(!t){return null}try{return JSON.parse(t)}catch(e){return null}};var Zc=function e(t){if(!window.localStorage){return false}var i=Jc();i=i?ao.mergeOptions(i,t):t;try{window.localStorage.setItem(Gc,JSON.stringify(i))}catch(e){return false}return i};zc.supportsNativeHls=function(){var e=s.a.createElement("video");if(!ao.getTech("Html5").isSupported()){return false}var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}();zc.supportsNativeDash=function(){if(!ao.getTech("Html5").isSupported()){return false}return/maybe|probably/i.test(s.a.createElement("video").canPlayType("application/dash+xml"))}();zc.supportsTypeNatively=function(e){if(e==="hls"){return zc.supportsNativeHls}if(e==="dash"){return zc.supportsNativeDash}return false};zc.isSupported=function(){return ao.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var ef=ao.getComponent("Component");var tf=function(e){po(t,e);function t(e,i,r){co(this,t);var n=vo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r.hls));if(i.options_&&i.options_.playerId){var a=ao(i.options_.playerId);if(!a.hasOwnProperty("hls")){Object.defineProperty(a,"hls",{get:function e(){ao.log.warn("player.hls is deprecated. Use player.tech().hls instead.");i.trigger({type:"usage",name:"hls-player-access"});return n},configurable:true})}a.vhs=n;a.dash=n;n.player_=a}n.tech_=i;n.source_=e;n.stats={};n.ignoreNextSeekingEvent_=false;n.setOptions_();if(n.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks){i.overrideNativeAudioTracks(true);i.overrideNativeVideoTracks(true)}else if(n.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. "+"See https://git.io/vMpjB")}n.on(s.a,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=s.a.fullscreenElement||s.a.webkitFullscreenElement||s.a.mozFullScreenElement||s.a.msFullscreenElement;if(t&&t.contains(n.tech_.el())){n.masterPlaylistController_.smoothQualityChange_()}}));n.on(n.tech_,"seeking",(function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=false;return}this.setCurrentTime(this.tech_.currentTime())}));n.on(n.tech_,"error",(function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}}));n.on(n.tech_,"play",n.play);return n}fo(t,[{key:"setOptions_",value:function e(){var t=this;this.options_.withCredentials=this.options_.withCredentials||false;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||false;this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions===false?false:true;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||false;this.options_.smoothQualityChange=this.options_.smoothQualityChange||false;this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!=="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||false;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||false;if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){if(this.options_.useBandwidthFromLocalStorage){var i=Jc();if(i&&i.bandwidth){this.options_.bandwidth=i.bandwidth;this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})}if(i&&i.throughput){this.options_.throughput=i.throughput;this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"})}}}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=Ol.INITIAL_BANDWIDTH}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ol.INITIAL_BANDWIDTH;["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach((function(e){if(typeof t.source_[e]!=="undefined"){t.options_[e]=t.source_[e]}}));this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function e(t,i){var r=this;if(!t){return}this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=zc;this.options_.sourceType=Xc(i);this.options_.seekTo=function(e){r.tech_.setCurrentTime(e)};this.masterPlaylistController_=new Rc(this.options_);this.playbackWatcher_=new Fc(ao.mergeOptions(this.options_,{seekable:function e(){return r.seekable()},media:function e(){return r.masterPlaylistController_.media()}}));this.masterPlaylistController_.on("error",(function(){var e=ao.players[r.tech_.options_.playerId];e.error(r.masterPlaylistController_.error)}));this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):zc.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=zc.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function e(){return this.masterPlaylistController_.selectPlaylist},set:function e(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function e(){var t=1/(this.bandwidth||1);var i=void 0;if(this.throughput>0){i=1/this.throughput}else{i=0}var r=Math.floor(1/(t+i));return r},set:function e(){ao.log.error('The "systemBandwidth" property is read-only')}}});if(this.options_.bandwidth){this.bandwidth=this.options_.bandwidth}if(this.options_.throughput){this.throughput=this.options_.throughput}Object.defineProperties(this.stats,{bandwidth:{get:function e(){return r.bandwidth||0},enumerable:true},mediaRequests:{get:function e(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function e(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function e(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function e(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function e(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function e(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function e(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true},buffered:{get:function e(){return Lu(r.tech_.buffered())},enumerable:true},currentTime:{get:function e(){return r.tech_.currentTime()},enumerable:true},currentSource:{get:function e(){return r.tech_.currentSource_},enumerable:true},currentTech:{get:function e(){return r.tech_.name_},enumerable:true},duration:{get:function e(){return r.tech_.duration()},enumerable:true},master:{get:function e(){return r.playlists.master},enumerable:true},playerDimensions:{get:function e(){return r.tech_.currentDimensions()},enumerable:true},seekable:{get:function e(){return Lu(r.tech_.seekable())},enumerable:true},timestamp:{get:function e(){return Date.now()},enumerable:true},videoPlaybackQuality:{get:function e(){return r.tech_.getVideoPlaybackQuality()},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.tech_.on("bandwidthupdate",(function(){if(r.options_.useBandwidthFromLocalStorage){Zc({bandwidth:r.bandwidth,throughput:Math.round(r.throughput)})}}));this.masterPlaylistController_.on("selectedinitialmedia",(function(){Bc(r);Qc(r)}));this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")}));this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=true}));this.setupQualityLevels_();if(!this.tech_.el()){return}this.tech_.src(ao.URL.createObjectURL(this.masterPlaylistController_.mediaSource))}},{key:"setupQualityLevels_",value:function e(){var t=this;var i=ao.players[this.tech_.options_.playerId];if(!i||!i.qualityLevels||this.qualityLevels_){return}this.qualityLevels_=i.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",(function(){Yc(t.qualityLevels_,t)}));this.playlists.on("mediachange",(function(){Kc(t.qualityLevels_,t.playlists)}))}},{key:"play",value:function e(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function e(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function e(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function e(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function e(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}if(this.player_){delete this.player_.vhs;delete this.player_.dash;delete this.player_.hls}if(this.tech_&&this.tech_.hls){delete this.tech_.hls}ho(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function e(t,i){return Tu({playlist:this.masterPlaylistController_.media(),time:t,callback:i})}},{key:"seekToProgramTime",value:function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:2;return Su({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}}]);return t}(ef);var rf={name:"videojs-http-streaming",VERSION:Wc,canHandleSource:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=ao.mergeOptions(ao.options,i);return rf.canPlayType(t.type,r)},handleSource:function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=ao.mergeOptions(ao.options,r);i.hls=new tf(t,i,n);i.hls.xhr=tu();i.hls.src(t.src,t.type);return i.hls},canPlayType:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=ao.mergeOptions(ao.options,i),n=r.hls.overrideNative;var a=Xc(t);var s=a&&(!zc.supportsTypeNatively(a)||n);return s?"maybe":""}};if(typeof ao.MediaSource==="undefined"||typeof ao.URL==="undefined"){ao.MediaSource=_l;ao.URL=bl}if(_l.supportsNativeMediaSources()){ao.getTech("Html5").registerSourceHandler(rf,0)}ao.HlsHandler=tf;ao.HlsSourceHandler=rf;ao.Hls=zc;if(!ao.use){ao.registerComponent("Hls",zc)}ao.options.hls=ao.options.hls||{};if(ao.registerPlugin){ao.registerPlugin("reloadSourceOnError",qc)}else{ao.plugin("reloadSourceOnError",qc)}var nf=t["a"]=ao}}]);
//# sourceMappingURL=vendors~video-player1.bundle.js.map