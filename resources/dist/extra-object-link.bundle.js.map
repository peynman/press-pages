{"version":3,"sources":["webpack:///./resources/js/Lib/online-academy/Extras/ObjectLinksCard.vue?1383","webpack:///resources/js/Lib/online-academy/Extras/ObjectLinksCard.vue","webpack:///./resources/js/Lib/online-academy/Extras/ObjectLinksCard.vue?ab93","webpack:///./resources/js/Lib/online-academy/Extras/ObjectLinksCard.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","field","_v","_s","label","_e","Object","keys","links","length","model","value","callback","$$v","selected","expression","_t","_l","link","key","id","directives","name","rawName","icon","title","extraComponent","_b","tag","class","props","fields","options","devalue","$set","VCard","VCardText","VIcon","VProgressLinear","VSystemBar","VTab","VTabItem","VTabs","VTabsSlider"],"mappings":"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","file":"extra-object-link.bundle.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"ma-1\",attrs:{\"flat\":\"\",\"background-color\":\"grey lighten-2\"}},[(_vm.field.label)?_c('v-system-bar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[_vm._v(_vm._s(_vm.field.label))]):_vm._e(),_vm._v(\" \"),(Object.keys(_vm.field.links).length == 0)?_c('span',{staticClass:\"caption\"},[_vm._v(\"امکانات بیشتری برای این رکورد موجود نیست\")]):_vm._e(),_vm._v(\" \"),(Object.keys(_vm.field.links).length > 0)?_c('v-tabs',{attrs:{\"optional\":\"\",\"dense\":\"\",\"icons-and-text\":\"\",\"centered\":\"\",\"background-color\":\"grey lighten-2\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},[_c('v-tabs-slider'),_vm._v(\" \"),_c('v-tab',[_vm._t(\"prepend\")],2),_vm._v(\" \"),_vm._l((_vm.field.links),function(link){return _c('v-tab',{key:(_vm.id + \"-link-\" + (link.id)),staticClass:\"no-letter-spacing\",attrs:{\"href\":(\"#\" + _vm.id + \"-link-\" + (link.id))}},[_c('div',{staticClass:\"d-flex flex-row\"},[_c('div',{staticClass:\"d-flex flex-column\"},[_c('v-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(link.icon),expression:\"link.icon\"}]},[_vm._v(_vm._s(link.icon))]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(link.title),expression:\"link.title\"}],staticClass:\"caption\"},[_vm._v(_vm._s(link.title))])],1),_vm._v(\" \"),(link.extraComponent)?_c(link.extraComponent.component,_vm._b({tag:\"component\",class:link.extraComponent.class},'component',link.extraComponent.props,false)):_vm._e()],1)])}),_vm._v(\" \"),_c('v-tab',{attrs:{\"disabled\":\"\"}},[_vm._t(\"append\")],2),_vm._v(\" \"),_vm._l((_vm.field.links),function(link){return _c('v-tab-item',{key:(_vm.id + \"-link-content-\" + (link.id)),attrs:{\"id\":(_vm.id + \"-link-\" + (link.id))}},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"ma-1 pa-0\",attrs:{\"background-color\":\"white\"}},[_c('v-progress-linear',{directives:[{name:\"show\",rawName:\"v-show\",value:(link.loading),expression:\"link.loading\"}],attrs:{\"color\":\"primary\",\"indeterminate\":\"\"}}),_vm._v(\" \"),_c('vf-fields-renderer',{attrs:{\"id\":(_vm.id + \"-links-\" + (link.id)),\"fields\":link.fields,\"options\":link.options,\"value\":link.devalue},model:{value:(link.devalue),callback:function ($$v) {_vm.$set(link, \"devalue\", $$v)},expression:\"link.devalue\"}})],1)],1)],1)})],2):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card class=\"ma-1\" flat background-color=\"grey lighten-2\">\n    <v-system-bar dark color=\"primary\" v-if=\"field.label\">{{ field.label }}</v-system-bar>\n    <span class=\"caption\" v-if=\"Object.keys(field.links).length == 0\">امکانات بیشتری برای این رکورد موجود نیست</span>\n    <v-tabs v-if=\"Object.keys(field.links).length > 0\" optional dense icons-and-text centered background-color=\"grey lighten-2\" v-model=\"selected\">\n      <v-tabs-slider/>\n      <v-tab>\n        <slot name=\"prepend\"></slot>\n      </v-tab>\n      <v-tab\n        class=\"no-letter-spacing\"\n        v-for=\"(link) in field.links\"\n        :key=\"`${id}-link-${link.id}`\"\n        :href=\"`#${id}-link-${link.id}`\"\n      >\n        <div class=\"d-flex flex-row\">\n            <div class=\"d-flex flex-column\">\n                <v-icon v-show=\"link.icon\">{{ link.icon }}</v-icon>\n                <span v-show=\"link.title\" class=\"caption\">{{ link.title }}</span>\n            </div>\n            <component\n                v-if=\"link.extraComponent\"\n                v-bind=\"link.extraComponent.props\"\n                :is=\"link.extraComponent.component\"\n                :class=\"link.extraComponent.class\"\n            >\n            </component>\n        </div>\n      </v-tab>\n      <v-tab disabled>\n        <slot name=\"append\"></slot>\n      </v-tab>\n      <v-tab-item\n        v-for=\"(link) in field.links\"\n        :key=\"`${id}-link-content-${link.id}`\"\n        :id=\"`${id}-link-${link.id}`\"\n      >\n        <v-card flat>\n          <v-card-text class=\"ma-1 pa-0\" background-color=\"white\" >\n              <v-progress-linear color=\"primary\" v-show=\"link.loading\" indeterminate></v-progress-linear>\n              <vf-fields-renderer\n                :id=\"`${id}-links-${link.id}`\"\n                :fields=\"link.fields\"\n                :options=\"link.options\"\n                :value=\"link.devalue\"\n                v-model=\"link.devalue\"\n               ></vf-fields-renderer>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n    </v-tabs>\n  </v-card>\n</template>\n\n<script>\nimport {\n  VDialog,\n  VBtn,\n  VIcon,\n  VCard,\n  VCardText,\n  VContainer\n} from \"vuetify/lib\";\nimport { EasyNestedObject } from './../../vuetify-formjson/Fields/mixins'\nimport FormJSONRenderer from \"./../../vuetify-formjson/Fields/FormJSONBuilder/generator\";\nimport clonedeep from \"lodash.clonedeep\";\n\nexport default {\n    mixins: [EasyNestedObject, FormJSONRenderer],\n    components: {\n        VDialog,\n        VBtn,\n        VIcon,\n        VCard,\n        VCardText,\n        VContainer\n    },\n    name: 'object-links-card',\n    props: {\n        id: String,\n        field: Object,\n    },\n    data: (vm) => ({\n        selected: -1,\n    }),\n    methods: {\n        getFormFromURL(link) {\n            if (link.url) {\n                console.log(link);\n                function mergeDeep(...objects) {\n                    const isObject = obj => obj && typeof obj === 'object';\n                    return objects.reduce((prev, obj) => {\n                        Object.keys(obj).forEach(key => {\n                        const pVal = prev[key];\n                        const oVal = obj[key];\n\n                        if (Array.isArray(pVal) && Array.isArray(oVal)) {\n                            prev[key] = pVal.concat(...oVal);\n                        }\n                        else if (isObject(pVal) && isObject(oVal)) {\n                            prev[key] = mergeDeep(pVal, oVal);\n                        }\n                        else {\n                            prev[key] = oVal;\n                        }\n                        });\n\n                        return prev;\n                    }, {});\n                }\n                const foundPage = (data) => {\n                    this.UpdatePageContent(\n                        data.body,\n                        data.options,\n                        data.sources\n                    );\n                    if (!this.$store.state.datatable_pages) {\n                        this.$store.state.datatable_pages = {}\n                    }\n                    this.$store.state.datatable_pages[link.url] = clonedeep(data);\n                    if (this.formSchema.fields['crud-datatable']) {\n                        this.formSchema.fields['crud-datatable']['hide-search'] = true;\n                        this.formSchema.fields['crud-datatable']['hide-create'] = true;\n                        this.formSchema.fields['crud-datatable']['hide-settings'] = true;\n                        this.formSchema.fields['crud-datatable']['hide-reports'] = true;\n                        this.formSchema.fields['crud-datatable']['hide-removable-filters'] = true;\n                        this.formSchema.fields['crud-datatable']['default-filters'] = link.filters\n                    }\n\n                    this.$nextTick(() => {\n                        link.loading = false\n                        link.fields = mergeDeep(this.formSchema.fields, link.schema?.fields ?? {})\n                        link.options = mergeDeep(this.formSchema.options, link.schema?.options ?? {})\n                        link.loaded = true\n                        this.formModel = link.devalue;\n                        this.$forceUpdate();\n                    });\n                }\n                if (this.$store.state.datatable_pages && this.$store.state.datatable_pages[link.url]) {\n                    foundPage(clonedeep(this.$store.state.datatable_pages[link.url]));\n                } else {\n                    link.loading = true;\n                    const host = this.$store.state.host;\n                    host.webRequest({\n                        method: \"GET\",\n                        url: link.url,\n                        headers: host.getWebAuthHeaders({\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\"\n                        })\n                    })\n                    .then(response => {\n                        foundPage(clonedeep(response.data))\n                    })\n                    .catch(err => {\n                        host.showSnack(err.message);\n                        link.loading = false;\n                    });\n                }\n            }\n        }\n    },\n    watch: {\n        selected () {\n            if (this.selected) {\n                let index = -1;\n                let selid = null;\n                let indexer = 0;\n                for (const prop in this.field.links) {\n                    const i = this.field.links[prop];\n                    if (i && i.id) {\n                        if (this.selected.endsWith(i.id)) { index = indexer; selid = i.id; }\n                    }\n                    indexer++;\n                }\n                if (index >= 0) {\n                    this.getFormFromURL(this.field.links[selid]);\n                }\n            }\n        }\n    },\n}\n</script>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ObjectLinksCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ObjectLinksCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ObjectLinksCard.vue?vue&type=template&id=fb40378e&\"\nimport script from \"./ObjectLinksCard.vue?vue&type=script&lang=js&\"\nexport * from \"./ObjectLinksCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VSystemBar } from 'vuetify/lib/components/VSystemBar';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsSlider } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VCard,VCardText,VIcon,VProgressLinear,VSystemBar,VTab,VTabItem,VTabs,VTabsSlider})\n"],"sourceRoot":""}