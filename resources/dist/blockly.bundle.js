(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{387:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this;var t=e.$createElement;var o=e._self._c||t;return o("div",{class:"vf-input vf-blockly-input d-flex flex-column "+(e.field.class?e.field.class:"")},[o("label",[e._v(e._s(e.field.label))]),e._v(" "),o("div",{ref:"blockArea",staticClass:"fill-height",staticStyle:{width:"100%","min-height":"500px",height:"100%"}},[o("div",{ref:"blockEditor"})])])};var l=[];var a=o(124);var s=o(128);var r=o.n(s);var n=o(152);var c={mixins:[a["d"]],name:"vf-blockly-input",props:{id:String,field:Object,value:[String,Array,Object]},data:function e(){return{ignoreChange:false,windowWidth:0,windowHeight:0}},methods:{onWindowResize:function e(t){var o=this.$refs.blockArea;var i=o;var l=0;var a=0;do{l+=i.offsetLeft;a+=i.offsetTop;i=i.offsetParent}while(i);var s=this.$refs.blockEditor;s.style.left=l+"px";s.style.top=a+"px";s.style.width=o.offsetWidth+"px";s.style.height=o.offsetHeight+"px";r.a.svgResize(this.blockEditor)},refreshSize:function e(){this.onWindowResize(null)},updateBlocks:function e(){if(this.value&&this.value!==""){try{r.a.Xml.clearWorkspaceAndLoadFromXml(r.a.Xml.textToDom(this.value),this.blockEditor)}catch(e){}}},pasteToWorkspace:function e(t){var o=r.a.Xml.textToDom(t);var i=r.a.Xml.domToBlock(o,this.blockEditor);console.log("domToWorkspace",o,i);r.a.Events.fire(new r.a.Events.Create(i));this.refreshSize()}},mounted:function e(){var t=this;var o=this.$refs.blockEditor;if(o){var i=Object(n["a"])(r.a,{blocks:this.field.blocks?this.field.blocks:null});this.blockEditor=r.a.inject(o,{toolbox:i,zoom:{controls:true,wheel:true,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2}});this.blockEditor.addChangeListener((function(e){if(e.element==="click"&&e.blockId){var o=t.blockEditor.getBlockById(e.blockId);var i=r.a.Xml.blockToDom(o);t.$emit("selection",r.a.Xml.domToText(i))}var l=r.a.Xml.workspaceToDom(t.blockEditor);t.devalue=r.a.Xml.domToText(l);t.$emit("input",t.devalue)}));if(this.value&&this.value!==""){try{r.a.Xml.clearWorkspaceAndLoadFromXml(r.a.Xml.textToDom(this.value),this.blockEditor)}catch(e){}}r.a.svgResize(this.blockEditor)}this.$nextTick((function(){window.addEventListener("resize",this.onWindowResize);this.onWindowResize()}))},beforeDestroy:function e(){window.removeEventListener("resize",this.onWindowResize)}};var d=c;var f=o(27);var v=Object(f["a"])(d,i,l,false,null,null,null);var h=t["default"]=v.exports}}]);