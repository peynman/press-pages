{"version":3,"sources":["webpack:///./resources/js/Lib/vuetify-formjson/Fields/FileUpload.vue?020a","webpack:///resources/js/Lib/vuetify-formjson/Fields/FileUpload.vue","webpack:///./resources/js/Lib/vuetify-formjson/Fields/FileUpload.vue?586f","webpack:///./resources/js/Lib/vuetify-formjson/Fields/FileUpload.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","class","field","staticClass","attrs","id","_v","_s","label","hint","_e","ref","loading","on","$event","startUpload","pauseUpload","_l","file","index","key","percent","status","name","type","size","files","length","VBtn","VIcon","VList","VListItem","VListItemAvatar","VListItemContent","VListItemSubtitle","VListItemTitle","VProgressCircular"],"mappings":"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","file":"file-upload.bundle.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"vf-input \" + (_vm.field.class ? _vm.field.class : 'd-flex flex-column mt-3'))},[_c('div',{staticClass:\"d-flex flex-row justify-space-between\",attrs:{\"id\":(_vm.id + \"-container\")}},[_c('label',[_vm._v(_vm._s(_vm.field.label))]),_vm._v(\" \"),(_vm.field.hint)?_c('v-list-item-subtitle',[_vm._v(\"\\n      \"+_vm._s(_vm.field.hint)+\"\\n    \")]):_vm._e(),_vm._v(\" \"),_c('div',[_c('v-btn',{ref:\"browse\",attrs:{\"id\":(_vm.id + \"-browse\"),\"text\":\"\",\"small\":\"\",\"color\":\"primary\",\"href\":\"javascript:;\",\"disabled\":_vm.loading}},[_vm._v(\"\\n        انتخاب فایل\\n      \")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\",\"color\":\"success\",\"disabled\":_vm.loading},on:{\"click\":function($event){return _vm.startUpload()}}},[_vm._v(\"\\n        ارسال فایل ها\\n      \")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\",\"color\":\"warning\",\"disabled\":!_vm.loading},on:{\"click\":function($event){return _vm.pauseUpload()}}},[_vm._v(\"\\n        توقف ارسال\\n      \")])],1)],1),_vm._v(\" \"),_c('v-list',{attrs:{\"dense\":\"\"}},[_vm._l((_vm.files),function(file,index){return _c('v-list-item',{key:(_vm.id + \"-file-\" + index)},[_c('v-list-item-avatar',{attrs:{\"size\":\"80\"}},[_c('v-progress-circular',{staticClass:\"ma-auto\",attrs:{\"value\":file.percent,\"size\":\"70\"}},[_c('div',{staticClass:\"d-flex flex-column justify-center alight-center\"},[(file.status === 2)?_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\",\"loading\":true}}):_vm._e(),_vm._v(\" \"),(file.status === 5)?_c('v-icon',{attrs:{\"color\":\"success\"}},[_vm._v(\"\\n              mdi-check-decagram\\n            \")]):_vm._e(),_vm._v(\"\\n            %\"+_vm._s(file.percent)+\"\\n          \")],1)])],1),_vm._v(\" \"),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(file.name))]),_vm._v(\" \"),_c('v-list-item-subtitle',[_c('strong',[_vm._v(\"Type\")]),_vm._v(\"\\n          \"+_vm._s(file.type)+\"\\n        \")]),_vm._v(\" \"),_c('v-list-item-subtitle',[_c('strong',[_vm._v(\"Size\")]),_vm._v(\"\\n          \"+_vm._s(file.size)+\" bytes\\n        \")])],1)],1)}),_vm._v(\" \"),(_vm.files.length === 0)?_c('v-list-item',[_c('v-list-item-title',[_vm._v(\"فایلی وجود ندرد\")])],1):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"`vf-input ${field.class ? field.class : 'd-flex flex-column mt-3'}`\">\n    <div\n      :id=\"`${id}-container`\"\n      class=\"d-flex flex-row justify-space-between\"\n    >\n      <label>{{ field.label }}</label>\n      <v-list-item-subtitle v-if=\"field.hint\">\n        {{ field.hint }}\n      </v-list-item-subtitle>\n      <div>\n        <v-btn\n          :id=\"`${id}-browse`\"\n          ref=\"browse\"\n          text\n          small\n          color=\"primary\"\n          href=\"javascript:;\"\n          :disabled=\"loading\"\n        >\n          انتخاب فایل\n        </v-btn>\n        <v-btn\n          text\n          small\n          color=\"success\"\n          :disabled=\"loading\"\n          @click=\"startUpload()\"\n        >\n          ارسال فایل ها\n        </v-btn>\n        <v-btn\n          text\n          small\n          color=\"warning\"\n          :disabled=\"!loading\"\n          @click=\"pauseUpload()\"\n        >\n          توقف ارسال\n        </v-btn>\n      </div>\n    </div>\n    <v-list dense>\n      <v-list-item\n        v-for=\"(file, index) in files\"\n        :key=\"`${id}-file-${index}`\"\n      >\n        <v-list-item-avatar size=\"80\">\n          <v-progress-circular\n            :value=\"file.percent\"\n            size=\"70\"\n            class=\"ma-auto\"\n          >\n            <div class=\"d-flex flex-column justify-center alight-center\">\n              <v-btn\n                v-if=\"file.status === 2\"\n                icon\n                small\n                :loading=\"true\"\n              />\n              <v-icon\n                v-if=\"file.status === 5\"\n                color=\"success\"\n              >\n                mdi-check-decagram\n              </v-icon>\n              %{{ file.percent }}\n            </div>\n          </v-progress-circular>\n        </v-list-item-avatar>\n        <v-list-item-content>\n          <v-list-item-title>{{ file.name }}</v-list-item-title>\n          <v-list-item-subtitle>\n            <strong>Type</strong>\n            {{ file.type }}\n          </v-list-item-subtitle>\n          <v-list-item-subtitle>\n            <strong>Size</strong>\n            {{ file.size }} bytes\n          </v-list-item-subtitle>\n        </v-list-item-content>\n      </v-list-item>\n      <v-list-item v-if=\"files.length === 0\">\n        <v-list-item-title>فایلی وجود ندرد</v-list-item-title>\n      </v-list-item>\n    </v-list>\n  </div>\n</template>\n\n<script>\nimport BaseComponent from \"./mixins\";\nimport plupload from \"plupload/js/plupload.dev\";\n\nexport default {\n    name: \"VfFileUploadInput\",\n    components: {},\n    mixins: [BaseComponent],\n    props: {\n        id: String,\n        field: Object,\n        value: [Object, String, Array, Number]\n    },\n    data: () => ({\n        uploader: null,\n        files: [],\n        loading: false,\n    }),\n    mounted() {\n        const host = this.$store.state.host;\n        const opt = {\n            url: this.field.url ? this.field.url : \"/api/file-uploads\",\n            method: \"POST\",\n            runtime: \"html5\",\n            headers: host.getWebAuthHeaders({}),\n            browse_button: window.document.getElementById(`${this.id}-browse`),\n            container: window.document.getElementById(`${this.id}-container`),\n            chunk_size: this.field.chunk_size ? this.field.chunk_size : \"1mb\",\n            max_retries: this.field.max_retries ? this.field.max_retries : 0,\n            filters: {\n                mime_types: this.field.filters\n                    ? this.field.filters\n                    : [{ title: \"Image\", extensions: \"jpg,png,jpeg\" }],\n                prevent_duplicates: this.field.prevent_duplicates\n                    ? this.field.prevent_duplicates\n                    : false,\n                max_file_size: this.field.max_file_size\n            },\n            init: {\n                PostInit: uploader => {\n                    this.$emit(\"init\", uploader);\n                },\n                FilesAdded: (up, files) => {\n                    if (this.field.singleFile) {\n                        this.files = files;\n                    } else {\n                        this.files.push(...files);\n                    }\n                    this.$emit(\"added\", up, files);\n                },\n                UploadProgress: (up, file) => {\n                    this.$emit(\"progress\", up, file);\n                },\n                FileUploaded: (up, file, result) => {\n                    this.$emit(\"uploaded\", up, file, result);\n                },\n                BeforeUpload: (up, file) => {\n                    this.uploader.settings.multipart_params = this.field.multipart_params;\n                    this.loading = true;\n                },\n                UploadComplete: (up, files) => {\n                    this.loading = false;\n                    this.$emit(\"finished\", up, files);\n                },\n                Error: (up, err) => {\n                    this.loading = false;\n                    this.uploader.stop();\n                    host.showSnack(err.message);\n                    if (err.response) {\n                        try {\n                            const json = JSON.parse(err.response);\n                            if (json && json.errors) {\n                                for (const err in json.errors) {\n                                    json.errors[err].forEach(e => {\n                                        host.showSnack(e);\n                                    });\n                                }\n                            }\n                        } catch (e) {}\n                    }\n                    this.$emit(\"error\", up, err);\n                }\n            }\n        };\n        this.uploader = new plupload.Uploader(opt);\n        this.uploader.init();\n    },\n    methods: {\n        startUpload() {\n            this.uploader.files.forEach((f) => {\n                if (f.status === plupload.FAILED) {\n                    f.status = plupload.STOPPED;\n                }\n            })\n            this.uploader.start();\n        },\n        pauseUpload() {\n            this.uploader.stop();\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FileUpload.vue?vue&type=template&id=04a6984c&\"\nimport script from \"./FileUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./FileUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VBtn,VIcon,VList,VListItem,VListItemAvatar,VListItemContent,VListItemSubtitle,VListItemTitle,VProgressCircular})\n"],"sourceRoot":""}