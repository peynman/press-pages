(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{w9jJ:function(t,e,i){"use strict";i.r(e);var n=i("I1Ao"),s=i("L061"),r=i.n(s);function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var o={name:"VfFileUploadInput",components:{},mixins:[n.d],props:{id:String,field:Object,value:[Object,String,Array,Number]},data:function(){return{uploader:null,files:[],loading:!1}},mounted:function(){var t=this,e=this.$store.state.host,i={url:this.field.url?this.field.url:"/api/file-uploads",method:"POST",runtime:"html5",headers:e.getWebAuthHeaders({}),browse_button:window.document.getElementById("".concat(this.id,"-browse")),container:window.document.getElementById("".concat(this.id,"-container")),chunk_size:this.field.chunk_size?this.field.chunk_size:"1mb",max_retries:this.field.max_retries?this.field.max_retries:0,filters:{mime_types:this.field.filters?this.field.filters:[{title:"Image",extensions:"jpg,png,jpeg"}],prevent_duplicates:!!this.field.prevent_duplicates&&this.field.prevent_duplicates,max_file_size:this.field.max_file_size},init:{PostInit:function(e){t.$emit("init",e)},FilesAdded:function(e,i){var n;t.field.singleFile?t.files=i:(n=t.files).push.apply(n,a(i));t.$emit("added",e,i)},UploadProgress:function(e,i){t.$emit("progress",e,i)},FileUploaded:function(e,i,n){t.$emit("uploaded",e,i,n)},BeforeUpload:function(e,i){t.uploader.settings.multipart_params=t.field.multipart_params,t.loading=!0},UploadComplete:function(e,i){t.loading=!1,t.$emit("finished",e,i)},Error:function(i,n){if(t.loading=!1,t.uploader.stop(),e.showSnack(n.message),n.response)try{var s=JSON.parse(n.response);if(s&&s.errors)for(var r in s.errors)s.errors[r].forEach((function(t){e.showSnack(t)}))}catch(t){}t.$emit("error",i,n)}}};this.uploader=new r.a.Uploader(i),this.uploader.init()},methods:{startUpload:function(){this.uploader.files.forEach((function(t){t.status===r.a.FAILED&&(t.status=r.a.STOPPED)})),this.uploader.start()},pauseUpload:function(){this.uploader.stop()}}},d=i("KHd+"),c=i("ZUTo"),u=i.n(c),f=i("gzZi"),p=i("Ey0z"),m=i("iGBT"),v=i("2hOt"),_=i("gnBG"),h=i("XSMC"),b=i("SQoD"),g=Object(d.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"vf-input "+(t.field.class?t.field.class:"d-flex flex-column mt-3")},[i("div",{staticClass:"d-flex flex-row justify-space-between",attrs:{id:t.id+"-container"}},[i("label",[t._v(t._s(t.field.label))]),t._v(" "),t.field.hint?i("v-list-item-subtitle",[t._v("\n      "+t._s(t.field.hint)+"\n    ")]):t._e(),t._v(" "),i("div",[i("v-btn",{ref:"browse",attrs:{id:t.id+"-browse",text:"",small:"",color:"primary",href:"javascript:;",disabled:t.loading}},[t._v("\n        انتخاب فایل\n      ")]),t._v(" "),i("v-btn",{attrs:{text:"",small:"",color:"success",disabled:t.loading},on:{click:function(e){return t.startUpload()}}},[t._v("\n        ارسال فایل ها\n      ")]),t._v(" "),i("v-btn",{attrs:{text:"",small:"",color:"warning",disabled:!t.loading},on:{click:function(e){return t.pauseUpload()}}},[t._v("\n        توقف ارسال\n      ")])],1)],1),t._v(" "),i("v-list",{attrs:{dense:""}},[t._l(t.files,(function(e,n){return i("v-list-item",{key:t.id+"-file-"+n},[i("v-list-item-avatar",{attrs:{size:"80"}},[i("v-progress-circular",{staticClass:"ma-auto",attrs:{value:e.percent,size:"70"}},[i("div",{staticClass:"d-flex flex-column justify-center alight-center"},[2===e.status?i("v-btn",{attrs:{icon:"",small:"",loading:!0}}):t._e(),t._v(" "),5===e.status?i("v-icon",{attrs:{color:"success"}},[t._v("\n              mdi-check-decagram\n            ")]):t._e(),t._v("\n            %"+t._s(e.percent)+"\n          ")],1)])],1),t._v(" "),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e.name))]),t._v(" "),i("v-list-item-subtitle",[i("strong",[t._v("Type")]),t._v("\n          "+t._s(e.type)+"\n        ")]),t._v(" "),i("v-list-item-subtitle",[i("strong",[t._v("Size")]),t._v("\n          "+t._s(e.size)+" bytes\n        ")])],1)],1)})),t._v(" "),0===t.files.length?i("v-list-item",[i("v-list-item-title",[t._v("فایلی وجود ندرد")])],1):t._e()],2)],1)}),[],!1,null,null,null);e.default=g.exports;u()(g,{VBtn:f.a,VIcon:p.a,VList:m.a,VListItem:v.a,VListItemAvatar:_.a,VListItemContent:h.a,VListItemSubtitle:h.b,VListItemTitle:h.c,VProgressCircular:b.a})}}]);
//# sourceMappingURL=file-upload.bundle.js.map